/*! For license information please see main.8454ee1c.js.LICENSE.txt */
!function(){var e={329:function(e){"use strict";function t(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function n(e){return t(e,2)}function r(r,i){"string"!==typeof r&&(i=r,r=e.exports.ISO8601_FORMAT),i||(i=e.exports.now());var a=n(i.getDate()),o=n(i.getMonth()+1),s=n(i.getFullYear()),u=n(s.substring(2,4)),c=r.indexOf("yyyy")>-1?s:u,l=n(i.getHours()),f=n(i.getMinutes()),h=n(i.getSeconds()),d=t(i.getMilliseconds(),3),p=function(e){var t=Math.abs(e),n=String(Math.floor(t/60)),r=String(t%60);return n=("0"+n).slice(-2),r=("0"+r).slice(-2),0===e?"Z":(e<0?"+":"-")+n+":"+r}(i.getTimezoneOffset());return r.replace(/dd/g,a).replace(/MM/g,o).replace(/y{1,4}/g,c).replace(/hh/g,l).replace(/mm/g,f).replace(/ss/g,h).replace(/SSS/g,d).replace(/O/g,p)}function i(e,t,n,r){e["set"+(r?"":"UTC")+t](n)}e.exports=r,e.exports.asString=r,e.exports.parse=function(t,n,r){if(!t)throw new Error("pattern must be supplied");return function(t,n,r){var a=t.indexOf("O")<0,o=!1,s=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(e,t){i(e,"FullYear",t,a)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(e,t){i(e,"Month",t-1,a),e.getMonth()!==t-1&&(o=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(e,t){o&&i(e,"Month",e.getMonth()-1,a),i(e,"Date",t,a)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(e,t){i(e,"Hours",t,a)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(e,t){i(e,"Minutes",t,a)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(e,t){i(e,"Seconds",t,a)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(e,t){i(e,"Milliseconds",t,a)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(e,t){t="Z"===t?0:t.replace(":","");var n=Math.abs(t),r=(t>0?-1:1)*(n%100+60*Math.floor(n/100));e.setUTCMinutes(e.getUTCMinutes()+r)}}],u=s.reduce((function(e,t){return t.pattern.test(e.regexp)?(t.index=e.regexp.match(t.pattern).index,e.regexp=e.regexp.replace(t.pattern,"("+t.regexp+")")):t.index=-1,e}),{regexp:t,index:[]}),c=s.filter((function(e){return e.index>-1}));c.sort((function(e,t){return e.index-t.index}));var l=new RegExp(u.regexp).exec(n);if(l){var f=r||e.exports.now();return c.forEach((function(e,t){e.fn(f,l[t+1])})),f}throw new Error("String '"+n+"' could not be parsed as '"+t+"'")}(t,n,r)},e.exports.now=function(){return new Date},e.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS",e.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO",e.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",e.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ce(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,St,Ct=!1,Tt=[],It=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Ct=!1,null!==It&&jt(It)&&(It=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Rt.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var Cn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){jr(e,0)}function Yn(e){if(G(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Sr("animationend"),Tr=Sr("animationiteration"),Ir=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),u(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Cr:case Tr:case Ir:u=yn;break;case Nr:u=An;break;case"scroll":u=hn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Jn;else if(Hn(s))if($n)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Pe(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Pe(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ci(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ii=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ni),Si(Ii)}function Oi(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ci(Ii,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ii.current,Ci(Ii,e),Ci(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ii),Ci(Ii,e)):Si(Ni),Ci(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Hi++]=Ki,qi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Ji=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Si(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Ai:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Ai:Ii.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=o(g,s,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case P:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ja=Ya(!0),$a=Ya(!1),Xa={},Za=Ei(Xa),eo=Ei(Xa),to=Ei(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ci(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var so=Ei(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,Fu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Fu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Au)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Au.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},cs={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Ku=r),hs(0,t)},n}function vs(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ja(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ou,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ou,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Ou,Du),Du|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Ou,Du),Du|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Pi(n)?Ai:Ii.current;return a=Ri(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Is(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Hs(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ri(t,c=Pi(n)?Ai:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ha(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Aa||Ba(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Sa(u):u=Ri(t,u=Pi(n)?Ai:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Ha(t,o,r,u),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ps,Ds,Os,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ms,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Pi(t.type)&&Di(),Gs(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ds(e,t),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),Ds(e,t),null===e&&Br(t.stateNode.containerInfo),Gs(t),null;case 10:return _a(t.type._context),Gs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Gs(t),null}else 2*$e()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,$s=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!$s&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,du(e,t,n),$s=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Sc(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=$e())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($s=(l=$s)||f,mu(t,e),$s=l):mu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(h=Zs=f;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){_u(h);continue}}null!==p?(p.return=d,Zs=p):_u(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Js;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Js;var c=$s;if(Js=o,($s=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?xu(i):null!==u?(u.return=o,Zs=u):xu(i);for(;null!==a;)Zs=a,bu(a,t,n),a=a.sibling;Zs=i,Js=s,$s=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}$s||512&t.flags&&au(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var a=t.return;try{au(t)}catch(u){Sc(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Eu,Su=Math.ceil,Cu=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,Iu=b.ReactCurrentBatchConfig,Nu=0,Au=null,Ru=null,Pu=0,Du=0,Ou=Ei(0),Lu=0,Mu=null,Fu=0,ju=0,Uu=0,Vu=null,zu=null,Bu=0,qu=1/0,Hu=null,Wu=!1,Ku=null,Gu=null,Qu=!1,Yu=null,Ju=0,$u=0,Xu=null,Zu=-1,ec=0;function tc(){return 0!==(6&Nu)?$e():-1!==Zu?Zu:Zu=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<$u)throw $u=0,Xu=null,Error(a(185));yt(e,n,r),0!==(2&Nu)&&e===Au||(e===Au&&(0===(2&Nu)&&(ju|=n),4===Lu&&uc(e,Pu)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(qu=$e()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Au?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Au?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(Au===e&&Pu===t||(Hu=null,qu=$e()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Cu.current=o,Nu=i,null!==Ru?t=0:(Au=null,Pu=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zu,Hu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bu+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zu,Hu),t);break}_c(e,zu,Hu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zu,Hu),r);break}_c(e,zu,Hu);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zu,zu=n,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~Uu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zu,Hu),ic(e,$e()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(qu=$e()+500,Ui&&Bi())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Nu)&&xc();var t=Nu;Nu|=1;var n=Iu.transition,r=kt;try{if(Iu.transition=null,kt=1,e)return e()}finally{kt=r,Iu.transition=n,0===(6&(Nu=t))&&Bi()}}function hc(){Du=Ou.current,Si(Ou)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Si(Ni),Si(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Au=e,Ru=e=Oc(e.current,null),Pu=Du=t,Lu=0,Mu=null,Uu=ju=Fu=0,zu=Vu=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pc(e,t){for(;;){var n=Ru;try{if(wa(),fo.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Tu.current=null,null===n||null===n.return){Lu=1,Mu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function vc(){var e=Cu.current;return Cu.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Au||0===(268435455&Fu)&&0===(268435455&ju)||uc(Au,Pu)}function yc(e,t){var n=Nu;Nu|=2;var r=vc();for(Au===e&&Pu===t||(Hu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Nu=n,Cu.current=r,null!==Ru)throw Error(a(261));return Au=null,Pu=0,Lu}function gc(){for(;null!==Ru;)bc(Ru)}function kc(){for(;null!==Ru&&!Ye();)bc(Ru)}function bc(e){var t=Eu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wc(e):Ru=t,Tu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Du)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function _c(e,t,n){var r=kt,i=Iu.transition;try{Iu.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Yu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Au&&(Ru=Au=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Ht,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),yu(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Je(),Nu=u,kt=s,Iu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,Ju=i),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Ku,Ku=null,e;0!==(1&Ju)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xu?$u++:($u=0,Xu=e):$u=0,Bi()}(e,t,n,r)}finally{Iu.transition=i,kt=r}return null}function xc(){if(null!==Yu){var e=bt(Ju),t=Iu.transition,n=kt;try{if(Iu.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Ju=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zs=h;else for(;null!==Zs;){var d=(f=Zs).sibling,p=f.return;if(ou(f),f===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(_){Sc(u,u.return,_)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Nu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Iu.transition=t}}return!1}function Ec(e,t,n){e=Oa(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Oa(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Pu&n)===n&&(4===Lu||3===Lu&&(130023424&Pu)===Pu&&500>$e()-Bu?dc(e,0):Uu|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case E:s=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case I:s=11;break e;case R:s=14;break e;case P:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=zc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ci(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Hs(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Wa(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Hc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Hc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Nu)&&(qu=$e()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ce,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+I(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+I(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(C),C=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,C=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function A(){if(null!==S){var e=t.unstable_now();I=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){y(A,0)};function D(e){S=e,E||(E=!0,x())}function O(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(C),C=-1):m=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},191:function(e){var t="undefined"!==typeof process&&process.pid?process.pid.toString(36):"";function n(){var e=Date.now(),t=n.last||e;return n.last=e>t?e:t+1}e.exports=e.exports.default=function(e,r){return(e||"")+""+t+n().toString(36)+(r||"")},e.exports.process=function(e,r){return(e||"")+t+n().toString(36)+(r||"")},e.exports.time=function(e,t){return(e||"")+n().toString(36)+(t||"")}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=n(791),t=n.t(e,2),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||o(e,t)||s()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(){return l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},l.apply(this,arguments)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e){var t=p();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function g(){g=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(A){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:x(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,k=y&&y(y(I([])));k&&k!==t&&n.call(k,a)&&(m=k);var b=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==v(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return d.prototype=p,r(b,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),u(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),u(b,s,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function k(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(tb){return void n(tb)}s.done?t(u):Promise.resolve(u).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){k(a,r,i,o,s,"next",e)}function s(e){k(a,r,i,o,s,"throw",e)}o(void 0)}))}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function E(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function C(e){return function(e){if(Array.isArray(e))return a(e)}(e)||S(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t,n){return I=p()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i},I.apply(null,arguments)}function N(e){var t="function"===typeof Map?new Map:void 0;return N=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},N(e)}var A=!1,R=!1,P="${JSCORE_VERSION}",D=function(e,t){if(!e)throw O(t)},O=function(e){return new Error("Firebase Database ("+P+") INTERNAL ASSERT FAILED: "+e)},L=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},M={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(L(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new F;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},F=function(e){d(n,e);var t=m(n);function n(){var e;return w(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return E(n)}(N(Error)),j=function(e){var t=L(e);return M.encodeByteArray(t,!0)},U=function(e){return j(e).replace(/\./g,"")},V=function(e){try{return M.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function z(e){return B(void 0,e)}function B(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=B(e[n],t[n]));return e}var q=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},H=function(){try{return q()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&V(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},W=function(e){var t,n;return null===(n=null===(t=H())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},K=function(e){var t=W(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},G=function(){var e;return null===(e=H())||void 0===e?void 0:e.config},Q=function(e){var t;return null===(t=H())||void 0===t?void 0:t["_".concat(e)]},Y=function(){function e(){var t=this;w(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return E(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function J(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[U(JSON.stringify({alg:"none",type:"JWT"})),U(JSON.stringify(a)),""].join(".")}function $(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function X(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($())}function Z(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ee(){return!0===A||!0===R}function te(){try{return"object"===typeof indexedDB}catch(e){return!1}}var ne=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(f(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(f(a),re.prototype.create),a}return E(n)}(N(Error)),re=function(){function e(t,n,r){w(this,e),this.service=t,this.serviceName=n,this.errors=r}return E(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ie,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ne(n,a,t)}}]),e}();var ie=/\{\$([^}]+)}/g;function ae(e){return JSON.parse(e)}function oe(e){return JSON.stringify(e)}var se=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ae(V(a[0])||""),n=ae(V(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ce(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function le(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function fe(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function he(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(de(s)&&de(u)){if(!he(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function de(e){return null!==e&&"object"===typeof e}function pe(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ve(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=u(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function me(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ye=function(){function e(){w(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return E(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var ge=function(){function e(t,n){var r=this;w(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return E(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=y(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ke),void 0===r.error&&(r.error=ke),void 0===r.complete&&(r.complete=ke);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ke(){}function be(e,t){return"".concat(e," failed: ").concat(t," argument ")}var we=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function _e(e){return e&&e._delegate?e._delegate:e}var xe=function(){function e(t,n,r){w(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return E(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ee="[DEFAULT]",Se=function(){function e(t,n){w(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return E(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Y;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch(c){}var t,n=y(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(C(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),C(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=y(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),c=s[0],l=s[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ee?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.component?this.component.multipleInstances?e:Ee:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ce,Te,Ie=function(){function e(t){w(this,e),this.name=t,this.providers=new Map}return E(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Se(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ne=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Te||(Te={}));var Ae={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Re=Te.INFO,Pe=(T(Ce={},Te.DEBUG,"log"),T(Ce,Te.VERBOSE,"log"),T(Ce,Te.INFO,"info"),T(Ce,Te.WARN,"warn"),T(Ce,Te.ERROR,"error"),Ce),De=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Pe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Oe=function(){function e(t){w(this,e),this.name=t,this._logLevel=Re,this._logHandler=De,this._userLogHandler=null,Ne.push(this)}return E(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Te))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ae[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.DEBUG].concat(t)),this._logHandler.apply(this,[this,Te.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Te.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.INFO].concat(t)),this._logHandler.apply(this,[this,Te.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.WARN].concat(t)),this._logHandler.apply(this,[this,Te.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.ERROR].concat(t)),this._logHandler.apply(this,[this,Te.ERROR].concat(t))}}]),e}();function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe,je,Ue=function(e,t){return t.some((function(t){return e instanceof t}))};var Ve=new WeakMap,ze=new WeakMap,Be=new WeakMap,qe=new WeakMap,He=new WeakMap;var We={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ze.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Be.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ke(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(je||(je=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ye(this),n),Qe(Ve.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qe(e.apply(Ye(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ye(this),t].concat(r));return Be.set(a,t.sort?t.sort():[t]),Qe(a)}}function Ge(e){return"function"===typeof e?Ke(e):(e instanceof IDBTransaction&&function(e){if(!ze.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ze.set(e,t)}}(e),Ue(e,Fe||(Fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,We):e)}function Qe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Qe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ve.set(t,e)})).catch((function(){})),He.set(t,e),t}(e);if(qe.has(e))return qe.get(e);var t=Ge(e);return t!==e&&(qe.set(e,t),He.set(t,e)),t}var Ye=function(e){return He.get(e)};var Je,$e,Xe=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],et=new Map;function tt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(et.get(t))return et.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ze.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Xe.includes(n))){var a=function(){var e=b(g().mark((function e(t){var a,o,s,u,c,l,f=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return et.set(t,a),a}}}We=function(e){return Me(Me({},e),{},{get:function(t,n,r){return tt(t,n)||e.get(t,n,r)},has:function(t,n){return!!tt(t,n)||e.has(t,n)}})}(We);var nt=function(){function e(t){w(this,e),this.container=t}return E(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var rt="@firebase/app",it="0.9.12",at=new Oe("@firebase/app"),ot="[DEFAULT]",st=(T(Je={},rt,"fire-core"),T(Je,"@firebase/app-compat","fire-core-compat"),T(Je,"@firebase/analytics","fire-analytics"),T(Je,"@firebase/analytics-compat","fire-analytics-compat"),T(Je,"@firebase/app-check","fire-app-check"),T(Je,"@firebase/app-check-compat","fire-app-check-compat"),T(Je,"@firebase/auth","fire-auth"),T(Je,"@firebase/auth-compat","fire-auth-compat"),T(Je,"@firebase/database","fire-rtdb"),T(Je,"@firebase/database-compat","fire-rtdb-compat"),T(Je,"@firebase/functions","fire-fn"),T(Je,"@firebase/functions-compat","fire-fn-compat"),T(Je,"@firebase/installations","fire-iid"),T(Je,"@firebase/installations-compat","fire-iid-compat"),T(Je,"@firebase/messaging","fire-fcm"),T(Je,"@firebase/messaging-compat","fire-fcm-compat"),T(Je,"@firebase/performance","fire-perf"),T(Je,"@firebase/performance-compat","fire-perf-compat"),T(Je,"@firebase/remote-config","fire-rc"),T(Je,"@firebase/remote-config-compat","fire-rc-compat"),T(Je,"@firebase/storage","fire-gcs"),T(Je,"@firebase/storage-compat","fire-gcs-compat"),T(Je,"@firebase/firestore","fire-fst"),T(Je,"@firebase/firestore-compat","fire-fst-compat"),T(Je,"fire-js","fire-js"),T(Je,"firebase","fire-js-all"),Je),ut=new Map,ct=new Map;function lt(e,t){try{e.container.addComponent(t)}catch(n){at.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ft(e){var t=e.name;if(ct.has(t))return at.debug("There were multiple attempts to register component ".concat(t,".")),!1;ct.set(t,e);var n,r=y(ut.values());try{for(r.s();!(n=r.n()).done;){lt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ht(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var dt=(T($e={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),T($e,"bad-app-name","Illegal App name: '{$appName}"),T($e,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),T($e,"app-deleted","Firebase App named '{$appName}' already deleted"),T($e,"no-options","Need to provide options, when not being deployed to hosting via source."),T($e,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),T($e,"invalid-log-argument","First argument to `onLog` must be null or a function."),T($e,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),T($e,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),T($e,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),T($e,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),$e),pt=new re("app","Firebase",dt),vt=function(){function e(t,n,r){var i=this;w(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xe("app",(function(){return i}),"PUBLIC"))}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}]),e}(),mt="9.22.2";function yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:ot,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw pt.create("bad-app-name",{appName:String(i)});if(n||(n=G()),!n)throw pt.create("no-options");var a=ut.get(i);if(a){if(he(n,a.options)&&he(r,a.config))return a;throw pt.create("duplicate-app",{appName:i})}var o,s=new Ie(i),u=y(ct.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new vt(n,r,s);return ut.set(i,l),l}function gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=ut.get(e);if(!t&&e===ot&&G())return yt();if(!t)throw pt.create("no-app",{appName:e});return t}function kt(e,t,n){var r,i=null!==(r=st[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void at.warn(s.join(" "))}ft(new xe("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var bt="firebase-heartbeat-database",wt=1,_t="firebase-heartbeat-store",xt=null;function Et(){return xt||(xt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Qe(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Qe(s.result),e.oldVersion,e.newVersion,Qe(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(bt,wt,{upgrade:function(e,t){if(0===t)e.createObjectStore(_t)}}).catch((function(e){throw pt.create("idb-open",{originalErrorMessage:e.message})}))),xt}function St(e){return Ct.apply(this,arguments)}function Ct(){return Ct=b(g().mark((function e(t){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Et();case 3:return n=e.sent,e.next=6,n.transaction(_t).objectStore(_t).get(Nt(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof ne?at.warn(e.t0.message):(i=pt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),at.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Ct.apply(this,arguments)}function Tt(e,t){return It.apply(this,arguments)}function It(){return It=b(g().mark((function e(t,n){var r,i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Et();case 3:return r=e.sent,i=r.transaction(_t,"readwrite"),a=i.objectStore(_t),e.next=8,a.put(n,Nt(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof ne?at.warn(e.t0.message):(o=pt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),at.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),It.apply(this,arguments)}function Nt(e){return"".concat(e.name,"!").concat(e.options.appId)}var At=function(){function e(t){var n=this;w(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ot(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return E(e,[{key:"triggerHeartbeat",value:function(){var e=b(g().mark((function e(){var t,n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Rt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=b(g().mark((function e(){var t,n,r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Rt(),n=Pt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=U(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Rt(){return(new Date).toISOString().substring(0,10)}function Pt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=y(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Lt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Lt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Dt,Ot=function(){function e(t){w(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return E(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(tb){t(tb)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,St(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Tt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Tt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(C(r.heartbeats),C(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Lt(e){return U(JSON.stringify({version:2,heartbeats:e})).length}Dt="",ft(new xe("platform-logger",(function(e){return new nt(e)}),"PRIVATE")),ft(new xe("heartbeat",(function(e){return new At(e)}),"PRIVATE")),kt(rt,it,Dt),kt(rt,it,"esm2017"),kt("fire-js","");function Mt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var Ft;function jt(){return T({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ut=jt,Vt=new re("auth","Firebase",jt()),zt=new Oe("@firebase/auth");function Bt(e){if(zt.logLevel<=Te.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zt.warn.apply(zt,["Auth (".concat(mt,"): ").concat(e)].concat(n))}}function qt(e){if(zt.logLevel<=Te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zt.error.apply(zt,["Auth (".concat(mt,"): ").concat(e)].concat(n))}}function Ht(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Qt.apply(void 0,[e].concat(n))}function Wt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qt.apply(void 0,[e].concat(n))}function Kt(e,t,n){var r=Object.assign(Object.assign({},Ut()),T({},t,n));return new re("auth","Firebase",r).create(t,{appName:e.name})}function Gt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ht(e,"argument-error"),Kt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=C(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(C(o)))}return Vt.create.apply(Vt,[e].concat(n))}function Yt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Qt.apply(void 0,[t].concat(r))}}function Jt(e){var t="INTERNAL ASSERTION FAILED: "+e;throw qt(t),new Error(t)}function $t(e,t){e||Jt(t)}function Xt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zt(){return"http:"===en()||"https:"===en()}function en(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function tn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Zt()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var nn=function(){function e(t,n){w(this,e),this.shortDelay=t,this.longDelay=n,$t(n>t,"Short delay should be less than long delay!"),this.isMobile=X()||Z()}return E(e,[{key:"get",value:function(){return tn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function rn(e,t){$t(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var an=function(){function e(){w(this,e)}return E(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Jt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Jt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Jt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),on=(T(Ft={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),T(Ft,"MISSING_CUSTOM_TOKEN","internal-error"),T(Ft,"INVALID_IDENTIFIER","invalid-email"),T(Ft,"MISSING_CONTINUE_URI","internal-error"),T(Ft,"INVALID_PASSWORD","wrong-password"),T(Ft,"MISSING_PASSWORD","missing-password"),T(Ft,"EMAIL_EXISTS","email-already-in-use"),T(Ft,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),T(Ft,"INVALID_IDP_RESPONSE","invalid-credential"),T(Ft,"INVALID_PENDING_TOKEN","invalid-credential"),T(Ft,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),T(Ft,"MISSING_REQ_TYPE","internal-error"),T(Ft,"EMAIL_NOT_FOUND","user-not-found"),T(Ft,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),T(Ft,"EXPIRED_OOB_CODE","expired-action-code"),T(Ft,"INVALID_OOB_CODE","invalid-action-code"),T(Ft,"MISSING_OOB_CODE","internal-error"),T(Ft,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),T(Ft,"INVALID_ID_TOKEN","invalid-user-token"),T(Ft,"TOKEN_EXPIRED","user-token-expired"),T(Ft,"USER_NOT_FOUND","user-token-expired"),T(Ft,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),T(Ft,"INVALID_CODE","invalid-verification-code"),T(Ft,"INVALID_SESSION_INFO","invalid-verification-id"),T(Ft,"INVALID_TEMPORARY_PROOF","invalid-credential"),T(Ft,"MISSING_SESSION_INFO","missing-verification-id"),T(Ft,"SESSION_EXPIRED","code-expired"),T(Ft,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),T(Ft,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),T(Ft,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),T(Ft,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),T(Ft,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),T(Ft,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),T(Ft,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),T(Ft,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),T(Ft,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),T(Ft,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),T(Ft,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),T(Ft,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),T(Ft,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),T(Ft,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),T(Ft,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),T(Ft,"MISSING_CLIENT_TYPE","missing-client-type"),T(Ft,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),T(Ft,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),T(Ft,"INVALID_REQ_TYPE","invalid-req-type"),Ft),sn=new nn(3e4,6e4);function un(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function cn(e,t,n,r){return ln.apply(this,arguments)}function ln(){return ln=b(g().mark((function e(t,n,r,i){var a,o=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",fn(t,a,b(g().mark((function e(){var a,o,s,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=pe(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",an.fetch()(vn(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ln.apply(this,arguments)}function fn(e,t,n){return hn.apply(this,arguments)}function hn(){return hn=b(g().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d,p;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},on),n),e.prev=2,a=new mn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw yn(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=o.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=u(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw yn(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw yn(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw yn(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Kt(t,p,d);case 34:Ht(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ne)){e.next=41;break}throw e.t0;case 41:Ht(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),hn.apply(this,arguments)}function dn(e,t,n,r){return pn.apply(this,arguments)}function pn(){return pn=b(g().mark((function e(t,n,r,i){var a,o,s=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,cn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ht(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),pn.apply(this,arguments)}function vn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?rn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var mn=function(){function e(t){var n=this;w(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Wt(n.auth,"network-request-failed"))}),sn.get())}))}return E(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function yn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Wt(e,t,r);return i.customData._tokenResponse=n,i}function gn(e,t){return kn.apply(this,arguments)}function kn(){return kn=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),kn.apply(this,arguments)}function bn(e,t){return wn.apply(this,arguments)}function wn(){return wn=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}function _n(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function xn(){return xn=b(g().mark((function e(t){var n,r,i,a,o,s,u=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=_e(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Yt((a=Sn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:_n(En(a.auth_time)),issuedAtTime:_n(En(a.iat)),expirationTime:_n(En(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),xn.apply(this,arguments)}function En(e){return 1e3*Number(e)}function Sn(e){var t=u(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return qt("JWT malformed, contained fewer than 3 sections"),null;try{var a=V(r);return a?JSON.parse(a):(qt("Failed to decode base64 JWT payload"),null)}catch(o){return qt("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Cn(e,t){return Tn.apply(this,arguments)}function Tn(){return Tn=b(g().mark((function e(t,n){var r=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ne&&In(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Tn.apply(this,arguments)}function In(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Nn=function(){function e(t){w(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return E(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(b(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),An=function(){function e(t,n){w(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return E(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=_n(this.lastLoginAt),this.creationTime=_n(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Rn(e){return Pn.apply(this,arguments)}function Pn(){return Pn=b(g().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Cn(t,bn(r,{idToken:i}));case 6:Yt(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Mt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=On(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new An(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Pn.apply(this,arguments)}function Dn(){return(Dn=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_e(t),e.next=3,Rn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function On(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(C(n),C(t))}function Ln(e,t){return Mn.apply(this,arguments)}function Mn(){return Mn=b(g().mark((function e(t,n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fn(t,{},b(g().mark((function e(){var r,i,a,o,s,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pe({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=vn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",an.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Mn.apply(this,arguments)}var Fn=function(){function e(){w(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return E(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Yt(e.idToken,"internal-error"),Yt("undefined"!==typeof e.idToken,"internal-error"),Yt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Sn(e);return Yt(t,"internal-error"),Yt("undefined"!==typeof t.exp,"internal-error"),Yt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=b(g().mark((function e(t){var n,r=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Yt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=b(g().mark((function e(t,n){var r,i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Jt("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Yt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Yt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Yt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function jn(e,t){Yt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Un=function(){function e(t){w(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Mt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?C(a.providerData):[],this.metadata=new An(a.createdAt||void 0,a.lastLoginAt||void 0)}return E(e,[{key:"getIdToken",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Yt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return xn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Dn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=b(g().mark((function e(t){var n,r,i=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Rn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Cn(this,gn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Yt(k&&x,t,"internal-error");var E=Fn.fromJSON(this.name,x);Yt("string"===typeof k,t,"internal-error"),jn(f,t.name),jn(h,t.name),Yt("boolean"===typeof b,t,"internal-error"),Yt("boolean"===typeof w,t,"internal-error"),jn(d,t.name),jn(p,t.name),jn(v,t.name),jn(m,t.name),jn(y,t.name),jn(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=b(g().mark((function t(n,r){var i,a,o,s=arguments;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Fn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Rn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Vn=new Map;function zn(e){$t(e instanceof Function,"Expected a class definition");var t=Vn.get(e);return t?($t(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Vn.set(e,t),t)}var Bn=function(){function e(){w(this,e),this.type="NONE",this.storage={}}return E(e,[{key:"_isAvailable",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Bn.type="NONE";var qn=Bn;function Hn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Wn=function(){function e(t,n,r){w(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Hn(this.userKey,a.apiKey,o),this.fullPersistenceKey=Hn("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return E(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Un._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=b(g().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(zn(qn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||zn(qn),s=Hn(i,n.config.apiKey,n.name),u=null,c=y(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=Un._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Kn(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Gn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xn(t))return"Blackberry";if(Zn(t))return"Webos";if(Qn(t))return"Safari";if((t.includes("chrome/")||Yn(t))&&!t.includes("edge/"))return"Chrome";if($n(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$();return/firefox\//i.test(e)}function Qn(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$();return/crios\//i.test(e)}function Jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$();return/iemobile/i.test(e)}function $n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$();return/android/i.test(e)}function Xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$();return/blackberry/i.test(e)}function Zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$();return/webos/i.test(e)}function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function tr(){return function(){var e=$();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$();return er(e)||$n(e)||Zn(e)||Xn(e)||/windows phone/i.test(e)||Jn(e)}function rr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Kn($());break;case"Worker":t="".concat(Kn($()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(mt,"/").concat(r)}function ir(e,t){return ar.apply(this,arguments)}function ar(){return ar=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"GET","/v2/recaptchaConfig",un(t,n)));case 1:case"end":return e.stop()}}),e)}))),ar.apply(this,arguments)}function or(e){return void 0!==e&&void 0!==e.enterprise}var sr=E((function e(t){if(w(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function ur(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Wt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function cr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var lr=function(){function e(t){w(this,e),this.type="recaptcha-enterprise",this.auth=vr(t)}return E(e,[{key:"verify",value:function(){var e=b(g().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;or(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=b(g().mark((function e(n,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ir(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new sr(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&or(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));ur("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function fr(e,t,n){return hr.apply(this,arguments)}function hr(){return hr=b(g().mark((function e(t,n,r){var i,a,o,s,u=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new lr(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),hr.apply(this,arguments)}var dr=function(){function e(t){w(this,e),this.auth=t,this.queue=[]}return E(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=b(g().mark((function e(t){var n,r,i,a,o,s,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=y(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=y(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),pr=function(){function e(t,n,r,i){w(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mr(this),this.idTokenSubscription=new mr(this),this.beforeStateQueue=new dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return E(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=zn(t)),this._initializationPromise=this.queue(b(g().mark((function r(){var i,a;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Wn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=b(g().mark((function e(t){var n,r,i,a,o,s,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Yt(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?_e(t):null)&&Yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=b(g().mark((function e(t){var n,r=this,i=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(b(g().mark((function n(){return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(zn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=b(g().mark((function e(){var t,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new sr(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new lr(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new re("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=b(g().mark((function e(t,n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Yt(n=t&&zn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Wn.create(this,[zn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=b(g().mark((function e(t){var n=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Yt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=b(g().mark((function e(){var t,n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=b(g().mark((function e(){var t,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Bt("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vr(e){return _e(e)}var mr=function(){function e(t){var n=this;w(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new ge(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return E(e,[{key:"next",get:function(){return Yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function yr(e,t,n){var r=vr(e);Yt(r._canInitEmulator,r,"emulator-config-failed"),Yt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=gr(t),o=function(e){var t=gr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:kr(r.substr(a.length+1))}}var o=u(r.split(":"),2);return{host:o[0],port:kr(o[1])}}(t),s=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function gr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var br=function(){function e(t,n){w(this,e),this.providerId=t,this.signInMethod=n}return E(e,[{key:"toJSON",value:function(){return Jt("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Jt("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Jt("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Jt("not implemented")}}]),e}();function wr(e,t){return _r.apply(this,arguments)}function _r(){return _r=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}function xr(e,t){return Er.apply(this,arguments)}function Er(){return Er=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dn(t,"POST","/v1/accounts:signInWithPassword",un(t,n)));case 1:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Sr(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dn(t,"POST","/v1/accounts:signInWithEmailLink",un(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Tr(e,t){return Ir.apply(this,arguments)}function Ir(){return Ir=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dn(t,"POST","/v1/accounts:signInWithEmailLink",un(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}var Nr=function(e){d(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return w(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return E(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=b(g().mark((function e(t){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,fr(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",xr(t,i));case 11:return e.abrupt("return",xr(t,r).catch(function(){var e=b(g().mark((function e(n){var i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,fr(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",xr(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Sr(t,{email:this._email,oobCode:this._password}));case 13:Ht(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",wr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Tr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ht(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(br);function Ar(e,t){return Rr.apply(this,arguments)}function Rr(){return Rr=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dn(t,"POST","/v1/accounts:signInWithIdp",un(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}var Pr=function(e){d(n,e);var t=m(n);function n(){var e;return w(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return E(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ar(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ar(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ar(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pe(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ht("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Mt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(br);function Dr(e,t){return Or.apply(this,arguments)}function Or(){return Or=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:sendVerificationCode",un(t,n)));case 1:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Lr(){return Lr=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dn(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,n)));case 1:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Mr(){return Mr=b(g().mark((function e(t,n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dn(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw yn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Mr.apply(this,arguments)}var Fr=T({},"USER_NOT_FOUND","user-not-found");function jr(){return jr=b(g().mark((function e(t,n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",dn(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,r),Fr));case 2:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}var Ur=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this,"phone","phone")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Lr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Mr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return jr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(br);var Vr=function(){function e(t){var n,r,i,a,o,s;w(this,e);var u=ve(me(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Yt(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return E(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ve(me(e)).link,n=t?ve(me(t)).deep_link_id:null,r=ve(me(e)).deep_link_id;return(r?ve(me(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var zr=function(){function e(){w(this,e),this.providerId=e.PROVIDER_ID}return E(e,null,[{key:"credential",value:function(e,t){return Nr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Vr.parseLink(t);return Yt(n,"argument-error"),Nr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();zr.PROVIDER_ID="password",zr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",zr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Br=function(){function e(t){w(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return E(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),qr=function(e){d(n,e);var t=m(n);function n(){var e;return w(this,n),(e=t.apply(this,arguments)).scopes=[],e}return E(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return C(this.scopes)}}]),n}(Br),Hr=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.call(this,"facebook.com")}return E(n,null,[{key:"credential",value:function(e){return Pr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(qr);Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Hr.PROVIDER_ID="facebook.com";var Wr=function(e){d(n,e);var t=m(n);function n(){var e;return w(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return E(n,null,[{key:"credential",value:function(e,t){return Pr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(qr);Wr.GOOGLE_SIGN_IN_METHOD="google.com",Wr.PROVIDER_ID="google.com";var Kr=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.call(this,"github.com")}return E(n,null,[{key:"credential",value:function(e){return Pr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(qr);Kr.GITHUB_SIGN_IN_METHOD="github.com",Kr.PROVIDER_ID="github.com";var Gr=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.call(this,"twitter.com")}return E(n,null,[{key:"credential",value:function(e,t){return Pr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(qr);Gr.TWITTER_SIGN_IN_METHOD="twitter.com",Gr.PROVIDER_ID="twitter.com";var Qr=function(){function e(t){w(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return E(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=b(g().mark((function t(n,r,i){var a,o,s,u,c=arguments;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Un._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Yr(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=b(g().mark((function t(n,r,i){var a;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Yr(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Yr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Jr=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o,s;return w(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(f(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return E(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ne);function $r(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Jr._fromErrorAndOperation(e,n,t,r);throw n}))}function Xr(e,t){return Zr.apply(this,arguments)}function Zr(){return Zr=b(g().mark((function e(t,n){var r,i,a=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Cn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Qr._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return ti=b(g().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Cn(t,$r(i,a,n,t),r);case 6:return Yt((o=e.sent).idToken,i,"internal-error"),Yt(s=Sn(o.idToken),i,"internal-error"),u=s.sub,Yt(t.uid===u,i,"user-mismatch"),e.abrupt("return",Qr._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ht(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ti.apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=b(g().mark((function e(t,n){var r,i,a,o,s=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,$r(t,i,n);case 4:return a=e.sent,e.next=7,Qr._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function ii(e,t,n,r){return _e(e).onAuthStateChanged(t,n,r)}function ai(e,t){return cn(e,"POST","/v2/accounts/mfaEnrollment:start",un(e,t))}function oi(e,t){return cn(e,"POST","/v2/accounts/mfaEnrollment:start",un(e,t))}function si(e,t){return cn(e,"POST","/v2/accounts/mfaEnrollment:finalize",un(e,t))}new WeakMap;var ui="__sak",ci=function(){function e(t,n){w(this,e),this.storageRetriever=t,this.type=n}return E(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ui,"1"),this.storage.removeItem(ui),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var li=function(e){d(n,e);var t=m(n);function n(){var e;return w(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=$();return Qn(e)||er(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=nr(),e._shouldAllowMigration=!0,e}return E(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);tr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=b(g().mark((function e(t,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(c(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=b(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(c(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(c(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ci);li.type="LOCAL";var fi=li,hi=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return E(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ci);hi.type="SESSION";var di=hi;function pi(e){return Promise.all(e.map(function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var vi=function(){function e(t){w(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return E(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=b(g().mark((function e(t){var n,r,i,a,o,s,u,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,pi(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function mi(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}vi.receivers=[];var yi=function(){function e(t){w(this,e),this.target=t,this.handlers=new Set}return E(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=b(g().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=mi("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function gi(){return window}function ki(e){gi().location.href=e}function bi(){return"undefined"!==typeof gi().WorkerGlobalScope&&"function"===typeof gi().importScripts}function wi(){return _i.apply(this,arguments)}function _i(){return(_i=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function xi(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ei="firebaseLocalStorageDb",Si="firebaseLocalStorage",Ci="fbase_key",Ti=function(){function e(t){w(this,e),this.request=t}return E(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ii(e,t){return e.transaction([Si],t?"readwrite":"readonly").objectStore(Si)}function Ni(){var e=indexedDB.deleteDatabase(Ei);return new Ti(e).toPromise()}function Ai(){var e=indexedDB.open(Ei,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Si,{keyPath:Ci})}catch(r){n(r)}})),e.addEventListener("success",b(g().mark((function n(){var r;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Si)){n.next=12;break}return r.close(),n.next=5,Ni();case 5:return n.t0=t,n.next=8,Ai();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ri(e,t,n){return Pi.apply(this,arguments)}function Pi(){return Pi=b(g().mark((function e(t,n,r){var i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ii(t,!0).put((T(i={},Ci,n),T(i,"value",r),i)),e.abrupt("return",new Ti(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function Di(e,t){return Oi.apply(this,arguments)}function Oi(){return Oi=b(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ii(t,!1).get(n),e.next=3,new Ti(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}function Li(e,t){var n=Ii(e,!0).delete(t);return new Ti(n).toPromise()}var Mi=function(){function e(){w(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return E(e,[{key:"_openDb",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ai();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bi()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=b(g().mark((function e(){var t=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=vi._getInstance(bi()?self:null),this.receiver._subscribe("keyChanged",function(){var e=b(g().mark((function e(n,r){var i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=b(g().mark((function e(){var t,n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wi();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new yi(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&xi()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ai();case 5:return t=e.sent,e.next=8,Ri(t,ui,"1");case 8:return e.next=10,Li(t,ui);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=b(g().mark((function e(t,n){var r=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ri(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Di(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=b(g().mark((function e(t){var n=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Li(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=b(g().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ii(e,!1).getAll();return new Ti(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=y(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(b(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Mi.type="LOCAL";var Fi=Mi;function ji(e,t){return cn(e,"POST","/v2/accounts/mfaSignIn:start",un(e,t))}function Ui(e,t){return cn(e,"POST","/v2/accounts/mfaSignIn:finalize",un(e,t))}cr("rcb"),new nn(3e4,6e4);var Vi="recaptcha";function zi(e,t,n){return Bi.apply(this,arguments)}function Bi(){return Bi=b(g().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Yt("string"===typeof a,t,"argument-error"),Yt(r.type===Vi,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Yt("enroll"===s.type,t,"internal-error"),e.next=13,ai(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Yt("signin"===s.type,t,"internal-error"),Yt(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,ji(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Dr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Bi.apply(this,arguments)}var qi=function(){function e(t){w(this,e),this.providerId=e.PROVIDER_ID,this.auth=vr(t)}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return zi(this.auth,e,_e(t))}}],[{key:"credential",value:function(e,t){return Ur._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ur._fromTokenResponse(n,r):null}}]),e}();function Hi(e,t){return t?zn(t):(Yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qi.PROVIDER_ID="phone",qi.PHONE_SIGN_IN_METHOD="phone";var Wi=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this,"custom","custom")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return Ar(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ar(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ar(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(br);function Ki(e){return ni(e.auth,new Wi(e),e.bypassAuthState)}function Gi(e){var t=e.auth,n=e.user;return Yt(n,t,"internal-error"),ei(n,new Wi(e),e.bypassAuthState)}function Qi(e){return Yi.apply(this,arguments)}function Yi(){return Yi=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Yt(r=t.user,n,"internal-error"),e.abrupt("return",Xr(r,new Wi(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}var Ji=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];w(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return E(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=b(g().mark((function t(n,r){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=b(g().mark((function e(t){var n,r,i,a,o,s,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ki;case"linkViaPopup":case"linkViaRedirect":return Qi;case"reauthViaPopup":case"reauthViaRedirect":return Gi;default:Ht(this.auth,"internal-error")}}},{key:"resolve",value:function(e){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),$i=new nn(2e3,1e4);function Xi(){return Xi=b(g().mark((function e(t,n,r){var i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),Gt(t,n,Br),a=Hi(i,r),o=new Zi(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Xi.apply(this,arguments)}var Zi=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o){var s;return w(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=f(s),s}return E(n,[{key:"executeNotNull",value:function(){var e=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Yt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=b(g().mark((function e(){var t,n=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t(1===this.filter.length,"Popup operations only handle one event"),t=mi(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Wt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Wt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Wt(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,$i.get())}()}}]),n}(Ji);Zi.currentPopupAction=null;var ea="pendingRedirect",ta=new Map,na=function(e){d(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return w(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return E(n,[{key:"execute",value:function(){var e=b(g().mark((function e(){var t,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ta.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ra(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,l(c(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ta.set(this.auth._key(),t);case 21:return this.bypassAuthState||ta.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=b(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",l(c(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",l(c(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ji);function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=b(g().mark((function e(t,n){var r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sa(n),i=oa(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){ta.set(e._key(),t)}function oa(e){return zn(e._redirectPersistence)}function sa(e){return Hn(ea,e.config.apiKey,e.name)}function ua(e,t){return ca.apply(this,arguments)}function ca(){return ca=b(g().mark((function e(t,n){var r,i,a,o,s,u=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=vr(t),a=Hi(i,n),o=new na(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}var la=function(){function e(t){w(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return E(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ha(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ha(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fa(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(fa(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function fa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ha(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function da(e){return pa.apply(this,arguments)}function pa(){return pa=b(g().mark((function e(t){var n,r=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",cn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}var va=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ma=/^https?/;function ya(){return ya=b(g().mark((function e(t){var n,r,i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,da(t);case 4:n=e.sent,r=n.authorizedDomains,i=y(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ga(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ht(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),ya.apply(this,arguments)}function ga(e){var t=Xt(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ma.test(r))return!1;if(va.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var ka=new nn(3e4,6e4);function ba(){var e=gi().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=C(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var wa=null;function _a(e){return wa=wa||function(e){return new Promise((function(t,n){var r,i,a;function o(){ba(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ba(),n(Wt(e,"network-request-failed"))},timeout:ka.get()})}if(null===(i=null===(r=gi().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=gi().gapi)||void 0===a?void 0:a.load)){var s=cr("iframefcb");return gi()[s]=function(){gapi.load?o():n(Wt(e,"network-request-failed"))},ur("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw wa=null,e}))}(e),wa}var xa=new nn(5e3,15e3),Ea="__/auth/iframe",Sa="emulator/auth/iframe",Ca={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ta=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ia(e){var t=e.config;Yt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?rn(t,Sa):"https://".concat(e.config.authDomain,"/").concat(Ea),r={apiKey:t.apiKey,appName:e.name,v:mt},i=Ta.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(pe(r).slice(1))}function Na(e){return Aa.apply(this,arguments)}function Aa(){return Aa=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t);case 2:return n=e.sent,Yt(r=gi().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ia(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ca,dontclear:!0},(function(e){return new Promise(function(){var n=b(g().mark((function n(r,i){var a,o,s;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){gi().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Wt(t,"network-request-failed"),o=gi().setTimeout((function(){i(a)}),xa.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}var Ra={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pa=function(){function e(t){w(this,e),this.window=t,this.associatedEvent=null}return E(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Da(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",c=Object.assign(Object.assign({},Ra),{width:r.toString(),height:i.toString(),top:a,left:o}),l=$().toLowerCase();n&&(s=Yn(l)?"_blank":n),Gn(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=u(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return er(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Pa(null);var h=window.open(t||"",s,f);Yt(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Pa(h)}var Oa="__/auth/handler",La="emulator/auth/handler",Ma=encodeURIComponent("fac");function Fa(e,t,n,r,i,a){return ja.apply(this,arguments)}function ja(){return ja=b(g().mark((function e(t,n,r,i,a,o){var s,c,l,f,h,d,p,v,m,y,k,b,w;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yt(t.config.authDomain,t,"auth-domain-config-required"),Yt(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:mt,eventId:a},n instanceof Br)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",le(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(o||{});c<l.length;c++)f=u(l[c],2),h=f[0],d=f[1],s[h]=d;for(n instanceof qr&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,y=Object.keys(v);m<y.length;m++)k=y[m],void 0===v[k]&&delete v[k];return e.next=10,t._getAppCheckToken();case 10:return b=e.sent,w=b?"#".concat(Ma,"=").concat(encodeURIComponent(b)):"",e.abrupt("return","".concat(Ua(t),"?").concat(pe(v).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Ua(e){var t=e.config;return t.emulator?rn(t,La):"https://".concat(t.authDomain,"/").concat(Oa)}var Va="webStorageSupport",za=function(){function e(){w(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=di,this._completeRedirectFn=ua,this._overrideRedirectResult=aa}return E(e,[{key:"_openPopup",value:function(){var e=b(g().mark((function e(t,n,r,i){var a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Fa(t,n,r,Xt(),i);case 3:return o=e.sent,e.abrupt("return",Da(t,o,mi()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=b(g().mark((function e(t,n,r,i){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Fa(t,n,r,Xt(),i);case 4:return ki(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):($t(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na(t);case 2:return n=e.sent,r=new la(t),n.register("authEvent",(function(e){return Yt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Va,{type:Va},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Va];void 0!==i&&t(!!i),Ht(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ya.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return nr()||Qn()||er()}}]),e}(),Ba=za,qa=function(){function e(t){w(this,e),this.factorId=t}return E(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Jt("unexpected MultiFactorSessionType")}}}]),e}(),Ha=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this,"phone")).credential=e,r}return E(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return cn(e,"POST","/v2/accounts/mfaEnrollment:finalize",un(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return cn(e,"POST","/v2/accounts/mfaSignIn:finalize",un(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(qa);(function(){function e(){w(this,e)}return E(e,null,[{key:"assertion",value:function(e){return Ha._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Wa=function(){function e(){w(this,e)}return E(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Ka._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Ka._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yt("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,oi(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",Ga._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Wa.FACTOR_ID="totp";var Ka=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return E(n,[{key:"_finalizeEnroll",value:function(){var e=b(g().mark((function e(t,n,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yt("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",si(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=b(g().mark((function e(t,n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yt(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Ui(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(qa),Ga=function(){function e(t,n,r,i,a,o,s){w(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return E(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Qa(e)||Qa(t))&&(r=!0),r&&(Qa(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Qa(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Qa(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Ya="@firebase/auth",Ja="0.23.2",$a=function(){function e(t){w(this,e),this.auth=t,this.internalListeners=new Map}return E(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Xa,Za=Q("authIdTokenMaxAge")||300,eo=null;function to(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function no(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}Xa="Browser",ft(new xe("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;Yt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:Xa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rr(Xa)},l=new pr(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),ft(new xe("auth-internal",(function(e){return function(e){return new $a(e)}(vr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),kt(Ya,Ja,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Xa)),kt(Ya,Ja,"esm2017");var ro=function(){return ro=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ro.apply(this,arguments)},io=function(e){return{loading:void 0===e||null===e,value:e}},ao=function(t){var n=t?t():void 0,r=(0,e.useReducer)((function(e,t){switch(t.type){case"error":return ro(ro({},e),{error:t.error,loading:!1,value:void 0});case"reset":return io(t.defaultValue);case"value":return ro(ro({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),io(n)),i=r[0],a=r[1],o=(0,e.useCallback)((function(){var e=t?t():void 0;a({type:"reset",defaultValue:e})}),[t]),s=(0,e.useCallback)((function(e){a({type:"error",error:e})}),[]),u=(0,e.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,e.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:s,setValue:u,value:i.value}}),[i.error,i.loading,o,s,u,i.value])},oo=function(t,n){var r=ao((function(){return t.currentUser})),i=r.error,a=r.loading,o=r.setError,s=r.setValue,u=r.value;return(0,e.useEffect)((function(){var e=ii(t,(function(e){return to(void 0,void 0,void 0,(function(){var t;return no(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return s(e),[2]}}))}))}),o);return function(){e()}}),[t]),[u,a,i]};kt("firebase","9.22.2","app");var so,uo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},co={},lo=lo||{},fo=uo||self;function ho(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function po(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var vo="closure_uid_"+(1e9*Math.random()>>>0),mo=0;function yo(e,t,n){return e.call.apply(e.bind,arguments)}function go(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ko(e,t,n){return(ko=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yo:go).apply(null,arguments)}function bo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function wo(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function _o(){this.s=this.s,this.o=this.o}_o.prototype.s=!1,_o.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,vo)&&e[vo]||(e[vo]=++mo))},_o.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var xo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Eo(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function So(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(ho(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Co(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Co.prototype.h=function(){this.defaultPrevented=!0};var To=function(){if(!fo.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{fo.addEventListener("test",(function(){}),t),fo.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Io(e){return/^[\s\xa0]*$/.test(e)}function No(){var e=fo.navigator;return e&&(e=e.userAgent)?e:""}function Ao(e){return-1!=No().indexOf(e)}function Ro(e){return Ro[" "](e),e}Ro[" "]=function(){};var Po,Do,Oo=Ao("Opera"),Lo=Ao("Trident")||Ao("MSIE"),Mo=Ao("Edge"),Fo=Mo||Lo,jo=Ao("Gecko")&&!(-1!=No().toLowerCase().indexOf("webkit")&&!Ao("Edge"))&&!(Ao("Trident")||Ao("MSIE"))&&!Ao("Edge"),Uo=-1!=No().toLowerCase().indexOf("webkit")&&!Ao("Edge");function Vo(){var e=fo.document;return e?e.documentMode:void 0}e:{var zo="",Bo=function(){var e=No();return jo?/rv:([^\);]+)(\)|;)/.exec(e):Mo?/Edge\/([\d\.]+)/.exec(e):Lo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Uo?/WebKit\/(\S+)/.exec(e):Oo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Bo&&(zo=Bo?Bo[1]:""),Lo){var qo=Vo();if(null!=qo&&qo>parseFloat(zo)){Po=String(qo);break e}}Po=zo}if(fo.document&&Lo){var Ho=Vo();Do=Ho||(parseInt(Po,10)||void 0)}else Do=void 0;var Wo=Do;function Ko(e,t){if(Co.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(jo){e:{try{Ro(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Go[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ko.$.h.call(this)}}wo(Ko,Co);var Go={2:"touch",3:"pen",4:"mouse"};Ko.prototype.h=function(){Ko.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Qo="closure_listenable_"+(1e6*Math.random()|0),Yo=0;function Jo(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Yo,this.fa=this.ia=!1}function $o(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Xo(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Zo(e){var t={};for(var n in e)t[n]=e[n];return t}var es="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ts(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<es.length;a++)n=es[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ns(e){this.src=e,this.g={},this.h=0}function rs(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=xo(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($o(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function is(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}ns.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=is(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Jo(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var as="closure_lm_"+(1e6*Math.random()|0),os={};function ss(e,t,n,r,i){if(r&&r.once)return cs(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ss(e,t[a],n,r,i);return null}return n=ms(n),e&&e[Qo]?e.O(t,n,po(r)?!!r.capture:!!r,i):us(e,t,n,!1,r,i)}function us(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=po(i)?!!i.capture:!!i,s=ps(e);if(s||(e[as]=s=new ns(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ds;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)To||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hs(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function cs(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)cs(e,t[a],n,r,i);return null}return n=ms(n),e&&e[Qo]?e.P(t,n,po(r)?!!r.capture:!!r,i):us(e,t,n,!0,r,i)}function ls(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ls(e,t[a],n,r,i);else r=po(r)?!!r.capture:!!r,n=ms(n),e&&e[Qo]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=is(a=e.g[t],n,r,i))&&($o(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ps(e))&&(t=e.g[t.toString()],e=-1,t&&(e=is(t,n,r,i)),(n=-1<e?t[e]:null)&&fs(n))}function fs(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Qo])rs(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hs(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ps(t))?(rs(n,e),0==n.h&&(n.src=null,t[as]=null)):$o(e)}}}function hs(e){return e in os?os[e]:os[e]="on"+e}function ds(e,t){if(e.fa)e=!0;else{t=new Ko(t,this);var n=e.listener,r=e.la||e.src;e.ia&&fs(e),e=n.call(r,t)}return e}function ps(e){return(e=e[as])instanceof ns?e:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ms(e){return"function"===typeof e?e:(e[vs]||(e[vs]=function(t){return e.handleEvent(t)}),e[vs])}function ys(){_o.call(this),this.i=new ns(this),this.S=this,this.J=null}function gs(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Co(t,e);else if(t instanceof Co)t.target=t.target||e;else{var i=t;ts(t=new Co(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ks(o,r,!0,t)&&i}if(i=ks(o=t.g=e,r,!0,t)&&i,i=ks(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ks(o=t.g=n[a],r,!1,t)&&i}function ks(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&rs(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}wo(ys,_o),ys.prototype[Qo]=!0,ys.prototype.removeEventListener=function(e,t,n,r){ls(this,e,t,n,r)},ys.prototype.N=function(){if(ys.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$o(n[r]);delete t.g[e],t.h--}}this.J=null},ys.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ys.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var bs=fo.JSON.stringify,ws=function(){function e(t,n){w(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return E(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function _s(){var e=As,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var xs=function(){function e(){w(this,e),this.h=this.g=null}return E(e,[{key:"add",value:function(e,t){var n=Es.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Es=new ws((function(){return new Ss}),(function(e){return e.reset()})),Ss=function(){function e(){w(this,e),this.next=this.g=this.h=null}return E(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Cs(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ts(e){fo.setTimeout((function(){throw e}),0)}var Is,Ns=!1,As=new xs,Rs=function(){var e=fo.Promise.resolve(void 0);Is=function(){e.then(Ps)}},Ps=function(){for(var e;e=_s();){try{e.h.call(e.g)}catch(n){Ts(n)}var t=Es;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ns=!1};function Ds(e,t){ys.call(this),this.h=e||1,this.g=t||fo,this.j=ko(this.qb,this),this.l=Date.now()}function Os(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ls(e,t,n){if("function"===typeof e)n&&(e=ko(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ko(e.handleEvent,e)}return 2147483647<Number(t)?-1:fo.setTimeout(e,t||0)}function Ms(e){e.g=Ls((function(){e.g=null,e.i&&(e.i=!1,Ms(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}wo(Ds,ys),(so=Ds.prototype).ga=!1,so.T=null,so.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),gs(this,"tick"),this.ga&&(Os(this),this.start()))}},so.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},so.N=function(){Ds.$.N.call(this),Os(this),delete this.g};var Fs=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return E(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ms(this)}},{key:"N",value:function(){l(c(n.prototype),"N",this).call(this),this.g&&(fo.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(_o);function js(e){_o.call(this),this.h=e,this.g={}}wo(js,_o);var Us=[];function Vs(e,t,n,r){Array.isArray(n)||(n&&(Us[0]=n.toString()),n=Us);for(var i=0;i<n.length;i++){var a=ss(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function zs(e){Xo(e.g,(function(e,t){this.g.hasOwnProperty(t)&&fs(e)}),e),e.g={}}function Bs(){this.g=!0}function qs(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return bs(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}js.prototype.N=function(){js.$.N.call(this),zs(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bs.prototype.Ea=function(){this.g=!1},Bs.prototype.info=function(){};var Hs={},Ws=null;function Ks(){return Ws=Ws||new ys}function Gs(e){Co.call(this,Hs.Ta,e)}function Qs(e){var t=Ks();gs(t,new Gs(t))}function Ys(e,t){Co.call(this,Hs.STAT_EVENT,e),this.stat=t}function Js(e){var t=Ks();gs(t,new Ys(t,e))}function $s(e,t){Co.call(this,Hs.Ua,e),this.size=t}function Xs(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return fo.setTimeout((function(){e()}),t)}Hs.Ta="serverreachability",wo(Gs,Co),Hs.STAT_EVENT="statevent",wo(Ys,Co),Hs.Ua="timingevent",wo($s,Co);var Zs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tu(){}function nu(e){return e.h||(e.h=e.i())}function ru(){}tu.prototype.h=null;var iu,au={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ou(){Co.call(this,"d")}function su(){Co.call(this,"c")}function uu(){}function cu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new js(this),this.P=fu,e=Fo?125:void 0,this.V=new Ds(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new lu}function lu(){this.i=null,this.g="",this.h=!1}wo(ou,Co),wo(su,Co),wo(uu,tu),uu.prototype.g=function(){return new XMLHttpRequest},uu.prototype.i=function(){return{}},iu=new uu;var fu=45e3,hu={},du={};function pu(e,t,n){e.L=1,e.v=Du(Iu(t)),e.s=n,e.S=!0,vu(e,null)}function vu(e,t){e.G=Date.now(),ku(e),e.A=Iu(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ku(n.i,"t",r),e.C=0,n=e.l.J,e.h=new lu,e.g=Gc(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Fs(ko(e.Pa,e,e.g),e.O)),Vs(e.U,e.g,"readystatechange",e.nb),t=e.I?Zo(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Qs(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function mu(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function yu(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=gu(e,n))==du){4==t&&(e.o=4,Js(14),i=!1),qs(e.j,e.m,null,"[Incomplete Response]");break}if(r==hu){e.o=4,Js(15),qs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}qs(e.j,e.m,r,null),Eu(e,r)}mu(e)&&r!=du&&r!=hu&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Js(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Uc(t),t.M=!0,Js(11))):(qs(e.j,e.m,n,"[Invalid Chunked Response]"),xu(e),_u(e))}function gu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?du:(n=Number(t.substring(n,r)),isNaN(n)?hu:(r+=1)+n>t.length?du:(t=t.slice(r,r+n),e.C=r+n,t))}function ku(e){e.Y=Date.now()+e.P,bu(e,e.P)}function bu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Xs(ko(e.lb,e),t)}function wu(e){e.B&&(fo.clearTimeout(e.B),e.B=null)}function _u(e){0==e.l.H||e.J||Bc(e.l,e)}function xu(e){wu(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Os(e.V),zs(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Eu(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Zu(n.i,e)))if(!e.K&&Zu(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;zc(n),Rc(n)}jc(n),Js(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Xs(ko(n.ib,n),6e3));if(1>=Xu(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Hc(n,11)}else if((e.K||n.g==e)&&zc(n),!Io(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(ec(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Pu(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Kc(r,r.J?r.pa:null,r.Y),d.K){tc(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(wu(p),ku(p)),r.g=d}else Fc(r);0<n.j.length&&Dc(n)}else"stop"!=a[0]&&"close"!=a[0]||Hc(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Hc(n,7):Ac(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Qs()}catch(a){}}function Su(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ho(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ho(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ho(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(so=cu.prototype).setTimeout=function(e){this.P=e},so.nb=function(e){e=e.target;var t=this.M;t&&3==Ec(e)?t.l():this.Pa(e)},so.Pa=function(e){try{if(e==this.g)e:{var t=Ec(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Fo||this.g&&(this.h.h||this.g.ja()||Sc(this.g)))){this.J||4!=t||7==n||Qs(),wu(this);var r=this.g.da();this.ca=r;t:if(mu(this)){var i=Sc(this.g);e="";var a=i.length,o=4==Ec(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){xu(this),_u(this);var s="";break t}this.h.i=new fo.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Io(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Js(12),xu(this),_u(this);break e}qs(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eu(this,r)}this.S?(yu(this,t,s),Fo&&this.i&&3==t&&(Vs(this.U,this.V,"tick",this.mb),this.V.start())):(qs(this.j,this.m,s,null),Eu(this,s)),4==t&&xu(this),this.i&&!this.J&&(4==t?Bc(this.l,this):(this.i=!1,ku(this)))}else(function(e){var t={};e=(e.g&&2<=Ec(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Io(e[n])){var r=Cs(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Js(12)):(this.o=0,Js(13)),xu(this),_u(this)}}}catch(t){}},so.mb=function(){if(this.g){var e=Ec(this.g),t=this.g.ja();this.C<t.length&&(wu(this),yu(this,e,t),this.i&&4!=e&&ku(this))}},so.cancel=function(){this.J=!0,xu(this)},so.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Qs(),Js(17)),xu(this),this.o=2,_u(this)):bu(this,this.Y-e)};var Cu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tu(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Tu){this.h=e.h,Nu(this,e.j),this.s=e.s,this.g=e.g,Au(this,e.m),this.l=e.l;var t=e.i,n=new Bu;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ru(this,n),this.o=e.o}else e&&(t=String(e).match(Cu))?(this.h=!1,Nu(this,t[1]||"",!0),this.s=Ou(t[2]||""),this.g=Ou(t[3]||"",!0),Au(this,t[4]),this.l=Ou(t[5]||"",!0),Ru(this,t[6]||"",!0),this.o=Ou(t[7]||"")):(this.h=!1,this.i=new Bu(null,this.h))}function Iu(e){return new Tu(e)}function Nu(e,t,n){e.j=n?Ou(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Au(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ru(e,t,n){t instanceof Bu?(e.i=t,function(e,t){t&&!e.j&&(qu(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Hu(this,t),Ku(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Lu(t,Vu)),e.i=new Bu(t,e.h))}function Pu(e,t,n){e.i.set(t,n)}function Du(e){return Pu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ou(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Lu(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Mu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Mu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Lu(t,Fu,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Lu(t,Fu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Lu(n,"/"==n.charAt(0)?Uu:ju,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Lu(n,zu)),e.join("")};var Fu=/[#\/\?@]/g,ju=/[#\?:]/g,Uu=/[#\?]/g,Vu=/[#\?@]/g,zu=/#/g;function Bu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function qu(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Hu(e,t){qu(e),t=Gu(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Wu(e,t){return qu(e),t=Gu(e,t),e.g.has(t)}function Ku(e,t,n){Hu(e,t),0<n.length&&(e.i=null,e.g.set(Gu(e,t),Eo(n)),e.h+=n.length)}function Gu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(so=Bu.prototype).add=function(e,t){qu(this),this.i=null,e=Gu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},so.forEach=function(e,t){qu(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},so.ta=function(){qu(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},so.Z=function(e){qu(this);var t=[];if("string"===typeof e)Wu(this,e)&&(t=t.concat(this.g.get(Gu(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},so.set=function(e,t){return qu(this),this.i=null,Wu(this,e=Gu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},so.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},so.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Qu=E((function e(t,n){w(this,e),this.g=t,this.map=n}));function Yu(e){this.l=e||Ju,fo.PerformanceNavigationTiming?e=0<(e=fo.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(fo.g&&fo.g.Ka&&fo.g.Ka()&&fo.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ju=10;function $u(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xu(e){return e.h?1:e.g?e.g.size:0}function Zu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ec(e,t){e.g?e.g.add(t):e.h=t}function tc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nc(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=y(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Eo(e.i)}Yu.prototype.cancel=function(){if(this.i=nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=y(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var rc,ic=function(){function e(){w(this,e)}return E(e,[{key:"stringify",value:function(e){return fo.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return fo.JSON.parse(e,void 0)}}]),e}();function ac(){this.g=new ic}function oc(e,t,n){var r=n||"";try{Su(e,(function(e,n){var i=e;po(e)&&(i=bs(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function uc(e){this.l=e.fc||null,this.j=e.ob||!1}function cc(e,t){ys.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=lc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wo(uc,tu),uc.prototype.g=function(){return new cc(this.l,this.j)},uc.prototype.i=(rc={},function(){return rc}),wo(cc,ys);var lc=0;function fc(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function hc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dc(e)}function dc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(so=cc.prototype).open=function(e,t){if(this.readyState!=lc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dc(this)},so.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||fo).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},so.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hc(this)),this.readyState=lc},so.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dc(this)),this.g&&(this.readyState=3,dc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof fo.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fc(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},so.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hc(this):dc(this),3==this.readyState&&fc(this)}},so.Za=function(e){this.g&&(this.response=this.responseText=e,hc(this))},so.Ya=function(e){this.g&&(this.response=e,hc(this))},so.ka=function(){this.g&&hc(this)},so.setRequestHeader=function(e,t){this.v.append(e,t)},so.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},so.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(cc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var pc=fo.JSON.parse;function vc(e){ys.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mc,this.L=this.M=!1}wo(vc,ys);var mc="",yc=/^https?$/i,gc=["POST","PUT"];function kc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,bc(e),_c(e)}function bc(e){e.F||(e.F=!0,gs(e,"complete"),gs(e,"error"))}function wc(e){if(e.h&&"undefined"!=typeof lo&&(!e.C[1]||4!=Ec(e)||2!=e.da()))if(e.v&&4==Ec(e))Ls(e.La,0,e);else if(gs(e,"readystatechange"),4==Ec(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Cu)[1]||null;!a&&fo.self&&fo.self.location&&(a=fo.self.location.protocol.slice(0,-1)),i=!yc.test(a?a.toLowerCase():"")}t=i}if(t)gs(e,"complete"),gs(e,"success");else{e.m=6;try{var o=2<Ec(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",bc(e)}}finally{_c(e)}}}function _c(e,t){if(e.g){xc(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||gs(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function xc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(fo.clearTimeout(e.A),e.A=null)}function Ec(e){return e.g?e.g.readyState:0}function Sc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case mc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Al){return null}}function Cc(e){var t="";return Xo(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Tc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Cc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pu(e,t,n))}function Ic(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Nc(e){this.Ga=0,this.j=[],this.l=new Bs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ic("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ic("baseRetryDelayMs",5e3,e),this.hb=Ic("retryDelaySeedMs",1e4,e),this.eb=Ic("forwardChannelMaxRetries",2,e),this.xa=Ic("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Yu(e&&e.concurrentRequestLimit),this.Ja=new ac,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ac(e){if(Pc(e),3==e.H){var t=e.W++,n=Iu(e.I);if(Pu(n,"SID",e.K),Pu(n,"RID",t),Pu(n,"TYPE","terminate"),Lc(e,n),(t=new cu(e,e.l,t)).L=2,t.v=Du(Iu(n)),n=!1,fo.navigator&&fo.navigator.sendBeacon)try{n=fo.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&fo.Image&&((new Image).src=t.v,n=!0),n||(t.g=Gc(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ku(t)}Wc(e)}function Rc(e){e.g&&(Uc(e),e.g.cancel(),e.g=null)}function Pc(e){Rc(e),e.u&&(fo.clearTimeout(e.u),e.u=null),zc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&fo.clearTimeout(e.m),e.m=null)}function Dc(e){if(!$u(e.i)&&!e.m){e.m=!0;var t=e.Na;Is||Rs(),Ns||(Is(),Ns=!0),As.add(t,e),e.C=0}}function Oc(e,t){var n;n=t?t.m:e.W++;var r=Iu(e.I);Pu(r,"SID",e.K),Pu(r,"RID",n),Pu(r,"AID",e.V),Lc(e,r),e.o&&e.s&&Tc(r,e.o,e.s),n=new cu(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Mc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ec(e.i,n),pu(n,r,t)}function Lc(e,t){e.na&&Xo(e.na,(function(e,n){Pu(t,n,e)})),e.h&&Su({},(function(e,n){Pu(t,n,e)}))}function Mc(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ko(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{oc(l,o,"req"+c+"_")}catch(zl){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Fc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Is||Rs(),Ns||(Is(),Ns=!0),As.add(t,e),e.A=0}}function jc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Xs(ko(e.Ma,e),qc(e,e.A)),e.A++,!0)}function Uc(e){null!=e.B&&(fo.clearTimeout(e.B),e.B=null)}function Vc(e){e.g=new cu(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Iu(e.wa);Pu(t,"RID","rpc"),Pu(t,"SID",e.K),Pu(t,"AID",e.V),Pu(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Pu(t,"TO",e.qa),Pu(t,"TYPE","xmlhttp"),Lc(e,t),e.o&&e.s&&Tc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Du(Iu(t)),n.s=null,n.S=!0,vu(n,e)}function zc(e){null!=e.v&&(fo.clearTimeout(e.v),e.v=null)}function Bc(e,t){var n=null;if(e.g==t){zc(e),Uc(e),e.g=null;var r=2}else{if(!Zu(e.i,t))return;n=t.F,tc(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;gs(r=Ks(),new $s(r,n)),Dc(e)}else Fc(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Xu(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Xs(ko(e.Na,e,t),qc(e,e.C)),e.C++,!0))}(e,t)||2==r&&jc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Hc(e,5);break;case 4:Hc(e,10);break;case 3:Hc(e,6);break;default:Hc(e,2)}}function qc(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Hc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ko(e.pb,e);n||(n=new Tu("//www.google.com/images/cleardot.gif"),fo.location&&"http"==fo.location.protocol||Nu(n,"https"),Du(n)),function(e,t){var n=new Bs;if(fo.Image){var r=new Image;r.onload=bo(sc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=bo(sc,n,r,"TestLoadImage: error",!1,t),r.onabort=bo(sc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=bo(sc,n,r,"TestLoadImage: timeout",!1,t),fo.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Js(2);e.H=0,e.h&&e.h.za(t),Wc(e),Pc(e)}function Wc(e){if(e.H=0,e.ma=[],e.h){var t=nc(e.i);0==t.length&&0==e.j.length||(So(e.ma,t),So(e.ma,e.j),e.i.i.length=0,Eo(e.j),e.j.length=0),e.h.ya()}}function Kc(e,t,n){var r=n instanceof Tu?Iu(n):new Tu(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Au(r,r.m);else{var i=fo.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Tu(null);r&&Nu(a,r),t&&(a.g=t),i&&Au(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Pu(r,n,t),Pu(r,"VER",e.ra),Lc(e,r),r}function Gc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new vc(new uc({ob:!0})):new vc(e.va)).Oa(e.J),t}function Qc(){}function Yc(){if(Lo&&!(10<=Number(Wo)))throw Error("Environmental error: no available transport.")}function Jc(e,t){ys.call(this),this.g=new Nc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Io(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Io(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Zc(this)}function $c(e){ou.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Xc(){su.call(this),this.status=1}function Zc(e){this.g=e}function el(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function tl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function nl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(so=vc.prototype).Oa=function(e){this.M=e},so.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iu.g(),this.C=this.u?nu(this.u):nu(iu),this.g.onreadystatechange=ko(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void kc(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=y(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=fo.FormData&&e instanceof fo.FormData,!(0<=xo(gc,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=y(n);try{for(l.s();!(c=l.n()).done;){var f=u(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xc(this),0<this.B&&((this.L=function(e){return Lo&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ko(this.ua,this)):this.A=Ls(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){kc(this,s)}},so.ua=function(){"undefined"!=typeof lo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gs(this,"timeout"),this.abort(8))},so.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,gs(this,"complete"),gs(this,"abort"),_c(this))},so.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_c(this,!0)),vc.$.N.call(this)},so.La=function(){this.s||(this.G||this.v||this.l?wc(this):this.kb())},so.kb=function(){wc(this)},so.isActive=function(){return!!this.g},so.da=function(){try{return 2<Ec(this)?this.g.status:-1}catch(rc){return-1}},so.ja=function(){try{return this.g?this.g.responseText:""}catch(rc){return""}},so.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),pc(t)}},so.Ia=function(){return this.m},so.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(so=Nc.prototype).ra=8,so.H=1,so.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new cu(this,this.l,e),n=this.s;if(this.U&&(n?ts(n=Zo(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Mc(this,t,r),Pu(i=Iu(this.I),"RID",e),Pu(i,"CVER",22),this.F&&Pu(i,"X-HTTP-Session-Id",this.F),Lc(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Cc(n)))+"&"+r:this.o&&Tc(i,this.o,n)),ec(this.i,t),this.bb&&Pu(i,"TYPE","init"),this.P?(Pu(i,"$req",r),Pu(i,"SID","null"),t.aa=!0,pu(t,i,null)):pu(t,i,r),this.H=2}}else 3==this.H&&(e?Oc(this,e):0==this.j.length||$u(this.i)||Oc(this))},so.Ma=function(){if(this.u=null,Vc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Xs(ko(this.jb,this),e)}},so.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Js(10),Rc(this),Vc(this))},so.ib=function(){null!=this.v&&(this.v=null,Rc(this),jc(this),Js(19))},so.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Js(2)):(this.l.info("Failed to ping google.com"),Js(1))},so.isActive=function(){return!!this.h&&this.h.isActive(this)},(so=Qc.prototype).Ba=function(){},so.Aa=function(){},so.za=function(){},so.ya=function(){},so.isActive=function(){return!0},so.Va=function(){},Yc.prototype.g=function(e,t){return new Jc(e,t)},wo(Jc,ys),Jc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Js(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Kc(e,null,e.Y),Dc(e)},Jc.prototype.close=function(){Ac(this.g)},Jc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=bs(e),e=n);t.j.push(new Qu(t.fb++,e)),3==t.H&&Dc(t)},Jc.prototype.N=function(){this.g.h=null,delete this.j,Ac(this.g),delete this.g,Jc.$.N.call(this)},wo($c,ou),wo(Xc,su),wo(Zc,Qc),Zc.prototype.Ba=function(){gs(this.g,"a")},Zc.prototype.Aa=function(e){gs(this.g,new $c(e))},Zc.prototype.za=function(e){gs(this.g,new Xc)},Zc.prototype.ya=function(){gs(this.g,"b")},wo(el,(function(){this.blockSize=-1})),el.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},el.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)tl(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){tl(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){tl(this,r),i=0;break}}this.h=i,this.i+=t},el.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var rl={};function il(e){return-128<=e&&128>e?function(e,t){var n=rl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new nl([0|e],0>e?-1:0)})):new nl([0|e],0>e?-1:0)}function al(e){if(isNaN(e)||!isFinite(e))return sl;if(0>e)return hl(al(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ol;return new nl(t,0)}var ol=4294967296,sl=il(0),ul=il(1),cl=il(16777216);function ll(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function fl(e){return-1==e.h}function hl(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new nl(n,~e.h).add(ul)}function dl(e,t){return e.add(hl(t))}function pl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function vl(e,t){this.g=e,this.h=t}function ml(e,t){if(ll(t))throw Error("division by zero");if(ll(e))return new vl(sl,sl);if(fl(e))return t=ml(hl(e),t),new vl(hl(t.g),hl(t.h));if(fl(t))return t=ml(e,hl(t)),new vl(hl(t.g),t.h);if(30<e.g.length){if(fl(e)||fl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ul,r=t;0>=r.X(e);)n=yl(n),r=yl(r);var i=gl(n,1),a=gl(r,1);for(r=gl(r,2),n=gl(n,2);!ll(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=gl(r,1),n=gl(n,1)}return t=dl(e,i.R(t)),new vl(i,t)}for(i=sl;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=al(n)).R(t);fl(o)||0<o.X(e);)o=(a=al(n-=r)).R(t);ll(a)&&(a=ul),i=i.add(a),e=dl(e,o)}return new vl(i,e)}function yl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new nl(n,e.h)}function gl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new nl(i,e.h)}(so=nl.prototype).ea=function(){if(fl(this))return-hl(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ol+r)*t,t*=ol}return e},so.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ll(this))return"0";if(fl(this))return"-"+hl(this).toString(e);for(var t=al(Math.pow(e,6)),n=this,r="";;){var i=ml(n,t).g,a=((0<(n=dl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ll(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},so.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},so.X=function(e){return fl(e=dl(this,e))?-1:ll(e)?0:1},so.abs=function(){return fl(this)?hl(this):this},so.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new nl(n,-2147483648&n[n.length-1]?-1:0)},so.R=function(e){if(ll(this)||ll(e))return sl;if(fl(this))return fl(e)?hl(this).R(hl(e)):hl(hl(this).R(e));if(fl(e))return hl(this.R(hl(e)));if(0>this.X(cl)&&0>e.X(cl))return al(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,pl(n,2*r+2*i),n[2*r+2*i+1]+=a*u,pl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,pl(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,pl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new nl(n,0)},so.gb=function(e){return ml(this,e).h},so.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new nl(n,this.h&e.h)},so.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new nl(n,this.h|e.h)},so.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new nl(n,this.h^e.h)},Yc.prototype.createWebChannel=Yc.prototype.g,Jc.prototype.send=Jc.prototype.u,Jc.prototype.open=Jc.prototype.m,Jc.prototype.close=Jc.prototype.close,Zs.NO_ERROR=0,Zs.TIMEOUT=8,Zs.HTTP_ERROR=6,eu.COMPLETE="complete",ru.EventType=au,au.OPEN="a",au.CLOSE="b",au.ERROR="c",au.MESSAGE="d",ys.prototype.listen=ys.prototype.O,vc.prototype.listenOnce=vc.prototype.P,vc.prototype.getLastError=vc.prototype.Sa,vc.prototype.getLastErrorCode=vc.prototype.Ia,vc.prototype.getStatus=vc.prototype.da,vc.prototype.getResponseJson=vc.prototype.Wa,vc.prototype.getResponseText=vc.prototype.ja,vc.prototype.send=vc.prototype.ha,vc.prototype.setWithCredentials=vc.prototype.Oa,el.prototype.digest=el.prototype.l,el.prototype.reset=el.prototype.reset,el.prototype.update=el.prototype.j,nl.prototype.add=nl.prototype.add,nl.prototype.multiply=nl.prototype.R,nl.prototype.modulo=nl.prototype.gb,nl.prototype.compare=nl.prototype.X,nl.prototype.toNumber=nl.prototype.ea,nl.prototype.toString=nl.prototype.toString,nl.prototype.getBits=nl.prototype.D,nl.fromNumber=al,nl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return hl(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=al(Math.pow(n,8)),i=sl,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=al(Math.pow(n,o)),i=i.R(o).add(al(s))):i=(i=i.R(r)).add(al(s))}return i};var kl=co.createWebChannelTransport=function(){return new Yc},bl=co.getStatEventTarget=function(){return Ks()},wl=co.ErrorCode=Zs,_l=co.EventType=eu,xl=co.Event=Hs,El=co.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sl=co.FetchXmlHttpFactory=uc,Cl=co.WebChannel=ru,Tl=co.XhrIo=vc,Il=co.Md5=el,Nl=co.Integer=nl,Al="@firebase/firestore",Rl=function(){function e(t){w(this,e),this.uid=t}return E(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Rl.UNAUTHENTICATED=new Rl(null),Rl.GOOGLE_CREDENTIALS=new Rl("google-credentials-uid"),Rl.FIRST_PARTY=new Rl("first-party-uid"),Rl.MOCK_USER=new Rl("mock-user");var Pl="9.22.2",Dl=new Oe("@firebase/firestore");function Ol(){return Dl.logLevel}function Ll(e){if(Dl.logLevel<=Te.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(jl);Dl.debug.apply(Dl,["Firestore (".concat(Pl,"): ").concat(e)].concat(C(i)))}}function Ml(e){if(Dl.logLevel<=Te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(jl);Dl.error.apply(Dl,["Firestore (".concat(Pl,"): ").concat(e)].concat(C(i)))}}function Fl(e){if(Dl.logLevel<=Te.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(jl);Dl.warn.apply(Dl,["Firestore (".concat(Pl,"): ").concat(e)].concat(C(i)))}}function jl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ul(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Pl,") INTERNAL ASSERTION FAILED: ")+e;throw Ml(t),new Error(t)}function Vl(e,t){e||Ul()}function zl(e,t){return e}var Bl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ql=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return E(n)}(ne),Hl=E((function e(){var t=this;w(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Wl=E((function e(t,n){w(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Kl=function(){function e(){w(this,e)}return E(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Rl.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Gl=function(){function e(t){w(this,e),this.token=t,this.changeListener=null}return E(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ql=function(){function e(t){w(this,e),this.t=t,this.currentUser=Rl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Hl;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Hl,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Ll("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Ll("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Hl)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ll("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Vl("string"==typeof n.accessToken),new Wl(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Vl(null===e||"string"==typeof e),new Rl(e)}}]),e}(),Yl=function(){function e(t,n,r){w(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Rl.FIRST_PARTY,this.g=new Map}return E(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Jl=function(){function e(t,n,r){w(this,e),this.h=t,this.l=n,this.m=r}return E(e,[{key:"getToken",value:function(){return Promise.resolve(new Yl(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Rl.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),$l=E((function e(t){w(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Xl=function(){function e(t){w(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ll("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Ll("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ll("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Ll("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Vl("string"==typeof t.token),e.T=t.token,new $l(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Zl(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ef=function(){function e(){w(this,e)}return E(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Zl(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function tf(e,t){return e<t?-1:e>t?1:0}function nf(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var rf=function(){function e(t,n){if(w(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ql(Bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ql(Bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ql(Bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ql(Bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return E(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?tf(this.nanoseconds,e.nanoseconds):tf(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),af=function(){function e(t){w(this,e),this.timestamp=t}return E(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new rf(0,0))}},{key:"max",value:function(){return new e(new rf(253402300799,999999999))}}]),e}(),of=function(){function e(t,n,r){w(this,e),void 0===n?n=0:n>t.length&&Ul(),void 0===r?r=t.length-n:r>t.length-n&&Ul(),this.segments=t,this.offset=n,this.len=r}return E(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),sf=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new ql(Bl.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,C(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(of),uf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cf=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return uf.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ql(Bl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new ql(Bl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ql(Bl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new ql(Bl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(of),lf=function(){function e(t){w(this,e),this.path=t}return E(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===sf.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(sf.fromString(t))}},{key:"fromName",value:function(t){return new e(sf.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(sf.emptyPath())}},{key:"comparator",value:function(e,t){return sf.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new sf(t.slice()))}}]),e}(),ff=E((function e(t,n,r,i){w(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));ff.UNKNOWN_ID=-1;function hf(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=af.fromTimestamp(1e9===r?new rf(n+1,0):new rf(n,r));return new pf(i,lf.empty(),t)}function df(e){return new pf(e.readTime,e.key,-1)}var pf=function(){function e(t,n,r){w(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return E(e,null,[{key:"min",value:function(){return new e(af.min(),lf.empty(),-1)}},{key:"max",value:function(){return new e(af.max(),lf.empty(),-1)}}]),e}();function vf(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=lf.comparator(e.documentKey,t.documentKey))?n:tf(e.largestBatchId,t.largestBatchId)}var mf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yf=function(){function e(){w(this,e),this.onCommittedListeners=[]}return E(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function gf(e){return kf.apply(this,arguments)}function kf(){return(kf=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Bl.FAILED_PRECONDITION&&t.message===mf){e.next=2;break}throw t;case 2:Ll("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bf=function(){function e(t){var n=this;w(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return E(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ul(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=y(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function wf(e){return"IndexedDbTransactionError"===e.name}var _f=function(){function e(t,n){var r=this;w(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return E(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function xf(e){return null==e}function Ef(e){return 0===e&&1/e==-1/0}function Sf(e){return"number"==typeof e&&Number.isInteger(e)&&!Ef(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}_f.ct=-1;var Cf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Tf=([].concat(C(Cf),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),If=Tf;[].concat(If,["indexConfiguration","indexState","indexEntries"]);function Nf(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Af(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rf(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Pf=function(){function e(t,n){w(this,e),this.comparator=t,this.root=n||Of.EMPTY}return E(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Of.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Of.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Df(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Df(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Df(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Df(this.root,e,this.comparator,!0)}}]),e}(),Df=function(){function e(t,n,r,i){w(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return E(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Of=function(){function e(t,n,r,i,a){w(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return E(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ul();if(this.right.isRed())throw Ul();var e=this.left.check();if(e!==this.right.check())throw Ul();return e+(this.isRed()?0:1)}}]),e}();Of.EMPTY=null,Of.RED=!0,Of.BLACK=!1,Of.EMPTY=new(function(){function e(){w(this,e),this.size=0}return E(e,[{key:"key",get:function(){throw Ul()}},{key:"value",get:function(){throw Ul()}},{key:"color",get:function(){throw Ul()}},{key:"left",get:function(){throw Ul()}},{key:"right",get:function(){throw Ul()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Of(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Lf=function(){function e(t){w(this,e),this.comparator=t,this.data=new Pf(this.comparator)}return E(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Mf(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Mf(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Mf=function(){function e(t){w(this,e),this.iter=t}return E(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Ff=function(){function e(t){w(this,e),this.fields=t,t.sort(cf.comparator)}return E(e,[{key:"unionWith",value:function(t){var n,r=new Lf(cf.comparator),i=y(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=y(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=y(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return nf(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),jf=function(e){d(n,e);var t=m(n);function n(){var e;return w(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return E(n)}(N(Error));var Uf=function(e){function t(e){w(this,t),this.binaryString=e}return E(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return tf(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new jf("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Uf.EMPTY_BYTE_STRING=new Uf("");var Vf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zf(e){if(Vl(!!e),"string"==typeof e){var t=0,n=Vf.exec(e);if(Vl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Bf(e.seconds),nanos:Bf(e.nanos)}}function Bf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qf(e){return"string"==typeof e?Uf.fromBase64String(e):Uf.fromUint8Array(e)}function Hf(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wf(e){var t=e.mapValue.fields.__previous_value__;return Hf(t)?Wf(t):t}function Kf(e){var t=zf(e.mapValue.fields.__local_write_time__.timestampValue);return new rf(t.seconds,t.nanos)}var Gf=E((function e(t,n,r,i,a,o,s,u,c){w(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),Qf=function(){function e(t,n){w(this,e),this.projectId=t,this.database=n||"(default)"}return E(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Yf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Jf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Hf(e)?4:lh(e)?9007199254740991:10:Ul()}function $f(e,t){if(e===t)return!0;var n=Jf(e);if(n!==Jf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kf(e).isEqual(Kf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=zf(e.timestampValue),r=zf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qf(e.bytesValue).isEqual(qf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bf(e.geoPointValue.latitude)===Bf(t.geoPointValue.latitude)&&Bf(e.geoPointValue.longitude)===Bf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bf(e.integerValue)===Bf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Bf(e.doubleValue),r=Bf(t.doubleValue);return n===r?Ef(n)===Ef(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return nf(e.arrayValue.values||[],t.arrayValue.values||[],$f);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Nf(n)!==Nf(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$f(n[i],r[i])))return!1;return!0}(e,t);default:return Ul()}}function Xf(e,t){return void 0!==(e.values||[]).find((function(e){return $f(e,t)}))}function Zf(e,t){if(e===t)return 0;var n=Jf(e),r=Jf(t);if(n!==r)return tf(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tf(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Bf(e.integerValue||e.doubleValue),r=Bf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return eh(e.timestampValue,t.timestampValue);case 4:return eh(Kf(e),Kf(t));case 5:return tf(e.stringValue,t.stringValue);case 6:return function(e,t){var n=qf(e),r=qf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=tf(n[i],r[i]);if(0!==a)return a}return tf(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=tf(Bf(e.latitude),Bf(t.latitude));return 0!==n?n:tf(Bf(e.longitude),Bf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Zf(n[i],r[i]);if(a)return a}return tf(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Yf.mapValue&&t===Yf.mapValue)return 0;if(e===Yf.mapValue)return 1;if(t===Yf.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=tf(r[o],a[o]);if(0!==s)return s;var u=Zf(n[r[o]],i[a[o]]);if(0!==u)return u}return tf(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ul()}}function eh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return tf(e,t);var n=zf(e),r=zf(t),i=tf(n.seconds,r.seconds);return 0!==i?i:tf(n.nanos,r.nanos)}function th(e){return nh(e)}function nh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=zf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?qf(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,lf.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=y(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=nh(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=y(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(nh(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ul();var t,n}function rh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ih(e){return!!e&&"integerValue"in e}function ah(e){return!!e&&"arrayValue"in e}function oh(e){return!!e&&"nullValue"in e}function sh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uh(e){return!!e&&"mapValue"in e}function ch(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Af(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ch(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ch(e.arrayValue.values[r]);return n}return Object.assign({},e)}function lh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var fh=function(){function e(t){w(this,e),this.value=t}return E(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!uh(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ch(t)}},{key:"setAll",value:function(e){var t=this,n=cf.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ch(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return $f(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];uh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Af(t,(function(t,n){return e[t]=n}));var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ch(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function hh(e){var t=[];return Af(e.fields,(function(e,n){var r=new cf([e]);if(uh(n)){var i=hh(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=y(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Ff(t)}var dh=function(){function e(t,n,r,i,a,o,s){w(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return E(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(af.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=fh.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=fh.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=af.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,af.min(),af.min(),af.min(),fh.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,af.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,af.min(),af.min(),fh.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,af.min(),af.min(),fh.empty(),2)}}]),e}(),ph=E((function e(t,n){w(this,e),this.position=t,this.inclusive=n}));function vh(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?lf.comparator(lf.fromName(o.referenceValue),n.key):Zf(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function mh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!$f(e.position[n],t.position[n]))return!1;return!0}var yh=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";w(this,e),this.field=t,this.dir=n}));function gh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var kh=E((function e(){w(this,e)})),bh=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zf(t,this.value)):null!==t&&Jf(this.value)===Jf(t)&&this.matchesComparison(Zf(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ul()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ih(e,t,r):"array-contains"===t?new Ph(e,r):"in"===t?new Dh(e,r):"not-in"===t?new Oh(e,r):"array-contains-any"===t?new Lh(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Nh(e,n):new Ah(e,n)}}]),n}(kh),wh=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return E(n,[{key:"matches",value:function(e){return _h(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=y(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(kh);function _h(e){return"and"===e.op}function xh(e){return Eh(e)&&_h(e)}function Eh(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof wh)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Sh(e){if(e instanceof bh)return e.field.canonicalString()+e.op.toString()+th(e.value);if(xh(e))return e.filters.map((function(e){return Sh(e)})).join(",");var t=e.filters.map((function(e){return Sh(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ch(e,t){return e instanceof bh?function(e,t){return t instanceof bh&&e.op===t.op&&e.field.isEqual(t.field)&&$f(e.value,t.value)}(e,t):e instanceof wh?function(e,t){return t instanceof wh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ch(n,t.filters[r])}),!0)}(e,t):void Ul()}function Th(e){return e instanceof bh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(th(e.value))}(e):e instanceof wh?function(e){return e.op.toString()+" {"+e.getFilters().map(Th).join(" ,")+"}"}(e):"Filter"}var Ih=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this,e,r,i)).key=lf.fromName(i.referenceValue),a}return E(n,[{key:"matches",value:function(e){var t=lf.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(bh),Nh=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,"in",r)).keys=Rh("in",r),i}return E(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bh),Ah=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e,"not-in",r)).keys=Rh("not-in",r),i}return E(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bh);function Rh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return lf.fromName(e.referenceValue)}))}var Ph=function(e){d(n,e);var t=m(n);function n(e,r){return w(this,n),t.call(this,e,"array-contains",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ah(t)&&Xf(t.arrayValue,this.value)}}]),n}(bh),Dh=function(e){d(n,e);var t=m(n);function n(e,r){return w(this,n),t.call(this,e,"in",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Xf(this.value.arrayValue,t)}}]),n}(bh),Oh=function(e){d(n,e);var t=m(n);function n(e,r){return w(this,n),t.call(this,e,"not-in",r)}return E(n,[{key:"matches",value:function(e){if(Xf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Xf(this.value.arrayValue,t)}}]),n}(bh),Lh=function(e){d(n,e);var t=m(n);function n(e,r){return w(this,n),t.call(this,e,"array-contains-any",r)}return E(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ah(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Xf(t.value.arrayValue,e)}))}}]),n}(bh),Mh=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;w(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function Fh(e){return new Mh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function jh(e){var t=zl(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Sh(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),xf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return th(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return th(e)})).join(",")),t.dt=n}return t.dt}function Uh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!gh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ch(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mh(e.startAt,t.startAt)&&mh(e.endAt,t.endAt)}function Vh(e){return lf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var zh=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;w(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}));function Bh(e,t,n,r,i,a,o,s){return new zh(e,t,n,r,i,a,o,s)}function qh(e){return new zh(e)}function Hh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Kh(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Gh(e){return null!==e.collectionGroup}function Qh(e){var t=zl(e);if(null===t.wt){t.wt=[];var n=Kh(t),r=Wh(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new yh(n)),t.wt.push(new yh(cf.keyField(),"asc"));else{var i,a=!1,o=y(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new yh(cf.keyField(),u))}}}return t.wt}function Yh(e){var t=zl(e);if(!t._t)if("F"===t.limitType)t._t=Fh(t.path,t.collectionGroup,Qh(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=y(Qh(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new yh(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new ph(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new ph(t.startAt.position,t.startAt.inclusive):null;t._t=Fh(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function Jh(e,t){t.getFirstInequalityField(),Kh(e);var n=e.filters.concat([t]);return new zh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $h(e,t,n){return new zh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xh(e,t){return Uh(Yh(e),Yh(t))&&e.limitType===t.limitType}function Zh(e){return"".concat(jh(Yh(e)),"|lt:").concat(e.limitType)}function ed(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Th(e)})).join(", "),"]")),xf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return th(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return th(e)})).join(",")),"Target(".concat(t,")")}(Yh(e)),"; limitType=").concat(e.limitType,")")}function td(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):lf.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=y(Qh(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=y(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=vh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qh(e),t))&&!(e.endAt&&!function(e,t,n){var r=vh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qh(e),t))}(e,t)}function nd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rd(e){return function(t,n){var r,i=!1,a=y(Qh(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=id(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function id(e,t,n){var r=e.field.isKeyField()?lf.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Zf(r,i):Ul()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ul()}}var ad=function(){function e(t,n){w(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return E(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Af(this.inner,(function(t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Rf(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),od=new Pf(lf.comparator);function sd(){return od}var ud=new Pf(lf.comparator);function cd(){for(var e=ud,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ld(e){var t=ud;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function fd(){return dd()}function hd(){return dd()}function dd(){return new ad((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var pd=new Pf(lf.comparator),vd=new Lf(lf.comparator);function md(){for(var e=vd,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var yd=new Lf(tf);function gd(){return yd}function kd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ef(t)?"-0":t}}function bd(e){return{integerValue:""+e}}function wd(e,t){return Sf(t)?bd(t):kd(e,t)}var _d=E((function e(){w(this,e),this._=void 0}));function xd(e,t,n){return e instanceof Cd?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Hf(t)&&(t=Wf(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Td?Id(e,t):e instanceof Nd?Ad(e,t):function(e,t){var n=Sd(e,t),r=Pd(n)+Pd(e.gt);return ih(n)&&ih(e.gt)?bd(r):kd(e.serializer,r)}(e,t)}function Ed(e,t,n){return e instanceof Td?Id(e,t):e instanceof Nd?Ad(e,t):n}function Sd(e,t){return e instanceof Rd?ih(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Cd=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n)}(_d),Td=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this)).elements=e,r}return E(n)}(_d);function Id(e,t){var n,r=Dd(t),i=y(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return $f(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Nd=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this)).elements=e,r}return E(n)}(_d);function Ad(e,t){var n,r=Dd(t),i=y(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!$f(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rd=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return E(n)}(_d);function Pd(e){return Bf(e.integerValue||e.doubleValue)}function Dd(e){return ah(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Od=E((function e(t,n){w(this,e),this.field=t,this.transform=n}));var Ld=E((function e(t,n){w(this,e),this.version=t,this.transformResults=n})),Md=function(){function e(t,n){w(this,e),this.updateTime=t,this.exists=n}return E(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Fd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var jd=E((function e(){w(this,e)}));function Ud(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new $d(e.key,Md.none()):new Hd(e.key,e.data,Md.none());var n,r=e.data,i=fh.empty(),a=new Lf(cf.comparator),o=y(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Wd(e.key,i,new Ff(a.toArray()),Md.none())}function Vd(e,t,n){e instanceof Hd?function(e,t,n){var r=e.value.clone(),i=Gd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wd?function(e,t,n){if(Fd(e.precondition,t)){var r=Gd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Kd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zd(e,t,n,r){return e instanceof Hd?function(e,t,n,r){if(!Fd(e.precondition,t))return n;var i=e.value.clone(),a=Qd(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wd?function(e,t,n,r){if(!Fd(e.precondition,t))return n;var i=Qd(e.fieldTransforms,r,t),a=t.data;return a.setAll(Kd(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Fd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bd(e,t){var n,r=null,i=y(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Sd(a.transform,o||null);null!=s&&(null===r&&(r=fh.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function qd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&nf(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Td&&t instanceof Td||e instanceof Nd&&t instanceof Nd?nf(e.elements,t.elements,$f):e instanceof Rd&&t instanceof Rd?$f(e.gt,t.gt):e instanceof Cd&&t instanceof Cd}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Hd=function(e){d(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return w(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return E(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jd),Wd=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return w(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return E(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(jd);function Kd(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Gd(e,t,n){var r=new Map;Vl(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Ed(o,s,n[i]))}return r}function Qd(e,t,n){var r,i=new Map,a=y(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,xd(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Yd,Jd,$d=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return E(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jd),Xd=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return E(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jd),Zd=function(){function e(t,n,r,i){w(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return E(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Vd(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=y(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=zd(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=y(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=zd(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=hd();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Ud(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(af.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),md())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&nf(this.mutations,e.mutations,(function(e,t){return qd(e,t)}))&&nf(this.baseMutations,e.baseMutations,(function(e,t){return qd(e,t)}))}}]),e}(),ep=function(){function e(t,n,r,i){w(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return E(e,null,[{key:"from",value:function(t,n,r){Vl(t.mutations.length===r.length);for(var i=pd,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),tp=function(){function e(t,n){w(this,e),this.largestBatchId=t,this.mutation=n}return E(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),np=E((function e(t,n){w(this,e),this.count=t,this.unchangedNames=n}));function rp(e){switch(e){default:return Ul();case Bl.CANCELLED:case Bl.UNKNOWN:case Bl.DEADLINE_EXCEEDED:case Bl.RESOURCE_EXHAUSTED:case Bl.INTERNAL:case Bl.UNAVAILABLE:case Bl.UNAUTHENTICATED:return!1;case Bl.INVALID_ARGUMENT:case Bl.NOT_FOUND:case Bl.ALREADY_EXISTS:case Bl.PERMISSION_DENIED:case Bl.FAILED_PRECONDITION:case Bl.ABORTED:case Bl.OUT_OF_RANGE:case Bl.UNIMPLEMENTED:case Bl.DATA_LOSS:return!0}}function ip(e){if(void 0===e)return Ml("GRPC error has no .code"),Bl.UNKNOWN;switch(e){case Yd.OK:return Bl.OK;case Yd.CANCELLED:return Bl.CANCELLED;case Yd.UNKNOWN:return Bl.UNKNOWN;case Yd.DEADLINE_EXCEEDED:return Bl.DEADLINE_EXCEEDED;case Yd.RESOURCE_EXHAUSTED:return Bl.RESOURCE_EXHAUSTED;case Yd.INTERNAL:return Bl.INTERNAL;case Yd.UNAVAILABLE:return Bl.UNAVAILABLE;case Yd.UNAUTHENTICATED:return Bl.UNAUTHENTICATED;case Yd.INVALID_ARGUMENT:return Bl.INVALID_ARGUMENT;case Yd.NOT_FOUND:return Bl.NOT_FOUND;case Yd.ALREADY_EXISTS:return Bl.ALREADY_EXISTS;case Yd.PERMISSION_DENIED:return Bl.PERMISSION_DENIED;case Yd.FAILED_PRECONDITION:return Bl.FAILED_PRECONDITION;case Yd.ABORTED:return Bl.ABORTED;case Yd.OUT_OF_RANGE:return Bl.OUT_OF_RANGE;case Yd.UNIMPLEMENTED:return Bl.UNIMPLEMENTED;case Yd.DATA_LOSS:return Bl.DATA_LOSS;default:return Ul()}}(Jd=Yd||(Yd={}))[Jd.OK=0]="OK",Jd[Jd.CANCELLED=1]="CANCELLED",Jd[Jd.UNKNOWN=2]="UNKNOWN",Jd[Jd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jd[Jd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jd[Jd.NOT_FOUND=5]="NOT_FOUND",Jd[Jd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jd[Jd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jd[Jd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jd[Jd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jd[Jd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jd[Jd.ABORTED=10]="ABORTED",Jd[Jd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jd[Jd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jd[Jd.INTERNAL=13]="INTERNAL",Jd[Jd.UNAVAILABLE=14]="UNAVAILABLE",Jd[Jd.DATA_LOSS=15]="DATA_LOSS";var ap=function(){function e(){w(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return E(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return op}},{key:"getOrCreateInstance",value:function(){return null===op&&(op=new e),op}}]),e}(),op=null;function sp(){return new TextEncoder}var up=new Nl([4294967295,4294967295],0);function cp(e){var t=sp().encode(e),n=new Il;return n.update(t),new Uint8Array(n.digest())}function lp(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Nl([n,r],0),new Nl([i,a],0)]}var fp=function(){function e(t,n,r){if(w(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hp("Invalid padding: ".concat(n));if(r<0)throw new hp("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new hp("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new hp("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Nl.fromNumber(this.It)}return E(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Nl.fromNumber(n)));return 1===r.compare(up)&&(r=new Nl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=u(lp(cp(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=u(lp(cp(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),hp=function(e){d(n,e);var t=m(n);function n(){var e;return w(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return E(n)}(N(Error)),dp=function(){function e(t,n,r,i,a){w(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return E(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,pp.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(af.min(),i,new Pf(tf),sd(),md())}}]),e}(),pp=function(){function e(t,n,r,i,a){w(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return E(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,md(),md(),md())}}]),e}(),vp=E((function e(t,n,r,i){w(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),mp=E((function e(t,n){w(this,e),this.targetId=t,this.Vt=n})),yp=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uf.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;w(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),gp=function(){function e(){w(this,e),this.St=0,this.Dt=wp(),this.Ct=Uf.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return E(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=md(),t=md(),n=md();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ul()}})),new pp(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=wp()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),kp=function(){function e(t){w(this,e),this.Gt=t,this.Qt=new Map,this.jt=sd(),this.zt=bp(),this.Wt=new Pf(tf)}return E(e,[{key:"Ht",value:function(e){var t,n=y(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(s){n.e(s)}finally{n.f()}var i,a=y(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:Ul()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Vh(a))if(0===r){var o=new lf(a.path);this.Yt(n,o,dh.newNoDocument(o,af.min()))}else Vl(1===r);else{var s=this.ie(n);if(s!==r){var u=this.re(e,s);if(0!==u){this.ee(n);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=ap.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,s,u,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),c}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,s=r.bits,u=s.bitmap,c=void 0===u?"":u,l=s.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=qf(c).toUint8Array()}catch(e){if(e instanceof jf)return Fl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new fp(a,f,d)}catch(e){return Fl(e instanceof hp?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Vh(a.target)){var o=new lf(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,dh.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=md();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new dp(e,n,this.Wt,this.jt,r);return this.jt=sd(),this.zt=bp(),this.Wt=new Pf(tf),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new gp,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new Lf(tf),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Ll("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new gp),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function bp(){return new Pf(lf.comparator)}function wp(){return new Pf(lf.comparator)}var _p={asc:"ASCENDING",desc:"DESCENDING"},xp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ep={and:"AND",or:"OR"},Sp=E((function e(t,n){w(this,e),this.databaseId=t,this.useProto3Json=n}));function Cp(e,t){return e.useProto3Json||xf(t)?t:{value:t}}function Tp(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ip(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Np(e,t){return Tp(e,t.toTimestamp())}function Ap(e){return Vl(!!e),af.fromTimestamp(function(e){var t=zf(e);return new rf(t.seconds,t.nanos)}(e))}function Rp(e,t){return function(e){return new sf(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Pp(e){var t=sf.fromString(e);return Vl(Xp(t)),t}function Dp(e,t){return Rp(e.databaseId,t.path)}function Op(e,t){var n=Pp(t);if(n.get(1)!==e.databaseId.projectId)throw new ql(Bl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ql(Bl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new lf(jp(n))}function Lp(e,t){return Rp(e.databaseId,t)}function Mp(e){var t=Pp(e);return 4===t.length?sf.emptyPath():jp(t)}function Fp(e){return new sf(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jp(e){return Vl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Up(e,t,n){return{name:Dp(e,t),fields:n.value.mapValue.fields}}function Vp(e,t){var n;if(t instanceof Hd)n={update:Up(e,t.key,t.value)};else if(t instanceof $d)n={delete:Dp(e,t.key)};else if(t instanceof Wd)n={update:Up(e,t.key,t.data),updateMask:$p(t.fieldMask)};else{if(!(t instanceof Xd))return Ul();n={verify:Dp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Cd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Td)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rd)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ul()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Np(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ul()}(e,t.precondition)),n}function zp(e,t){return{documents:[Lp(e,t.path)]}}function Bp(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Lp(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Lp(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Jp(wh.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Qp(e.field),direction:Wp(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=Cp(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function qp(e){var t=Mp(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Vl(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Hp(e);return t instanceof wh&&xh(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new yh(Yp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return xf(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ph(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ph(n,t)}(n.endAt)),Bh(t,i,s,o,u,"F",c,l)}function Hp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Yp(e.unaryFilter.field);return bh.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Yp(e.unaryFilter.field);return bh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Yp(e.unaryFilter.field);return bh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Yp(e.unaryFilter.field);return bh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ul()}}(e):void 0!==e.fieldFilter?function(e){return bh.create(Yp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ul()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return wh.create(e.compositeFilter.filters.map((function(e){return Hp(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ul()}}(e.compositeFilter.op))}(e):Ul()}function Wp(e){return _p[e]}function Kp(e){return xp[e]}function Gp(e){return Ep[e]}function Qp(e){return{fieldPath:e.canonicalString()}}function Yp(e){return cf.fromServerFormat(e.fieldPath)}function Jp(e){return e instanceof bh?function(e){if("=="===e.op){if(sh(e.value))return{unaryFilter:{field:Qp(e.field),op:"IS_NAN"}};if(oh(e.value))return{unaryFilter:{field:Qp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sh(e.value))return{unaryFilter:{field:Qp(e.field),op:"IS_NOT_NAN"}};if(oh(e.value))return{unaryFilter:{field:Qp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qp(e.field),op:Kp(e.op),value:e.value}}}(e):e instanceof wh?function(e){var t=e.getFilters().map((function(e){return Jp(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Gp(e.op),filters:t}}}(e):Ul()}function $p(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Xp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Zp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:af.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:af.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Uf.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;w(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return E(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),ev=E((function e(t){w(this,e),this.fe=t}));function tv(e){var t=qp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$h(t,t.limit,"L"):t}var nv=function(){function e(){w(this,e)}return E(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Bf(e.integerValue));else if("doubleValue"in e){var n=Bf(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Ef(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(qf(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?lh(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ul()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),lf.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();nv.Ve=new nv;var rv=function(){function e(){w(this,e),this.rn=new iv}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),bf.resolve()}},{key:"getCollectionParents",value:function(e,t){return bf.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return bf.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return bf.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return bf.resolve(null)}},{key:"getIndexType",value:function(e,t){return bf.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return bf.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return bf.resolve(null)}},{key:"getMinOffset",value:function(e,t){return bf.resolve(pf.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return bf.resolve(pf.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return bf.resolve()}},{key:"updateIndexEntries",value:function(e,t){return bf.resolve()}}]),e}(),iv=function(){function e(){w(this,e),this.index={}}return E(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lf(sf.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Lf(sf.comparator)).toArray()}}]),e}();new Uint8Array(0);var av=function(){function e(t,n,r){w(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return E(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();av.DEFAULT_COLLECTION_PERCENTILE=10,av.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,av.DEFAULT=new av(41943040,av.DEFAULT_COLLECTION_PERCENTILE,av.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),av.DISABLED=new av(-1,0,0);var ov=function(){function e(t){w(this,e),this.Nn=t}return E(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}();var sv=function(){function e(){w(this,e),this.changes=new ad((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return E(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,dh.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?bf.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var uv=E((function e(t,n){w(this,e),this.overlayedDocument=t,this.mutatedFields=n})),cv=function(){function e(t,n,r,i){w(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return E(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&zd(r.mutation,e,Ff.empty(),rf.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,md()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:md(),i=fd();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=cd();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=fd();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,md())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=sd(),a=dd(),o=dd();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Wd)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),zd(o.mutation,t,o.mutation.getFieldMask(),rf.now())):a.set(t.key,Ff.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new uv(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=dd(),i=new Pf((function(e,t){return e-t})),a=md();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=y(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Ff.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||md()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=hd();c.forEach((function(e){if(!a.has(e)){var n=Ud(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return bf.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return lf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):bf.resolve(fd()),s=-1,u=a;return o.next((function(t){return bf.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?bf.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,md())})).next((function(e){return{batchId:s,changes:ld(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new lf(t)).next((function(e){var t=cd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=cd();return this.indexManager.getCollectionParents(e,i).next((function(o){return bf.forEach(o,(function(o){var s=function(e,t){return new zh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,dh.newInvalidDocument(r)))}));var n=cd();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&zd(a.mutation,i,Ff.empty(),rf.now()),td(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),lv=function(){function e(t){w(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return E(e,[{key:"getBundleMetadata",value:function(e,t){return bf.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Ap(n.createTime)}),bf.resolve()}},{key:"getNamedQuery",value:function(e,t){return bf.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:tv(e.bundledQuery),readTime:Ap(e.readTime)}}(t)),bf.resolve()}}]),e}(),fv=function(){function e(){w(this,e),this.overlays=new Pf(lf.comparator),this.ls=new Map}return E(e,[{key:"getOverlay",value:function(e,t){return bf.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=fd();return bf.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),bf.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),bf.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=fd(),i=t.length+1,a=new lf(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return bf.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Pf((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=fd(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=fd(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return bf.resolve(u)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new tp(t,n));var a=this.ls.get(t);void 0===a&&(a=md(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),hv=function(){function e(){w(this,e),this.fs=new Lf(dv.ds),this.ws=new Lf(dv._s)}return E(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new dv(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new dv(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new lf(new sf([])),r=new dv(n,e),i=new dv(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new lf(new sf([])),n=new dv(t,e),r=new dv(t,e+1),i=md();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new dv(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),dv=function(){function e(t,n){w(this,e),this.key=t,this.As=n}return E(e,null,[{key:"ds",value:function(e,t){return lf.comparator(e.key,t.key)||tf(e.As,t.As)}},{key:"_s",value:function(e,t){return tf(e.As,t.As)||lf.comparator(e.key,t.key)}}]),e}(),pv=function(){function e(t,n){w(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Lf(dv.ds)}return E(e,[{key:"checkEmpty",value:function(e){return bf.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Zd(i,t,n,r);this.mutationQueue.push(a);var o,s=y(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new dv(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return bf.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return bf.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return bf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return bf.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return bf.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new dv(t,0),i=new dv(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),bf.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lf(tf);return t.forEach((function(e){var t=new dv(e,0),i=new dv(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),bf.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;lf.isDocumentKey(i)||(i=i.child(""));var a=new dv(new lf(i),0),o=new Lf(tf);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),bf.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Vl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return bf.forEach(t.mutations,(function(i){var a=new dv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new dv(t,0),r=this.Rs.firstAfterOrEqual(n);return bf.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,bf.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),vv=function(){function e(t){w(this,e),this.Ds=t,this.docs=new Pf(lf.comparator),this.size=0}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return bf.resolve(n?n.document.mutableCopy():dh.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sd();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():dh.newInvalidDocument(e))})),bf.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=sd(),a=t.path,o=new lf(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||vf(df(l),n)<=0||(r.has(l.key)||td(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return bf.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ul()}},{key:"Cs",value:function(e,t){return bf.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new mv(this)}},{key:"getSize",value:function(e){return bf.resolve(this.size)}}]),e}(),mv=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this)).os=e,r}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),bf.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(sv),yv=function(){function e(t){w(this,e),this.persistence=t,this.xs=new ad((function(e){return jh(e)}),Uh),this.lastRemoteSnapshotVersion=af.min(),this.highestTargetId=0,this.Ns=0,this.ks=new hv,this.targetCount=0,this.Ms=ov.kn()}return E(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),bf.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return bf.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return bf.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),bf.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),bf.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new ov(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,bf.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),bf.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,bf.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),bf.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return bf.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return bf.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),bf.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),bf.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),bf.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return bf.resolve(n)}},{key:"containsKey",value:function(e,t){return bf.resolve(this.ks.containsKey(t))}}]),e}(),gv=function(){function e(t,n){var r=this;w(this,e),this.$s={},this.overlays={},this.Os=new _f(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new yv(this),this.indexManager=new rv,this.remoteDocumentCache=new vv((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new ev(n),this.qs=new lv(this.serializer)}return E(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new fv,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new pv(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Ll("MemoryPersistence","Starting transaction:",e);var i=new kv(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return bf.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),kv=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return E(n)}(yf),bv=function(){function e(t){w(this,e),this.persistence=t,this.Qs=new hv,this.js=null}return E(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw Ul()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),bf.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),bf.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),bf.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bf.forEach(this.Ws,(function(r){var i=lf.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,af.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return bf.or([function(){return bf.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}();var wv=function(){function e(t,n,r,i){w(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return E(e,null,[{key:"Li",value:function(t,n){var r,i=md(),a=md(),o=y(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),_v=function(){function e(){w(this,e),this.qi=!1}return E(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(Hh(t))return bf.resolve(null);var r=Yh(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=$h(t,null,"F"),r=Yh(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=md.apply(void 0,C(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,$h(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Hh(t)||r.isEqual(af.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Ol()<=Te.DEBUG&&Ll("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ed(t)),i.Wi(e,o,t,hf(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Lf(rd(e));return t.forEach((function(t,r){td(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Ol()<=Te.DEBUG&&Ll("QueryEngine","Using full collection scan to execute query:",ed(t)),this.Ui.getDocumentsMatchingQuery(e,t,pf.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),xv=function(){function e(t,n,r,i){w(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Pf(tf),this.Yi=new ad((function(e){return jh(e)}),Uh),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return E(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cv(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Ev(e,t,n,r){return new xv(e,t,n,r)}function Sv(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=b(g().mark((function e(t,n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zl(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=md(),u=y(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=y(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=y(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=y(v.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;s=s.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Tv(e,t){var n=zl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=bf.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Vl(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=md(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Iv(e){var t=zl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function Nv(e,t){var n=zl(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Uf.EMPTY_BYTE_STRING,af.min()).withLastLimboFreeSnapshotVersion(af.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var s=sd(),u=md();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Av(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!r.isEqual(af.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return bf.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function Av(e,t,n){var r=md(),i=md();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sd();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(af.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ll("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function Rv(e,t){var n=zl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Pv(e,t){var n=zl(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,bf.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new Zp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Dv(e,t,n){return Ov.apply(this,arguments)}function Ov(){return Ov=b(g().mark((function e(t,n,r){var i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=zl(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),wf(e.t1)){e.next=12;break}throw e.t1;case 12:Ll("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ov.apply(this,arguments)}function Lv(e,t,n){var r=zl(e),i=af.min(),a=md();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=zl(e),i=r.Yi.get(n);return void 0!==i?bf.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Yh(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:af.min(),n?a:md())})).next((function(e){return Mv(r,nd(t),e),{documents:e,ir:a}}))}))}function Mv(e,t,n){var r=e.Xi.get(t)||af.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}var Fv=function(){function e(){w(this,e),this.activeTargetIds=gd()}return E(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),jv=function(){function e(){w(this,e),this.Hr=new Fv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return E(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new Fv,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Uv=function(){function e(){w(this,e)}return E(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Vv=function(){function e(){var t=this;w(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return E(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Ll("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=y(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Ll("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=y(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),zv=null;function Bv(){return null===zv?zv=268435456+Math.round(2147483648*Math.random()):zv++,"0x"+zv.toString(16)}var qv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Hv=function(){function e(t){w(this,e),this.ro=t.ro,this.oo=t.oo}return E(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),Wv="WebChannelConnection",Kv=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return E(n,[{key:"Ao",value:function(e,t,n,r){var i=Bv();return new Promise((function(a,o){var s=new Tl;s.setWithCredentials(!0),s.listenOnce(_l.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case wl.NO_ERROR:var t=s.getResponseJson();Ll(Wv,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case wl.TIMEOUT:Ll(Wv,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ql(Bl.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:var n=s.getStatus();if(Ll(Wv,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bl).indexOf(t)>=0?t:Bl.UNKNOWN}(u.status);o(new ql(c,u.message))}else o(new ql(Bl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ql(Bl.UNAVAILABLE,"Connection failed."));break;default:Ul()}}finally{Ll(Wv,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);Ll(Wv,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=Bv(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=kl(),o=bl(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new Sl({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");Ll(Wv,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new Hv({ro:function(t){h?Ll(Wv,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Ll(Wv,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Ll(Wv,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Cl.EventType.OPEN,(function(){h||Ll(Wv,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Cl.EventType.CLOSE,(function(){h||(h=!0,Ll(Wv,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Cl.EventType.ERROR,(function(t){h||(h=!0,Fl(Wv,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new ql(Bl.UNAVAILABLE,"The operation could not be completed")))})),p(l,Cl.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Vl(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Ll(Wv,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Yd[e];if(void 0!==t)return ip(t)}(s),c=o.message;void 0===u&&(u=Bl.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.wo(new ql(u,c)),l.close()}else Ll(Wv,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,xl.STAT_EVENT,(function(t){t.stat===El.PROXY?Ll(Wv,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===El.NOPROXY&&Ll(Wv,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){w(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return E(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=Bv(),o=this.To(e,t);Ll("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,r,i),this.Ao(e,o,s,n).then((function(t){return Ll("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Fl("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=qv[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function Gv(){return"undefined"!=typeof document?document:null}function Qv(e){return new Sp(e,!0)}var Yv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;w(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return E(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Ll("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),Jv=function(){function e(t,n,r,i,a,o,s,u){w(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Yv(t,n)}return E(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Bl.RESOURCE_EXHAUSTED?(Ml(n.toString()),Ml("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Bl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new ql(Bl.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(b(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Ll("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Ll("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),$v=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,s){var u;return w(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return E(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ul()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Vl(void 0===t||"string"==typeof t),Uf.fromBase64String(t||"")):(Vl(void 0===t||t instanceof Uint8Array),Uf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Bl.UNKNOWN:ip(e.code);return new ql(t,e.message||"")}(o);n=new yp(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Op(e,u.document.name),l=Ap(u.document.updateTime),f=u.document.createTime?Ap(u.document.createTime):af.min(),h=new fh({mapValue:{fields:u.document.fields}}),d=dh.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new vp(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Op(e,m.document),g=m.readTime?Ap(m.readTime):af.min(),k=dh.newNoDocument(y,g),b=m.removedTargetIds||[];n=new vp([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Op(e,w.document),x=w.removedTargetIds||[];n=new vp([],x,_,null)}else{if(!("filter"in t))return Ul();t.filter;var E=t.filter;E.targetId;var S=E.count,C=void 0===S?0:S,T=E.unchangedNames,I=new np(C,T),N=E.targetId;n=new mp(N,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return af.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?af.min():t.readTime?Ap(t.readTime):af.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Fp(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Vh(r)?{documents:zp(e,r)}:{query:Bp(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ip(e,t.resumeToken);var i=Cp(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(af.min())>0){n.readTime=Tp(e,t.snapshotVersion.toTimestamp());var a=Cp(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ul()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Fp(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(Jv),Xv=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,s){var u;return w(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.ru=!1,u}return E(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,l(c(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Vl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Vl(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ap(e.updateTime):Ap(t);return n.isEqual(af.min())&&(n=Ap(t)),new Ld(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ap(e.commitTime);return this.listener.cu(n,t)}return Vl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Fp(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Vp(t.serializer,e)}))};this.Wo(n)}}]),n}(Jv),Zv=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return w(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return E(n,[{key:"fu",value:function(){if(this.lu)throw new ql(Bl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.connection.Io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Bl.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ql(Bl.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=u(a,2),s=o[0],c=o[1];return i.connection.vo(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Bl.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ql(Bl.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return E((function e(){w(this,e)}))}());var em=function(){function e(t,n){w(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return E(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Ml(t),this.mu=!1):Ll("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),tm=E((function e(t,n,r,i,a){var o=this;w(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=hm(o),!e.t0){e.next=5;break}return Ll("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=zl(t)).vu.add(4),e.next=4,im(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,nm(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new em(r,i)}));function nm(e){return rm.apply(this,arguments)}function rm(){return(rm=b(g().mark((function e(t){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!hm(t)){e.next=18;break}n=y(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function im(e){return am.apply(this,arguments)}function am(){return(am=b(g().mark((function e(t){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=y(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function om(e,t){var n=zl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),fm(n)?lm(n):zm(n).Ko()&&um(n,t))}function sm(e,t){var n=zl(e),r=zm(n);n.Au.delete(t),r.Ko()&&cm(n,t),0===n.Au.size&&(r.Ko()?r.jo():hm(n)&&n.bu.set("Unknown"))}function um(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(af.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zm(e).su(t)}function cm(e,t){e.Vu.qt(t),zm(e).iu(t)}function lm(e){e.Vu=new kp({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),zm(e).start(),e.bu.gu()}function fm(e){return hm(e)&&!zm(e).Uo()&&e.Au.size>0}function hm(e){return 0===zl(e).vu.size}function dm(e){e.Vu=void 0}function pm(e){return vm.apply(this,arguments)}function vm(){return(vm=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){um(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mm(e,t){return ym.apply(this,arguments)}function ym(){return(ym=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dm(t),fm(t)?(t.bu.Iu(n),lm(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gm(e,t,n){return km.apply(this,arguments)}function km(){return km=b(g().mark((function e(t,n,r){var i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof yp&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=b(g().mark((function e(t,n){var r,i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=y(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ll("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,bm(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof vp?t.Vu.Ht(n):n instanceof mp?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(af.min())){e.next=29;break}return e.prev=14,e.next=17,Iv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Uf.EMPTY_BYTE_STRING,r.snapshotVersion)),cm(e,t);var i=new Zp(r.target,t,n,r.sequenceNumber);um(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ll("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,bm(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),km.apply(this,arguments)}function bm(e,t,n){return wm.apply(this,arguments)}function wm(){return(wm=b(g().mark((function e(t,n,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wf(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,im(t);case 5:t.bu.set("Offline"),r||(r=function(){return Iv(t.localStore)}),t.asyncQueue.enqueueRetryable(b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ll("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,nm(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _m(e,t){return t().catch((function(n){return bm(e,n,t)}))}function xm(e){return Em.apply(this,arguments)}function Em(){return(Em=b(g().mark((function e(t){var n,r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=zl(t),r=Bm(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!Sm(n)){e.next=19;break}return e.prev=3,e.next=6,Rv(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,Cm(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,bm(n,e.t0);case 17:e.next=2;break;case 19:Tm(n)&&Im(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Sm(e){return hm(e)&&e.Eu.length<10}function Cm(e,t){e.Eu.push(t);var n=Bm(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Tm(e){return hm(e)&&!Bm(e).Uo()&&e.Eu.length>0}function Im(e){Bm(e).start()}function Nm(e){return Am.apply(this,arguments)}function Am(){return(Am=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Bm(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rm(e){return Pm.apply(this,arguments)}function Pm(){return(Pm=b(g().mark((function e(t){var n,r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Bm(t),r=y(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dm(e,t,n){return Om.apply(this,arguments)}function Om(){return(Om=b(g().mark((function e(t,n,r){var i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=ep.from(i,n,r),e.next=3,_m(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,xm(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lm(e,t){return Mm.apply(this,arguments)}function Mm(){return Mm=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Bm(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=b(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rp(i=n.code)||i===Bl.ABORTED){e.next=7;break}return r=t.Eu.shift(),Bm(t).Qo(),e.next=5,_m(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,xm(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Tm(t)&&Im(t);case 5:case"end":return e.stop()}}),e)}))),Mm.apply(this,arguments)}function Fm(e,t){return jm.apply(this,arguments)}function jm(){return(jm=b(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=zl(t)).asyncQueue.verifyOperationInProgress(),Ll("RemoteStore","RemoteStore received new credentials"),i=hm(r),r.vu.add(3),e.next=6,im(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,nm(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Um(e,t){return Vm.apply(this,arguments)}function Vm(){return(Vm=b(g().mark((function e(t,n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zl(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,nm(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,im(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zm(e){return e.Su||(e.Su=function(e,t,n){var r=zl(e);return r.fu(),new $v(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:pm.bind(null,e),ao:mm.bind(null,e),nu:gm.bind(null,e)}),e.Ru.push(function(){var t=b(g().mark((function t(n){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),fm(e)?lm(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:dm(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function Bm(e){return e.Du||(e.Du=function(e,t,n){var r=zl(e);return r.fu(),new Xv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Nm.bind(null,e),ao:Lm.bind(null,e),au:Rm.bind(null,e),cu:Dm.bind(null,e)}),e.Ru.push(function(){var t=b(g().mark((function t(n){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,xm(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Ll("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var qm=function(){function e(t,n,r,i,a){w(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Hl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return E(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ql(Bl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Hm(e,t){if(Ml("AsyncQueue","".concat(t,": ").concat(e)),wf(e))return new ql(Bl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Wm=function(){function e(t){w(this,e),this.comparator=t?function(e,n){return t(e,n)||lf.comparator(e.key,n.key)}:function(e,t){return lf.comparator(e.key,t.key)},this.keyedMap=cd(),this.sortedSet=new Pf(this.comparator)}return E(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Km=function(){function e(){w(this,e),this.Cu=new Pf(lf.comparator)}return E(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ul():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Gm=function(){function e(t,n,r,i,a,o,s,u,c){w(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return E(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Wm.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Qm=E((function e(){w(this,e),this.Nu=void 0,this.listeners=[]})),Ym=E((function e(){w(this,e),this.queries=new ad((function(e){return Zh(e)}),Xh),this.onlineState="Unknown",this.ku=new Set}));function Jm(e,t){return $m.apply(this,arguments)}function $m(){return $m=b(g().mark((function e(t,n){var r,i,a,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zl(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Qm),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Hm(e.t0,"Initialization of query '".concat(ed(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&ny(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),$m.apply(this,arguments)}function Xm(e,t){return Zm.apply(this,arguments)}function Zm(){return Zm=b(g().mark((function e(t,n){var r,i,a,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zl(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Zm.apply(this,arguments)}function ey(e,t){var n,r=zl(e),i=!1,a=y(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=y(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&ny(r)}function ty(e,t,n){var r=zl(e),i=r.queries.get(t);if(i){var a,o=y(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function ny(e){e.ku.forEach((function(e){e.next()}))}var ry=function(){function e(t,n,r){w(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return E(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=y(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Gm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=Gm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}();var iy=E((function e(t){w(this,e),this.key=t})),ay=E((function e(t){w(this,e),this.key=t})),oy=function(){function e(t,n){w(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=md(),this.mutatedKeys=md(),this.tc=rd(t),this.ec=new Wm(this.tc)}return E(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new Km,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=td(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.tc(f,u)>0||c&&n.tc(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ul()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new Gm(this.query,e.ec,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Km,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=md(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new ay(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new iy(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=md();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return Gm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),sy=E((function e(t,n,r){w(this,e),this.query=t,this.targetId=n,this.view=r})),uy=E((function e(t){w(this,e),this.key=t,this.fc=!1})),cy=function(){function e(t,n,r,i,a,o){w(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new ad((function(e){return Zh(e)}),Xh),this._c=new Map,this.mc=new Set,this.gc=new Pf(lf.comparator),this.yc=new Map,this.Ic=new hv,this.Tc={},this.Ec=new Map,this.Ac=ov.Mn(),this.onlineState="Unknown",this.vc=void 0}return E(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function ly(e,t){return fy.apply(this,arguments)}function fy(){return fy=b(g().mark((function e(t,n){var r,i,a,o,s,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uy(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,Pv(r.localStore,Yh(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,hy(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&om(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),fy.apply(this,arguments)}function hy(e,t,n,r,i){return dy.apply(this,arguments)}function dy(){return dy=b(g().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=b(g().mark((function e(t,n,r,i){var a,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Lv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Ry(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Lv(t.localStore,n,!0);case 3:return o=e.sent,s=new oy(n,o.ir),u=s.sc(o.documents),c=pp.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),Ry(t,r,l.cc),f=new sy(n,r,s),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),dy.apply(this,arguments)}function py(e,t){return vy.apply(this,arguments)}function vy(){return(vy=b(g().mark((function e(t,n){var r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zl(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Xh(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Dv(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),sm(r.remoteStore,i.targetId),Ny(r,i.targetId)})).catch(gf);case 9:e.next=14;break;case 11:return Ny(r,i.targetId),e.next=14,Dv(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function my(e,t,n){return yy.apply(this,arguments)}function yy(){return yy=b(g().mark((function e(t,n,r){var i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vy(t),e.prev=1,e.next=4,function(e,t){var n,r,i=zl(e),a=rf.now(),o=t.reduce((function(e,t){return e.add(t.key)}),md());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=sd(),u=md();return i.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=y(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Bd(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Wd(c.key,l,hh(l.value.mapValue),Md.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:ld(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Pf(tf)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Oy(i,a.changes);case 9:return e.next=11,xm(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Hm(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),yy.apply(this,arguments)}function gy(e,t){return ky.apply(this,arguments)}function ky(){return(ky=b(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zl(t),e.prev=1,e.next=4,Nv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(Vl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Vl(n.fc):e.removedDocuments.size>0&&(Vl(n.fc),n.fc=!1))})),e.next=8,Oy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,gf(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function by(e,t,n){var r=zl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=zl(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=y(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ny(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function wy(e,t,n){return _y.apply(this,arguments)}function _y(){return _y=b(g().mark((function e(t,n,r){var i,a,o,s,u,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=zl(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Pf(lf.comparator)).insert(o,dh.newNoDocument(o,af.min())),u=md().add(o),c=new dp(af.min(),new Map,new Pf(tf),s,u),e.next=9,gy(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),Dy(i),e.next=16;break;case 14:return e.next=16,Dv(i.localStore,n,!1).then((function(){return Ny(i,n,r)})).catch(gf);case 16:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}function xy(e,t){return Ey.apply(this,arguments)}function Ey(){return(Ey=b(g().mark((function e(t,n){var r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zl(t),i=n.batch.batchId,e.prev=1,e.next=4,Tv(r.localStore,n);case 4:return a=e.sent,Iy(r,i,null),Ty(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Oy(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,gf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Sy(e,t,n){return Cy.apply(this,arguments)}function Cy(){return(Cy=b(g().mark((function e(t,n,r){var i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zl(t),e.prev=1,e.next=4,function(e,t){var n=zl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Vl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Iy(i,n,r),Ty(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Oy(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,gf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Ty(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function Iy(e,t,n){var r=zl(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Ny(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=y(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||Ay(e,t)}))}function Ay(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(sm(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Dy(e))}function Ry(e,t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof iy?(e.Ic.addReference(a.key,t),Py(e,a)):a instanceof ay?(Ll("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||Ay(e,a.key)):Ul()}}catch(o){i.e(o)}finally{i.f()}}function Py(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Ll("SyncEngine","New document in limbo: "+n),e.mc.add(r),Dy(e))}function Dy(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new lf(sf.fromString(t)),r=e.Ac.next();e.yc.set(r,new uy(n)),e.gc=e.gc.insert(n,r),om(e.remoteStore,new Zp(Yh(qh(n.path)),r,"TargetPurposeLimboResolution",_f.ct))}}function Oy(e,t,n){return Ly.apply(this,arguments)}function Ly(){return Ly=b(g().mark((function e(t,n,r){var i,a,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=zl(t),a=[],o=[],s=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){s.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=wv.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.dc.nu(a),e.next=9,function(){var e=b(g().mark((function e(t,n){var r,i,a,o,s,u,c,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zl(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return bf.forEach(n,(function(t){return bf.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return bf.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),wf(e.t0)){e.next=10;break}throw e.t0;case 10:Ll("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=y(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Ly.apply(this,arguments)}function My(e,t){return Fy.apply(this,arguments)}function Fy(){return(Fy=b(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=zl(t)).currentUser.isEqual(n)){e.next=11;break}return Ll("SyncEngine","User change. New user:",n.toKey()),e.next=5,Sv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new ql(Bl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Oy(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jy(e,t){var n=zl(e),r=n.yc.get(t);if(r&&r.fc)return md().add(r.key);var i=md(),a=n._c.get(t);if(!a)return i;var o,s=y(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wc.get(u);i=i.unionWith(c.view.nc)}}catch(l){s.e(l)}finally{s.f()}return i}function Uy(e){var t=zl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wy.bind(null,t),t.dc.nu=ey.bind(null,t.eventManager),t.dc.Pc=ty.bind(null,t.eventManager),t}function Vy(e){var t=zl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sy.bind(null,t),t}var zy=function(){function e(){w(this,e),this.synchronizeTabs=!1}return E(e,[{key:"initialize",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Qv(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Ev(this.persistence,new _v,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new gv(bv.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new jv}},{key:"terminate",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),By=function(){function e(){w(this,e)}return E(e,[{key:"initialize",value:function(){var e=b(g().mark((function e(t,n){var r=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return by(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=My.bind(null,this.syncEngine),e.next=12,Um(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Ym}},{key:"createDatastore",value:function(e){var t,n=Qv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Kv(t));return function(e,t,n,r){return new Zv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return by(o.syncEngine,e,0)},a=Vv.D()?new Vv:new Uv,new tm(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new cy(e,t,n,r,i,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zl(t),Ll("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,im(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var qy=function(){function e(t){w(this,e),this.observer=t,this.muted=!1}return E(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Ml("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Hy=function(){function e(t,n,r,i){var a=this;w(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Rl.UNAUTHENTICATED,this.clientId=ef.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ll("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ll("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return E(e,[{key:"getConfiguration",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ql(Bl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Hl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(b(g().mark((function n(){var r;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Hm(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Wy(e,t){return Ky.apply(this,arguments)}function Ky(){return Ky=b(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ll("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Sv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Ky.apply(this,arguments)}function Gy(e,t){return Qy.apply(this,arguments)}function Qy(){return(Qy=b(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Jy(t);case 3:return r=e.sent,Ll("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Fm(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Fm(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yy(e){return"FirebaseError"===e.name?e.code===Bl.FAILED_PRECONDITION||e.code===Bl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Jy(e){return $y.apply(this,arguments)}function $y(){return($y=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Ll("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Wy(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Yy(n=e.t0)){e.next=13;break}throw n;case 13:return Fl("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Wy(t,new zy);case 16:e.next=21;break;case 18:return Ll("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Wy(t,new zy);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Xy(e){return Zy.apply(this,arguments)}function Zy(){return(Zy=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Ll("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Gy(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Ll("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Gy(t,new By);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eg(e){return Xy(e).then((function(e){return e.syncEngine}))}function tg(e){return ng.apply(this,arguments)}function ng(){return(ng=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ly.bind(null,n.syncEngine),r.onUnlisten=py.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rg(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var ig=new Map;function ag(e,t,n){if(!n)throw new ql(Bl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function og(e){if(!lf.isDocumentKey(e))throw new ql(Bl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function sg(e){if(lf.isDocumentKey(e))throw new ql(Bl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ug(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ul()}function cg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ql(Bl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ug(e);throw new ql(Bl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function lg(e,t){if(t<=0)throw new ql(Bl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var fg=function(){function e(t){var n,r;if(w(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ql(Bl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ql(Bl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ql(Bl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rg(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ql(Bl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ql(Bl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ql(Bl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return E(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),hg=function(){function e(t,n,r,i){w(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fg({}),this._settingsFrozen=!1}return E(e,[{key:"app",get:function(){if(!this._app)throw new ql(Bl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ql(Bl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Kl;switch(e.type){case"firstParty":return new Jl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ql(Bl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=ig.get(e);t&&(Ll("ComponentProvider","Removing Datastore"),ig.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function dg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=cg(e,hg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=Rl.MOCK_USER;else{s=J(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ql(Bl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Rl(c)}e._authCredentials=new Gl(new Wl(s,u))}}var pg=function(){function e(t,n,r){w(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return E(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new mg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),vg=function(){function e(t,n,r){w(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return E(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),mg=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this,e,r,qh(i)))._path=i,a.type="collection",a}return E(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new pg(this.firestore,null,new lf(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(vg);function yg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_e(e),ag("collection","path",t),e instanceof hg){var a=sf.fromString.apply(sf,[t].concat(r));return sg(a),new mg(e,null,a)}if(!(e instanceof pg||e instanceof mg))throw new ql(Bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(sf.fromString.apply(sf,[t].concat(r)));return sg(o),new mg(e.firestore,null,o)}function gg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_e(e),1===arguments.length&&(t=ef.A()),ag("doc","path",t),e instanceof hg){var a=sf.fromString.apply(sf,[t].concat(r));return og(a),new pg(e,null,new lf(a))}if(!(e instanceof pg||e instanceof mg))throw new ql(Bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(sf.fromString.apply(sf,[t].concat(r)));return og(o),new pg(e.firestore,e instanceof mg?e.converter:null,new lf(o))}var kg=function(){function e(){var t=this;w(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Yv(this,"async_queue_retry"),this.Xc=function(){var e=Gv();e&&Ll("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=Gv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return E(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=Gv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Hl;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=b(g().mark((function e(){var t=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),wf(e.t0)){e.next=12;break}throw e.t0;case 12:Ll("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ml("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=qm.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&Ul()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=b(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=y(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=y(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function bg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=y(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var wg=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return w(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new kg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return E(n,[{key:"_terminate",value:function(){return this._firestoreClient||xg(this),this._firestoreClient.terminate()}}]),n}(hg);function _g(e){return e._firestoreClient||xg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xg(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Gf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,rg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Hy(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}var Eg=function(){function e(t){w(this,e),this._byteString=t}return E(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Uf.fromBase64String(t))}catch(t){throw new ql(Bl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Uf.fromUint8Array(t))}}]),e}(),Sg=function(){function e(){w(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ql(Bl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cf(n)}return E(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Cg=E((function e(t){w(this,e),this._methodName=t})),Tg=function(){function e(t,n){if(w(this,e),!isFinite(t)||t<-90||t>90)throw new ql(Bl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ql(Bl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return E(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return tf(this._lat,e._lat)||tf(this._long,e._long)}}]),e}(),Ig=/^__.*__$/,Ng=function(){function e(t,n,r){w(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Wd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hd(e,this.data,t,this.fieldTransforms)}}]),e}(),Ag=function(){function e(t,n,r){w(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return new Wd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Rg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ul()}}var Pg=function(){function e(t,n,r,i,a,o){w(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return E(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return $g(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Rg(this.ca)&&Ig.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),Dg=function(){function e(t,n,r){w(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Qv(t)}return E(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Pg({ca:e,methodName:t,ga:n,path:cf.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Og(e){var t=e._freezeSettings(),n=Qv(e._databaseId);return new Dg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);Gg("Data must be an object, but it was:",o,r);var s,u,c=Wg(r,o);if(a.merge)s=new Ff(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=y(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Qg(t,l.value,n);if(!o.contains(d))throw new ql(Bl.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Xg(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}s=new Ff(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Ng(new fh(c),s,u)}var Mg=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Cg);function Fg(e,t,n){return new Pg({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var jg=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){return new Od(e.path,new Cd)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Cg),Ug=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e)).pa=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=Fg(this,e,!0),n=this.pa.map((function(e){return Hg(e,t)})),r=new Td(n);return new Od(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Cg),Vg=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this,e)).pa=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=Fg(this,e,!0),n=this.pa.map((function(e){return Hg(e,t)})),r=new Nd(n);return new Od(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Cg);function zg(e,t,n,r){var i=e.ya(1,t,n);Gg("Data must be an object, but it was:",i,r);var a=[],o=fh.empty();Af(r,(function(e,r){var s=Jg(t,e,n);r=_e(r);var u=i.da(s);if(r instanceof Mg)a.push(s);else{var c=Hg(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Ff(a);return new Ag(o,s,i.fieldTransforms)}function Bg(e,t,n,r,i,a){var o=e.ya(1,t,n),s=[Qg(t,r,n)],u=[i];if(a.length%2!=0)throw new ql(Bl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Qg(t,a[c])),u.push(a[c+1]);for(var l=[],f=fh.empty(),h=s.length-1;h>=0;--h)if(!Xg(l,s[h])){var d=s[h],p=u[h];p=_e(p);var v=o.da(d);if(p instanceof Mg)l.push(d);else{var m=Hg(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Ff(l);return new Ag(f,y,o.fieldTransforms)}function qg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Hg(n,e.ya(r?4:3,t))}function Hg(e,t){if(Kg(e=_e(e)))return Gg("Unsupported field value:",t,e),Wg(e,t);if(e instanceof Cg)return function(e,t){if(!Rg(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=y(e);try{for(a.s();!(n=a.n()).done;){var o=Hg(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=_e(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=rf.fromDate(e);return{timestampValue:Tp(t.serializer,n)}}if(e instanceof rf){var r=new rf(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Tp(t.serializer,r)}}if(e instanceof Tg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Eg)return{bytesValue:Ip(t.serializer,e._byteString)};if(e instanceof pg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Rp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(ug(e)))}(e,t)}function Wg(e,t){var n={};return Rf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Af(e,(function(e,r){var i=Hg(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Kg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof rf||e instanceof Tg||e instanceof Eg||e instanceof pg||e instanceof Cg)}function Gg(e,t,n){if(!Kg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ug(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Qg(e,t,n){if((t=_e(t))instanceof Sg)return t._internalPath;if("string"==typeof t)return Jg(e,t);throw $g("Field path arguments must be of type string or ",e,!1,void 0,n)}var Yg=new RegExp("[~\\*/\\[\\]]");function Jg(e,t,n){if(t.search(Yg)>=0)throw $g("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(Sg,C(t.split(".")))._internalPath}catch(r){throw $g("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $g(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new ql(Bl.INVALID_ARGUMENT,s+e+u)}function Xg(e,t){return e.some((function(e){return e.isEqual(t)}))}var Zg=function(){function e(t,n,r,i,a){w(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return E(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new pg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ek(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(tk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ek=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){return l(c(n.prototype),"data",this).call(this)}}]),n}(Zg);function tk(e,t){return"string"==typeof t?Jg(e,t):t instanceof Sg?t._internalPath:t._delegate._internalPath}function nk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ql(Bl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rk=E((function e(){w(this,e)})),ik=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n)}(rk);function ak(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof rk&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof sk})).length,n=e.filter((function(e){return e instanceof ok})).length;if(t>1||t>0&&n>0)throw new ql(Bl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=y(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var ok=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return E(n,[{key:"_apply",value:function(e){var t=this._parse(e);return pk(e._query,t),new vg(e.firestore,e.converter,Jh(e._query,t))}},{key:"_parse",value:function(e){var t=Og(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ql(Bl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){dk(o,a);var u,c=[],l=y(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(hk(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=hk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||dk(o,a),s=qg(n,"where",o,"in"===a||"not-in"===a);return bh.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ik);var sk=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return E(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:wh.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=y(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;pk(r,a),r=Jh(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new vg(e.firestore,e.converter,Jh(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(rk);var uk=function(e){d(n,e);var t=m(n);function n(e,r){var i;return w(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return E(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ql(Bl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ql(Bl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new yh(t,n);return function(e,t){if(null===Wh(e)){var n=Kh(e);null!==n&&vk(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new vg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new zh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ik);function ck(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=tk("orderBy",e);return uk._create(n,t)}var lk=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return w(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return E(n,[{key:"_apply",value:function(e){return new vg(e.firestore,e.converter,$h(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ik);function fk(e){return lg("limit",e),lk._create("limit",e,"F")}function hk(e,t,n){if("string"==typeof(n=_e(n))){if(""===n)throw new ql(Bl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gh(t)&&-1!==n.indexOf("/"))throw new ql(Bl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(sf.fromString(n));if(!lf.isDocumentKey(r))throw new ql(Bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return rh(e,new lf(r))}if(n instanceof pg)return rh(e,n._key);throw new ql(Bl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ug(n),"."))}function dk(e,t){if(!Array.isArray(e)||0===e.length)throw new ql(Bl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function pk(e,t){if(t.isInequality()){var n=Kh(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new ql(Bl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Wh(e);null!==i&&vk(e,r,i)}var a=function(e,t){var n,r=y(e);try{for(r.s();!(n=r.n()).done;){var i,a=y(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new ql(Bl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ql(Bl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function vk(e,t,n){if(!n.isEqual(t))throw new ql(Bl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var mk=function(){function e(){w(this,e)}return E(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Jf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ul()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Af(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Tg(Bf(e.latitude),Bf(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Wf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Kf(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=zf(e);return new rf(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=sf.fromString(e);Vl(Xp(n));var r=new Qf(n.get(1),n.get(3)),i=new lf(n.popFirst(5));return r.isEqual(t)||Ml("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function yk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var gk=function(){function e(t,n){w(this,e),this.hasPendingWrites=t,this.fromCache=n}return E(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),kk=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,s){var u;return w(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return E(n,[{key:"exists",value:function(){return l(c(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new bk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(tk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Zg),bk=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(c(n.prototype),"data",this).call(this,e)}}]),n}(kk),wk=function(){function e(t,n,r,i){w(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new gk(i.hasPendingWrites,i.fromCache),this.query=r}return E(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new bk(n._firestore,n._userDataWriter,r.key,r,new gk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ql(Bl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new bk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new bk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:_k(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function _k(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ul()}}var xk=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new Eg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new pg(this.firestore,null,t)}}]),n}(mk);function Ek(e,t,n){e=cg(e,pg);var r=cg(e.firestore,wg),i=yk(e.converter,t,n);return Nk(r,[Lg(Og(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Md.none())])}function Sk(e,t,n){e=cg(e,pg);for(var r=cg(e.firestore,wg),i=Og(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Nk(r,[("string"==typeof(t=_e(t))||t instanceof Sg?Bg(i,"updateDoc",e._key,t,n,o):zg(i,"updateDoc",e._key,t)).toMutation(e._key,Md.exists(!0))])}function Ck(e){return Nk(cg(e.firestore,wg),[new $d(e._key,Md.none())])}function Tk(e,t){var n=cg(e.firestore,wg),r=gg(e),i=yk(e.converter,t);return Nk(n,[Lg(Og(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Md.exists(!1))]).then((function(){return r}))}function Ik(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=_e(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||bg(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(bg(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof pg)l=cg(e.firestore,wg),f=qh(e._key.path),c={next:function(t){n[u]&&n[u](Ak(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=cg(e,vg);l=cg(p.firestore,wg),f=p._query;var v=new xk(l);c={next:function(e){n[u]&&n[u](new wk(l,v,p,e))},error:n[u+1],complete:n[u+2]},nk(e._query)}return function(e,t,n,r){var i=new qy(r),a=new ry(t,i,n);return e.asyncQueue.enqueueAndForget(b(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Jm,t.next=3,tg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(b(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Xm,t.next=3,tg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(_g(l),f,h,c)}function Nk(e,t){return function(e,t){var n=new Hl;return e.asyncQueue.enqueueAndForget(b(g().mark((function r(){return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=my,r.next=3,eg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(_g(e),t)}function Ak(e,t,n){var r=n.docs.get(t._key),i=new xk(e);return new kk(e,i,t._key,r,new gk(n.hasPendingWrites,n.fromCache),t.converter)}function Rk(){return new jg("serverTimestamp")}function Pk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ug("arrayUnion",t)}function Dk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vg("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Pl=e}(mt),ft(new xe("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new wg(new Ql(e.getProvider("auth-internal")),new Xl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ql(Bl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qf(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),kt(Al,"3.12.2",e),kt(Al,"3.12.2","esm2017")}();var Ok=yt({apiKey:"AIzaSyCCwY9_tM3relkZey1qH3qDU_61ir1COGw",authDomain:"odin-chat-app.firebaseapp.com",projectId:"odin-chat-app",storageBucket:"odin-chat-app.appspot.com",messagingSenderId:"789887361577",appId:"1:789887361577:web:e58066ccc4784ba9753238",databaseURL:"https://odin-chat-app-default-rtdb.europe-west1.firebasedatabase.app/"}),Lk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt(),t=ht(e,"auth");if(t.isInitialized())return t.getImmediate();var n,r=function(e,t){var n=ht(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(he(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Ht(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ba,persistence:[Fi,fi,di]}),i=Q("authTokenSyncURL");if(i){var a=(n=i,function(){var e=b(g().mark((function e(t){var r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(r=e.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>Za)){e.next=9;break}return e.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,eo!==a){e.next=12;break}return e.abrupt("return");case 12:return eo=a,e.next=15,fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());!function(e,t,n){_e(e).beforeAuthStateChanged(t,n)}(r,a,(function(){return a(r.currentUser)})),function(e,t,n,r){_e(e).onIdTokenChanged(t,n,r)}(r,(function(e){return a(e)}))}var o=W("auth");return o&&yr(r,"http://".concat(o)),r}(Ok),Mk=new Wr,Fk=function(e,t){var n="string"==typeof e?e:t||"(default)",r=ht("object"==typeof e?e:gt(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=K("firestore");i&&dg.apply(void 0,[r].concat(C(i)))}return r}(Ok),jk="@firebase/database",Uk="0.14.4",Vk="";var zk=function(){function e(t){w(this,e),this.domStorage_=t,this.prefix_="firebase:"}return E(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),oe(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ae(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Bk=function(){function e(){w(this,e),this.cache_={},this.isInMemoryStorage=!0}return E(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ue(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),qk=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new zk(t)}}catch(n){}return new Bk},Hk=qk("localStorage"),Wk=qk("sessionStorage"),Kk=new Oe("@firebase/database"),Gk=function(){var e=1;return function(){return e++}}(),Qk=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,D(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ye;n.update(t);var r=n.digest();return M.encodeByteArray(r)},Yk=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?oe(r):r,t+=" "}return t},Jk=null,$k=!0,Xk=function(e,t){D(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Kk.logLevel=Te.VERBOSE,Jk=Kk.log.bind(Kk),t&&Wk.set("logging_enabled",!0)):"function"===typeof e?Jk=e:(Jk=null,Wk.remove("logging_enabled"))},Zk=function(){if(!0===$k&&($k=!1,null===Jk&&!0===Wk.get("logging_enabled")&&Xk(!0)),Jk){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Yk.apply(null,t);Jk(r)}},eb=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Zk.apply(void 0,[e].concat(n))}},tb=function(){var e="FIREBASE INTERNAL ERROR: "+Yk.apply(void 0,arguments);Kk.error(e)},nb=function(){var e="FIREBASE FATAL ERROR: ".concat(Yk.apply(void 0,arguments));throw Kk.error(e),new Error(e)},rb=function(){var e="FIREBASE WARNING: "+Yk.apply(void 0,arguments);Kk.warn(e)},ib=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ab="[MIN_NAME]",ob="[MAX_NAME]",sb=function(e,t){if(e===t)return 0;if(e===ab||t===ob)return-1;if(t===ab||e===ob)return 1;var n=vb(e),r=vb(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},ub=function(e,t){return e===t?0:e<t?-1:1},cb=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+oe(t))},lb=function e(t){if("object"!==typeof t||null===t)return oe(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=oe(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},fb=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function hb(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var db=function(e){D(!ib(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var pb=new RegExp("^-?(0*)\\d{1,10}$"),vb=function(e){if(pb.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},mb=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw rb("Exception was thrown by user callback.",e),t}),Math.floor(0))}},yb=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},gb=function(){function e(t,n){var r=this;w(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return E(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){rb('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),kb=function(){function e(t,n,r){var i=this;w(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return E(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Zk("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rb(e)}}]),e}(),bb=function(){function e(t){w(this,e),this.accessToken=t}return E(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();bb.OWNER="owner";var wb="5",_b=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xb="ac",Eb="websocket",Sb="long_polling",Cb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];w(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hk.get("host:"+t)||this._host}return E(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hk.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Tb(e,t,n){var r;if(D("string"===typeof t,"typeof type must == string"),D("object"===typeof n,"typeof params must == object"),t===Eb)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Sb)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return hb(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Ib=function(){function e(){w(this,e),this.counters_={}}return E(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ue(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return z(this.counters_)}}]),e}(),Nb={},Ab={};function Rb(e){var t=e.toString();return Nb[t]||(Nb[t]=new Ib),Nb[t]}var Pb=function(){function e(t){w(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return E(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&mb((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Db="start",Ob=function(){function e(t,n,r,i,a,o,s){var u=this;w(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eb(t),this.stats_=Rb(n),this.urlFn=function(e){return u.appCheckToken&&(e[xb]=u.appCheckToken),Tb(n,Sb,e)}}return E(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Pb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(ee()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Lb((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Db)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Db]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=wb,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[xb]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&_b.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=oe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=j(t),r=fb(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!ee()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=oe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!ee()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Lb=function(){function e(t,n,r,i){if(w(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ee())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Gk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Zk("frame writing exception"),s.stack&&Zk(s.stack),Zk(s)}}}return E(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;ee()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Zk("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Zk("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Mb=null;"undefined"!==typeof MozWebSocket?Mb=MozWebSocket:"undefined"!==typeof WebSocket&&(Mb=WebSocket);var Fb=function(){function e(t,n,r,i,a,o,s){w(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eb(this.connId),this.stats_=Rb(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return E(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hk.set("previous_websocket_failure",!0);try{var r;if(ee()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(wb,"/").concat(Vk,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Mb(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Hk.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ae(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(D(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=oe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=fb(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=wb,!ee()&&"undefined"!==typeof location&&location.hostname&&_b.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[xb]=r),i&&(a.p=i),Tb(e,Eb,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Mb&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Hk.isInMemoryStorage||!0===Hk.get("previous_websocket_failure")}}]),e}();Fb.responsesRequiredToBeHealthy=2,Fb.healthyTimeout=3e4;var jb=function(){function e(t){w(this,e),this.initTransports_(t)}return E(e,[{key:"initTransports_",value:function(t){var n=Fb&&Fb.isAvailable(),r=n&&!Fb.previouslyFailed();if(t.webSocketOnly&&(n||rb("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Fb];else{var i,a=this.transports_=[],o=y(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Ob,Fb]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();jb.globalTransportInitialized_=!1;var Ub=function(){function e(t,n,r,i,a,o,s,u,c,l){w(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eb("c:"+this.id+":"),this.transportManager_=new jb(n),this.log_("Connection created"),this.start_()}return E(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=yb((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=cb("t",e),n=cb("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=cb("t",e),n=cb("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=cb("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?tb("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tb("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),wb!==n&&rb("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yb((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yb((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hk.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Vb=function(){function e(){w(this,e)}return E(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),zb=function(){function e(t){w(this,e),this.allowedEvents_=t,this.listeners_={},D(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return E(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=C(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){D(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Bb=function(e){d(n,e);var t=m(n);function n(){var e;return w(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||X()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return E(n,[{key:"getInitialEvent",value:function(e){return D("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(zb),qb=32,Hb=768,Wb=function(){function e(t,n){if(w(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return E(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Kb(){return new Wb("")}function Gb(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Qb(e){return e.pieces_.length-e.pieceNum_}function Yb(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Wb(e.pieces_,t)}function Jb(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function $b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Xb(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Wb(t,0)}function Zb(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Wb)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Wb(n,0)}function ew(e){return e.pieceNum_>=e.pieces_.length}function tw(e,t){var n=Gb(e),r=Gb(t);if(null===n)return t;if(n===r)return tw(Yb(e),Yb(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function nw(e,t){if(Qb(e)!==Qb(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function rw(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Qb(e)>Qb(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var iw=E((function e(t,n){w(this,e),this.errorPrefix_=n,this.parts_=$b(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=we(this.parts_[r]);aw(this)}));function aw(e){if(e.byteLength_>Hb)throw new Error(e.errorPrefix_+"has a key path longer than "+Hb+" bytes ("+e.byteLength_+").");if(e.parts_.length>qb)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qb+") or object contains a cycle "+ow(e))}function ow(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var sw=function(e){d(n,e);var t=m(n);function n(){var e,r,i;return w(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return E(n,[{key:"getInitialEvent",value:function(e){return D("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(zb),uw=1e3,cw=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,s,u,c){var l;if(w(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=eb("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=uw,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!ee())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return sw.getInstance().on("visible",l.onVisible_,f(l)),-1===e.host.indexOf("fblocal")&&Bb.getInstance().on("online",l.onOnline_,f(l)),l}return E(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(oe(i)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Y,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=se(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=se(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+oe(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):tb("Unrecognized action received from server: "+oe(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=uw,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=uw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=uw),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=b(g().mark((function e(){var t,r,i,a,o,s,c,l,f,h,d,p,v,m,y=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,c=null,l=function(){c?c.close():(s=!0,i())},f=function(e){D(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=u(d,2),v=p[0],m=p[1],s?Zk("getToken() completed but was canceled"):(Zk("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,c=new Ub(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){rb(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&rb(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Zk("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Zk("Resuming connection for reason: "+e),delete this.interruptReasons_[e],le(this.interruptReasons_)&&(this.reconnectDelay_=uw,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return lb(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Wb(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Zk("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Zk("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=y(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=y(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";ee()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Vk.replace(/\./g,"-")]=1,X()?e["framework.cordova"]=1:Z()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Bb.getInstance().currentlyOnline();return le(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ue(e,"w")){var n=ce(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();rb("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Vb);cw.nextPersistentConnectionId_=0,cw.nextConnectionId_=0;var lw,fw=function(){function e(t,n){w(this,e),this.name=t,this.node=n}return E(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),hw=function(){function e(){w(this,e)}return E(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new fw(ab,e),r=new fw(ab,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return fw.MIN}}]),e}(),dw=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"compare",value:function(e,t){return sb(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw O("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return fw.MIN}},{key:"maxPost",value:function(){return new fw(ob,lw)}},{key:"makePost",value:function(e,t){return D("string"===typeof e,"KeyIndex indexValue must always be a string."),new fw(e,lw)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return lw},set:function(e){lw=e}}]),n}(hw),pw=new dw,vw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;w(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return E(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),mw=function(){function e(t,n,r,i,a){w(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:kw.EMPTY_NODE,this.right=null!=a?a:kw.EMPTY_NODE}return E(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return kw.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return kw.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();mw.RED=!0,mw.BLACK=!1;var yw,gw=function(){function e(){w(this,e)}return E(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new mw(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),kw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;w(this,e),this.comparator_=t,this.root_=n}return E(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,mw.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,mw.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new vw(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new vw(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new vw(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new vw(this.root_,null,this.comparator_,!0,e)}}]),e}();function bw(e,t){return sb(e.name,t.name)}function ww(e,t){return sb(e,t)}kw.EMPTY_NODE=new gw;var _w,xw,Ew,Sw=function(e){return"number"===typeof e?"number:"+db(e):"string:"+e},Cw=function(e){if(e.isLeafNode()){var t=e.val();D("string"===typeof t||"number"===typeof t||"object"===typeof t&&ue(t,".sv"),"Priority must be a string or number.")}else D(e===yw||e.isEmpty(),"priority of unexpected type.");D(e===yw||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Tw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;w(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,D(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Cw(this.priorityNode_)}return E(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return ew(t)?this:".priority"===Gb(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Gb(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(D(".priority"!==r||1===Qb(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yb(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Sw(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?db(this.value_):this.value_,this.lazyHash_=Qk(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(D(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return D(i>=0,"Unknown leaf type: "+n),D(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return _w},set:function(e){_w=e}}]),e}();Tw.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Iw,Nw,Aw=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?sb(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return fw.MIN}},{key:"maxPost",value:function(){return new fw(ob,new Tw("[PRIORITY-POST]",Ew))}},{key:"makePost",value:function(e,t){var n=xw(e);return new fw(t,new Tw("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(hw),Rw=new Aw,Pw=Math.log(2),Dw=function(){function e(t){w(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Pw,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return E(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Ow=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new mw(o,a.node,mw.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new mw(o,a.node,mw.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new mw(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,mw.BLACK):(s(f,mw.BLACK),s(f,mw.RED))}return a}(new Dw(e.length));return new kw(r||t,a)},Lw={},Mw=function(){function e(t,n){w(this,e),this.indexes_=t,this.indexSet_=n}return E(e,[{key:"get",value:function(e){var t=ce(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof kw?t:null}},{key:"hasIndex",value:function(e){return ue(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){D(t!==pw,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(fw.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Ow(i,t.getCompare()):Lw;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=fe(this.indexes_,(function(e,i){var a=ce(r.indexSet_,i);if(D(a,"Missing index implementation for "+i),e===Lw){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(fw.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Ow(o,a.getCompare())}return Lw}var c=n.get(t.name),l=e;return c&&(l=l.remove(new fw(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(fe(this.indexes_,(function(e){if(e===Lw)return e;var r=n.get(t.name);return r?e.remove(new fw(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return D(Lw&&Rw,"ChildrenNode.ts has not been loaded"),Iw=Iw||new e({".priority":Lw},{".priority":Rw})}}]),e}(),Fw=function(){function e(t,n,r){w(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Cw(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return E(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Nw}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Nw:t}},{key:"getChild",value:function(e){var t=Gb(e);return null===t?this:this.getImmediateChild(t).getChild(Yb(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(D(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new fw(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Nw:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Gb(e);if(null===n)return t;D(".priority"!==Gb(e)||1===Qb(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Yb(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Rw,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Sw(this.getPriority().val())+":"),this.forEachChild(Rw,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Qk(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new fw(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new fw(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new fw(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,fw.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,fw.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===jw?-1:0}},{key:"withIndex",value:function(t){if(t===pw||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===pw||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Rw),r=t.getIterator(Rw),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===pw?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Nw||(Nw=new e(new kw(ww),null,Mw.Default))}}]),e}();Fw.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var jw=new(function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.call(this,new kw(ww),Fw.EMPTY_NODE,Mw.Default)}return E(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Fw.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Fw));Object.defineProperties(fw,{MIN:{value:new fw(ab,Fw.EMPTY_NODE)},MAX:{value:new fw(ob,jw)}}),dw.__EMPTY_NODE=Fw.EMPTY_NODE,Tw.__childrenNodeConstructor=Fw,yw=jw,function(e){Ew=e}(jw);var Uw=!0;function Vw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Fw.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),D(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new Tw(e,Vw(t));if(e instanceof Array||!Uw){var n=Fw.EMPTY_NODE;return hb(e,(function(t,r){if(ue(e,t)&&"."!==t.substring(0,1)){var i=Vw(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Vw(t))}var r=[],i=!1;if(hb(e,(function(e,t){if("."!==e.substring(0,1)){var n=Vw(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new fw(e,n)))}})),0===r.length)return Fw.EMPTY_NODE;var a=Ow(r,bw,(function(e){return e.name}),ww);if(i){var o=Ow(r,Rw.getCompare());return new Fw(a,Vw(t),new Mw({".priority":o},{".priority":Rw}))}return new Fw(a,Vw(t),Mw.Default)}!function(e){xw=e}(Vw);var zw=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),(r=t.call(this)).indexPath_=e,D(!ew(e)&&".priority"!==Gb(e),"Can't create PathIndex with empty path or .priority key"),r}return E(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?sb(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Vw(e),r=Fw.EMPTY_NODE.updateChild(this.indexPath_,n);return new fw(t,r)}},{key:"maxPost",value:function(){var e=Fw.EMPTY_NODE.updateChild(this.indexPath_,jw);return new fw(ob,e)}},{key:"toString",value:function(){return $b(this.indexPath_,0).join("/")}}]),n}(hw),Bw=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?sb(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return fw.MIN}},{key:"maxPost",value:function(){return fw.MAX}},{key:"makePost",value:function(e,t){var n=Vw(e);return new fw(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(hw),qw=new Bw;function Hw(e){return{type:"value",snapshotNode:e}}function Ww(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Kw(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Gw(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Qw=function(){function e(){w(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rw}return E(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ab}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ob}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Rw}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Yw(e){var t,n={};if(e.isDefault())return n;if(e.index_===Rw?t="$priority":e.index_===qw?t="$value":e.index_===pw?t="$key":(D(e.index_ instanceof zw,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=oe(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=oe(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+oe(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=oe(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+oe(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Jw(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Rw&&(t.i=e.index_.toString()),t}var $w=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return w(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=eb("p:rest:"),o.listens_={},o}return E(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=Yw(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ce(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Yw(e._queryParams),r=e._path.toString(),i=new Y;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=u(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+pe(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ae(l.responseText)}catch(n){rb("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&rb("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Vb),Xw=function(){function e(){w(this,e),this.rootNode_=Fw.EMPTY_NODE}return E(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Zw(){return{value:null,children:new Map}}function e_(e,t,n){if(ew(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Gb(t);e.children.has(r)||e.children.set(r,Zw()),e_(e.children.get(r),t=Yb(t),n)}}function t_(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){t_(r,new Wb(t.toString()+"/"+e),n)}))}var n_,r_=function(){function e(t){w(this,e),this.collection_=t,this.last_=null}return E(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hb(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),i_=function(){function e(t,n){w(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new r_(t);var r=1e4+2e4*Math.random();yb(this.reportStats_.bind(this),Math.floor(r))}return E(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;hb(t,(function(t,i){i>0&&ue(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),yb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function a_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(n_||(n_={}));var o_,s_=function(){function e(t,n,r){w(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=n_.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return E(e,[{key:"operationForChild",value:function(t){if(ew(this.path)){if(null!=this.affectedTree.value)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Wb(t));return new e(Kb(),n,this.revert)}return D(Gb(this.path)===t,"operationForChild called for unrelated child."),new e(Yb(this.path),this.affectedTree,this.revert)}}]),e}(),u_=function(){function e(t,n,r){w(this,e),this.source=t,this.path=n,this.snap=r,this.type=n_.OVERWRITE}return E(e,[{key:"operationForChild",value:function(t){return ew(this.path)?new e(this.source,Kb(),this.snap.getImmediateChild(t)):new e(this.source,Yb(this.path),this.snap)}}]),e}(),c_=function(){function e(t,n,r){w(this,e),this.source=t,this.path=n,this.children=r,this.type=n_.MERGE}return E(e,[{key:"operationForChild",value:function(t){if(ew(this.path)){var n=this.children.subtree(new Wb(t));return n.isEmpty()?null:n.value?new u_(this.source,Kb(),n.value):new e(this.source,Kb(),n)}return D(Gb(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Yb(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),l_=function(){function e(t,n,r){w(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return E(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(ew(e))return this.isFullyInitialized()&&!this.filtered_;var t=Gb(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function f_(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw O("Should only compare child_ events.");var r=new fw(t.childName,t.snapshotNode),i=new fw(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function h_(e,t){return{eventCache:e,serverCache:t}}function d_(e,t,n,r){return h_(new l_(t,n,r),e.serverCache)}function p_(e,t,n,r){return h_(e.eventCache,new l_(t,n,r))}function v_(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function m_(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var y_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(o_||(o_=new kw(ub)),o_);w(this,e),this.value=t,this.children=n}return E(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Kb(),value:this.value};if(ew(e))return null;var n=Gb(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Yb(e),t);return null!=i?{path:Zb(new Wb(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(ew(t))return this;var n=Gb(t),r=this.children.get(n);return null!==r?r.subtree(Yb(t)):new e(null)}},{key:"set",value:function(t,n){if(ew(t))return new e(n,this.children);var r=Gb(t),i=(this.children.get(r)||new e(null)).set(Yb(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(ew(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Gb(t),r=this.children.get(n);if(r){var i,a=r.remove(Yb(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(ew(e))return this.value;var t=Gb(e),n=this.children.get(t);return n?n.get(Yb(e)):null}},{key:"setTree",value:function(t,n){if(ew(t))return n;var r,i=Gb(t),a=(this.children.get(i)||new e(null)).setTree(Yb(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Kb(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Zb(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Kb(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ew(e))return null;var i=Gb(e),a=this.children.get(i);return a?a.findOnPath_(Yb(e),Zb(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Kb(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(ew(t))return this;this.value&&r(n,this.value);var i=Gb(t),a=this.children.get(i);return a?a.foreachOnPath_(Yb(t),Zb(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Kb(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Zb(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return hb(t,(function(e,t){n=n.set(new Wb(e),t)})),n}}]),e}(),g_=function(){function e(t){w(this,e),this.writeTree_=t}return E(e,null,[{key:"empty",value:function(){return new e(new y_(null))}}]),e}();function k_(e,t,n){if(ew(t))return new g_(new y_(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=tw(i,t);return a=a.updateChild(o,n),new g_(e.writeTree_.set(i,a))}var s=new y_(n),u=e.writeTree_.setTree(t,s);return new g_(u)}function b_(e,t,n){var r=e;return hb(n,(function(e,n){r=k_(r,Zb(t,e),n)})),r}function w_(e,t){if(ew(t))return g_.empty();var n=e.writeTree_.setTree(t,new y_(null));return new g_(n)}function __(e,t){return null!=x_(e,t)}function x_(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(tw(n.path,t)):null}function E_(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Rw,(function(e,n){t.push(new fw(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new fw(e,n.value))})),t}function S_(e,t){if(ew(t))return e;var n=x_(e,t);return new g_(null!=n?new y_(n):e.writeTree_.subtree(t))}function C_(e){return e.writeTree_.isEmpty()}function T_(e,t){return I_(Kb(),e.writeTree_,t)}function I_(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(D(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=I_(Zb(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Zb(e,".priority"),r)),n}function N_(e,t){return B_(t,e)}function A_(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));D(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&R_(s,r.path)?i=!1:rw(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=D_(e.allWrites,P_,Kb()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=w_(e.visibleWrites,r.path):hb(r.children,(function(t){e.visibleWrites=w_(e.visibleWrites,Zb(r.path,t))}));return!0}return!1}function R_(e,t){if(e.snap)return rw(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&rw(Zb(e.path,n),t))return!0;return!1}function P_(e){return e.visible}function D_(e,t,n){for(var r=g_.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)rw(n,o)?r=k_(r,s=tw(n,o),a.snap):rw(o,n)&&(s=tw(o,n),r=k_(r,Kb(),a.snap.getChild(s)));else{if(!a.children)throw O("WriteRecord should have .snap or .children");if(rw(n,o))r=b_(r,s=tw(n,o),a.children);else if(rw(o,n))if(ew(s=tw(o,n)))r=b_(r,Kb(),a.children);else{var u=ce(a.children,Gb(s));if(u){var c=u.getChild(Yb(s));r=k_(r,Kb(),c)}}}}}return r}function O_(e,t,n,r,i){if(r||i){var a=S_(e.visibleWrites,t);if(!i&&C_(a))return n;if(i||null!=n||__(a,Kb())){return T_(D_(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(rw(e.path,t)||rw(t,e.path))}),t),n||Fw.EMPTY_NODE)}return null}var o=x_(e.visibleWrites,t);if(null!=o)return o;var s=S_(e.visibleWrites,t);return C_(s)?n:null!=n||__(s,Kb())?T_(s,n||Fw.EMPTY_NODE):null}function L_(e,t,n,r){return O_(e.writeTree,e.treePath,t,n,r)}function M_(e,t){return function(e,t,n){var r=Fw.EMPTY_NODE,i=x_(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Rw,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=S_(e.visibleWrites,t);return n.forEachChild(Rw,(function(e,t){var n=T_(S_(a,new Wb(e)),t);r=r.updateImmediateChild(e,n)})),E_(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return E_(S_(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function F_(e,t,n,r){return function(e,t,n,r,i){D(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Zb(t,n);if(__(e.visibleWrites,a))return null;var o=S_(e.visibleWrites,a);return C_(o)?i.getChild(n):T_(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function j_(e,t){return function(e,t){return x_(e.visibleWrites,t)}(e.writeTree,Zb(e.treePath,t))}function U_(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=S_(e.visibleWrites,t),c=x_(u,Kb());if(null!=c)s=c;else{if(null==n)return[];s=T_(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function V_(e,t,n){return function(e,t,n,r){var i=Zb(t,n),a=x_(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?T_(S_(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function z_(e,t){return B_(Zb(e.treePath,t),e.writeTree)}function B_(e,t){return{treePath:e,writeTree:t}}var q_=function(){function e(){w(this,e),this.changeMap=new Map}return E(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;D("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),D(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Gw(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Kw(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ww(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw O("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Gw(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),H_=new(function(){function e(){w(this,e)}return E(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),W_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;w(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return E(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new l_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return V_(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:m_(this.viewCache_),i=U_(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function K_(e,t,n,r,i){var a,o,s=new q_;if(n.type===n_.OVERWRITE){var u=n;u.source.fromUser?a=Y_(e,t,u.path,u.snap,r,i,s):(D(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!ew(u.path),a=Q_(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===n_.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=Zb(n,r);J_(t,Gb(c))&&(s=Y_(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=Zb(n,r);J_(t,Gb(c))||(s=Y_(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(D(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=X_(e,t,c.path,c.children,r,i,o,s))}else if(n.type===n_.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=j_(r,n))return t;var s,u=new W_(r,t,i),c=t.eventCache.getNode();if(ew(n)||".priority"===Gb(n)){var l;if(t.serverCache.isFullyInitialized())l=L_(r,m_(t));else{var f=t.serverCache.getNode();D(f instanceof Fw,"serverChildren would be complete if leaf node"),l=M_(r,f)}s=e.filter.updateFullNode(c,l,a)}else{var h=Gb(n),d=V_(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,Yb(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,Fw.EMPTY_NODE,Yb(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=L_(r,m_(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=j_(r,Kb()),d_(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=j_(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(ew(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Q_(e,t,n,u.getNode().getChild(n),i,a,s,o);if(ew(n)){var c=new y_(null);return u.getNode().forEachChild(pw,(function(e,t){c=c.set(new Wb(e),t)})),X_(e,t,n,c,i,a,s,o)}return t}var l=new y_(null);return r.foreach((function(e,t){var r=Zb(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),X_(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==n_.LISTEN_COMPLETE)throw O("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=p_(t,a.getNode(),a.isFullyInitialized()||ew(n),a.isFiltered());return G_(e,o,n,r,H_,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=v_(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Hw(v_(t)))}}(t,a,f),{viewCache:a,changes:f}}function G_(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=j_(r,n))return t;if(ew(n))if(D(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=m_(t),l=M_(r,c instanceof Fw?c:Fw.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=L_(r,m_(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=Gb(n);if(".priority"===h){D(1===Qb(n),"Can't have a priority with additional path components");var d=u.getNode(),p=F_(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=Yb(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var y=F_(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(h).updateChild(m,y):u.getNode().getImmediateChild(h)}else v=V_(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,m,i,a):u.getNode()}}return d_(t,o,u.isFullyInitialized()||ew(n),e.filter.filtersNodes())}function Q_(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(ew(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=Gb(n);if(!c.isCompleteForPath(n)&&Qb(n)>1)return t;var d=Yb(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,H_,null)}var v=p_(t,u,c.isFullyInitialized()||ew(n),l.filtersNodes());return G_(e,v,n,i,new W_(i,v,a),s)}function Y_(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new W_(i,t,a);if(ew(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=d_(t,u,!0,e.filter.filtersNodes());else{var f=Gb(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=d_(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=Yb(n),p=c.getNode().getImmediateChild(f);if(ew(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===Jb(d)&&v.getChild(Xb(d)).isEmpty()?v:v.updateChild(d,r):Fw.EMPTY_NODE}if(p.equals(h))s=t;else s=d_(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function J_(e,t){return e.eventCache.isCompleteForChild(t)}function $_(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function X_(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=ew(n)?r:new y_(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=$_(0,t.serverCache.getNode().getImmediateChild(n),r);c=Q_(e,c,new Wb(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var f=$_(0,t.serverCache.getNode().getImmediateChild(n),r);c=Q_(e,c,new Wb(n),f,i,a,o,s)}})),c}var Z_;function ex(e,t){var n=m_(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ew(t)&&!n.getImmediateChild(Gb(t)).isEmpty())?n.getChild(t):null}function tx(e,t,n,r){t.type===n_.MERGE&&null!==t.source.queryId&&(D(m_(e.viewCache_),"We should always have a full cache before handling merges"),D(v_(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=K_(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,D(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),D(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),D(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,nx(e,s.changes,s.viewCache.eventCache.getNode(),null)}function nx(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),f_(e,i,"child_removed",t,r,n),f_(e,i,"child_added",t,r,n),f_(e,i,"child_moved",a,r,n),f_(e,i,"child_changed",t,r,n),f_(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var rx;function ix(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return D(null!=a,"SyncTree gave us an op for an invalid query."),tx(a,t,n,r)}var o,s=[],u=y(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(tx(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function ax(e,t){var n,r=null,i=y(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||ex(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var ox=E((function e(t){w(this,e),this.listenProvider_=t,this.syncPointTree_=new y_(null),this.pendingWriteTree_={visibleWrites:g_.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function sx(e,t,n,r,i){return function(e,t,n,r,i){D(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=k_(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?hx(e,new u_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ux(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(A_(e.pendingWriteTree_,t)){var i=new y_(null);return null!=r.snap?i=i.set(Kb(),!0):hb(r.children,(function(e){i=i.set(new Wb(e),!0)})),hx(e,new s_(r.path,i,n))}return[]}function cx(e,t,n){return hx(e,new u_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function lx(e,t,n,r){var i=vx(e,r);if(null!=i){var a=mx(i),o=a.path,s=a.queryId,u=tw(o,t);return yx(e,o,new u_(a_(s),u,n))}return[]}function fx(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ax(n,tw(e,t));if(r)return r}));return O_(r,t,i,n,!0)}function hx(e,t){return dx(t,e.syncPointTree_,null,N_(e.pendingWriteTree_,Kb()))}function dx(e,t,n,r){if(ew(e.path))return px(e,t,n,r);var i=t.get(Kb());null==n&&null!=i&&(n=ax(i,Kb()));var a=[],o=Gb(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=z_(r,o);a=a.concat(dx(s,u,c,l))}return i&&(a=a.concat(ix(i,e,r,n))),a}function px(e,t,n,r){var i=t.get(Kb());null==n&&null!=i&&(n=ax(i,Kb()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=z_(r,t),u=e.operationForChild(t);u&&(a=a.concat(px(u,i,o,s)))})),i&&(a=a.concat(ix(i,e,r,n))),a}function vx(e,t){return e.tagToQueryMap.get(t)}function mx(e){var t=e.indexOf("$");return D(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Wb(e.substr(0,t))}}function yx(e,t,n){var r=e.syncPointTree_.get(t);return D(r,"Missing sync point for query tag that we're tracking"),ix(r,n,N_(e.pendingWriteTree_,t),null)}var gx=function(){function e(t){w(this,e),this.node_=t}return E(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),kx=function(){function e(t,n){w(this,e),this.syncTree_=t,this.path_=n}return E(e,[{key:"getImmediateChild",value:function(t){var n=Zb(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return fx(this.syncTree_,this.path_)}}]),e}(),bx=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},wx=function(e,t,n){return e&&"object"===typeof e?(D(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?_x(e[".sv"],t,n):"object"===typeof e[".sv"]?xx(e[".sv"],t):void D(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},_x=function(e,t,n){if("timestamp"===e)return n.timestamp;D(!1,"Unexpected server value: "+e)},xx=function(e,t,n){e.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&D(!1,"Unexpected increment value: "+r);var i=t.node();if(D(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Ex=function(e,t,n,r){return Cx(t,new kx(n,e),r)},Sx=function(e,t,n){return Cx(e,new gx(t),n)};function Cx(e,t,n){var r,i=e.getPriority().val(),a=wx(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=wx(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Tw(s,Vw(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Tw(a))),u.forEachChild(Rw,(function(e,i){var a=Cx(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Tx=E((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};w(this,e),this.name=t,this.parent=n,this.node=r}));function Ix(e,t){for(var n=t instanceof Wb?t:new Wb(t),r=e,i=Gb(n);null!==i;){var a=ce(r.node.children,i)||{children:{},childCount:0};r=new Tx(i,r,a),i=Gb(n=Yb(n))}return r}function Nx(e){return e.node.value}function Ax(e,t){e.node.value=t,Lx(e)}function Rx(e){return e.node.childCount>0}function Px(e,t){hb(e.node.children,(function(n,r){t(new Tx(n,e,r))}))}function Dx(e,t,n,r){n&&!r&&t(e),Px(e,(function(e){Dx(e,t,!0,r)})),n&&r&&t(e)}function Ox(e){return new Wb(null===e.parent?e.name:Ox(e.parent)+"/"+e.name)}function Lx(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Nx(e)&&!Rx(e)}(n),i=ue(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Lx(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Lx(e))}(e.parent,e.name,e)}var Mx=/[\[\].#$\/\u0000-\u001F\u007F]/,Fx=/[\[\].#$\u0000-\u001F\u007F]/,jx=10485760,Ux=function(e){return"string"===typeof e&&0!==e.length&&!Mx.test(e)},Vx=function(e){return"string"===typeof e&&0!==e.length&&!Fx.test(e)},zx=function(e,t,n,r){r&&void 0===t||Bx(be(e,"value"),t,n)},Bx=function e(t,n,r){var i=r instanceof Wb?new iw(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+ow(i));if("function"===typeof n)throw new Error(t+"contains a function "+ow(i)+" with contents = "+n.toString());if(ib(n))throw new Error(t+"contains "+n.toString()+" "+ow(i));if("string"===typeof n&&n.length>jx/3&&we(n)>jx)throw new Error(t+"contains a string greater than "+jx+" utf8 bytes "+ow(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(hb(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Ux(n)))throw new Error(t+" contains an invalid key ("+n+") "+ow(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=we(u),aw(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=we(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+ow(i)+" in addition to actual children.")}},qx=function(e,t,n,r){if((!r||void 0!==n)&&!Vx(n))throw new Error(be(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Hx=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qx(e,t,n,r)},Wx=function(e,t){if(".info"===Gb(t))throw new Error(e+" failed = Can't modify data under /.info/")},Kx=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ux(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Vx(e)}(n))throw new Error(be(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Gx=E((function e(){w(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Qx(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||nw(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Yx(e,t,n){Qx(e,n),Jx(e,(function(e){return rw(e,t)||rw(t,e)}))}function Jx(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?($x(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function $x(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Jk&&Zk("event: "+n.toString()),mb(r)}}}var Xx="repo_interrupt",Zx=25,eE=function(){function e(t,n,r,i){w(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zw(),this.transactionQueueTree_=new Tx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return E(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function tE(e,t,n){if(e.stats_=Rb(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new $w(e.repoInfo_,(function(t,n,r,i){iE(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return aE(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new cw(e.repoInfo_,t,(function(t,n,r,i){iE(e,t,n,r,i)}),(function(t){aE(e,t)}),(function(t){!function(e,t){hb(t,(function(t,n){oE(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Ab[n]||(Ab[n]=t()),Ab[n]}(e.repoInfo_,(function(){return new i_(e.stats_,e.server_)})),e.infoData_=new Xw,e.infoSyncTree_=new ox({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=cx(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),oE(e,"connected",!1),e.serverSyncTree_=new ox({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Yx(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function nE(e){var t=e.infoData_.getNode(new Wb(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function rE(e){return bx({timestamp:nE(e)})}function iE(e,t,n,r,i){e.dataUpdateCount++;var a=new Wb(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=fe(n,(function(e){return Vw(e)}));o=function(e,t,n,r){var i=vx(e,r);if(i){var a=mx(i),o=a.path,s=a.queryId,u=tw(o,t),c=y_.fromObject(n);return yx(e,o,new c_(a_(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Vw(n);o=lx(e.serverSyncTree_,a,u,i)}else if(r){var c=fe(n,(function(e){return Vw(e)}));o=function(e,t,n){var r=y_.fromObject(n);return hx(e,new c_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Vw(n);o=cx(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=pE(e,a)),Yx(e.eventQueue_,f,o)}function aE(e,t){oE(e,"connected",t),!1===t&&function(e){lE(e,"onDisconnectEvents");var t=rE(e),n=Zw();t_(e.onDisconnect_,Kb(),(function(r,i){var a=Ex(r,i,e.serverSyncTree_,t);e_(n,r,a)}));var r=[];t_(n,Kb(),(function(t,n){r=r.concat(cx(e.serverSyncTree_,t,n));var i=kE(e,t);pE(e,i)})),e.onDisconnect_=Zw(),Yx(e.eventQueue_,Kb(),r)}(e)}function oE(e,t,n){var r=new Wb("/.info/"+t),i=Vw(n);e.infoData_.updateSnapshot(r,i);var a=cx(e.infoSyncTree_,r,i);Yx(e.eventQueue_,r,a)}function sE(e){return e.nextWriteId_++}function uE(e,t,n,r,i){lE(e,"set",{path:t.toString(),value:n,priority:r});var a=rE(e),o=Vw(n,r),s=fx(e.serverSyncTree_,t),u=Sx(o,s,a),c=sE(e),l=sx(e.serverSyncTree_,t,u,c,!0);Qx(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||rb("set at "+t+" failed: "+n);var o=ux(e.serverSyncTree_,c,!a);Yx(e.eventQueue_,t,o),fE(e,i,n,r)}));var f=kE(e,t);pE(e,f),Yx(e.eventQueue_,f,[])}function cE(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Xx)}function lE(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Zk.apply(void 0,[t].concat(r))}function fE(e,t,n,r){t&&mb((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function hE(e,t,n){return fx(e.serverSyncTree_,t,n)||Fw.EMPTY_NODE}function dE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||gE(e,t),Nx(t)){var n=mE(e,t);D(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=hE(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];D(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=tw(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){lE(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(ux(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);gE(e,Ix(e.transactionQueueTree_,t)),dE(e,e.transactionQueueTree_),Yx(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)mb(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{rb("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}pE(e,t)}}),o)}(e,Ox(t),n)}else Rx(t)&&Px(t,(function(t){dE(e,t)}))}function pE(e,t){var n=vE(e,t),r=Ox(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=tw(n,c.path),f=!1;if(D(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,s=c.abortReason,i=i.concat(ux(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Zx)f=!0,s="maxretry",i=i.concat(ux(e.serverSyncTree_,c.currentWriteId,!0));else{var h=hE(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Bx("transaction failed: Data returned ",d,c.path);var p=Vw(d);"object"===typeof d&&null!=d&&ue(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,m=rE(e),y=Sx(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=sE(e),o.splice(o.indexOf(v),1),i=(i=i.concat(sx(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(ux(e.serverSyncTree_,v,!0))}else f=!0,s="nodata",i=i.concat(ux(e.serverSyncTree_,c.currentWriteId,!0))}Yx(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);gE(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)mb(r[c]);dE(e,e.transactionQueueTree_)}(e,mE(e,n),r),r}function vE(e,t){var n,r=e.transactionQueueTree_;for(n=Gb(t);null!==n&&void 0===Nx(r);)r=Ix(r,n),n=Gb(t=Yb(t));return r}function mE(e,t){var n=[];return yE(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function yE(e,t,n){var r=Nx(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Px(t,(function(t){yE(e,t,n)}))}function gE(e,t){var n=Nx(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ax(t,n.length>0?n:void 0)}Px(t,(function(t){gE(e,t)}))}function kE(e,t){var n=Ox(vE(e,t)),r=Ix(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){bE(e,t)})),bE(e,r),Dx(r,(function(t){bE(e,t)})),n}function bE(e,t){var n=Nx(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(D(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(D(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ux(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Ax(t,void 0):n.length=a+1,Yx(e.eventQueue_,Ox(t),i);for(var s=0;s<r.length;s++)mb(r[s])}}var wE=function(e,t){var n=_E(e),r=n.namespace;"firebase.com"===n.domain&&nb(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||nb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rb("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Cb(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Wb(n.pathString)}},_E=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=y(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):rb("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},xE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",EE=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){w(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return E(e,[{key:"key",get:function(){return ew(this._path)?null:Jb(this._path)}},{key:"ref",get:function(){return new SE(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Jw(this._queryParams),t=lb(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Jw(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=_e(t))instanceof e))return!1;var n=this._repo===t._repo,r=nw(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}());var SE=function(e){d(n,e);var t=m(n);function n(e,r){return w(this,n),t.call(this,e,r,new Qw,!1)}return E(n,[{key:"parent",get:function(){var e=Xb(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(EE);function CE(e,t){return(e=_e(e))._checkNotDeleted("ref"),void 0!==t?TE(e._root,t):e._root}function TE(e,t){return null===Gb((e=_e(e))._path)?Hx("child","path",t,!1):qx("child","path",t,!1),new SE(e._repo,Zb(e._path,t))}function IE(e,t){e=_e(e),Wx("set",e._path),zx("set",t,e._path,!1);var n=new Y;return uE(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}!function(e){D(!Z_,"__referenceConstructor has already been defined"),Z_=e}(SE),function(e){D(!rx,"__referenceConstructor has already been defined"),rx=e}(SE);var NE="FIREBASE_DATABASE_EMULATOR_HOST",AE={},RE=!1;function PE(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||nb("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zk("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=wE(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[NE]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=wE(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new bb(bb.OWNER):new kb(e.name,e.options,t);Kx("Invalid Firebase Database URL",s),ew(s.path)||nb("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=AE[t.name];i||(i={},AE[t.name]=i);var a=i[e.toURLString()];a&&nb("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new eE(e,RE,n,r),i[e.toURLString()]=a,a}(u,e,l,new gb(e.name,n));return new DE(f,e)}var DE=function(){function e(t,n){w(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return E(e,[{key:"_repo",get:function(){return this._instanceStarted||(tE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new SE(this._repo,Kb())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=AE[t];n&&n[e.key]===e||nb("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),cE(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&nb("Cannot call "+e+" on a deleted database.")}}]),e}();function OE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt(),t=arguments.length>1?arguments[1]:void 0,n=ht(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){var r=K("database");r&&LE.apply(void 0,[n].concat(C(r)))}return n}function LE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=_e(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&nb("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&nb('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new bb(bb.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:J(r.mockUserToken,e.app.options.projectId);a=new bb(o)}!function(e,t,n,r){e.repoInfo_=new Cb("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}cw.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},cw.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Vk=e}(mt),ft(new xe("database",(function(e,t){var n=t.instanceIdentifier;return PE(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),kt(jk,Uk,e),kt(jk,Uk,"esm2017")}();var ME=n(184);var FE=function(){return ii(Lk,(function(e){if(e){var t=e.uid;b(g().mark((function n(){return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ek(gg(Fk,"users",t),{name:e.displayName,profileURL:e.photoURL,userID:t});case 3:return n.next=5,Sk(gg(Fk,"chats","test-chat"),{participants:Pk(t)});case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("Error adding document: ",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}})),(0,ME.jsx)("div",{className:"login-screen",children:(0,ME.jsxs)("div",{className:"login-container",children:[(0,ME.jsx)("img",{alt:"letter",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAAG1RJREFUeF7tXWtsXMd1PnP3xce+SS4pUg9L1NO0ZRgWgiBo0DJOXwJiwEghN0VrFEGRoq0DFEULJCmQHw2aNkBRFK1TwIEbF27RBEpToTYqN25d1k0bpAEN15YpWaJESqIoPkUuX/vevcWZy0uT1C5378zcu/dyz/0lm3fnznxzvplvzjkzw4AeQqCFEWAt3HZqOiEARAAygpZGgAjQ0t1PjScCkA20NAJEgJbufmo8EYBsoKURIAK0dPdT44kAZAMtjQARoKW7nxpPBCAbaGkEiAAt3f3UeCIA2UBLI0AEaOnup8YTAcgGWhoBIkBLdz81nghANtDSCBABWrr7qfFEALKBlkaACNDS3U+NJwKQDbQ0AkSAlu5+ajwRgGygpREgArR091PjiQBkAy2NABGgpbufGi9NgJGxsXCMtXdFO9u60xu5JxmDFGNaO0FLCKhGQNcrWV0vz8c7O99d3cgtrsxlHwwPD63LfMcyAcbGxoJrpWAqHAuf0Mvl54I+7WNM04ZCwUBQpiL0W0KgUQR0ACgWi/lyuTJWLld+ovt8F9dX1scj/sL80NBQodFy8L2GCTAyovvDiZuPR+Kdz2pM+7TPx570+/1tVj5G7xICdiBQKpVy5bL+bkWv/PtaeuPS+vLxK8PDrNTItxoiwMi7k/GuiO+F9lDo84GA/yADCDRSOL1DCDiJgM4nhtK9bD7/7Qdr5ReHnzyarvf9PQkwOjoaCHb2nPWH/H/e0R76JGOsIcLU+yj9nRCwEwFd1/VMNv/DUr70e4WNhffPnTtXrPW9mgb9o6mp9kTF92t+zfelYMB/1M4KU9mEgB0IFIqlyVKp/I1lf/nVTxw6lK32jZoEeO/m1B9EO9q+rGlawo7KUZmEgBMIlMuV9Hpm/U/Pnjj6jYYIMDIy2ZYcYF+MRMJ/7GOMtL4TvUTfsBWBSkUvZDYyX56/V/7r4eGjue0f2zED6LruuzJ+57lwuPMvfJrWY2utqHBCwEEEKpXK/EY2+7tDxw5dZIyVzU/vIMCPx8YfTUbCF0PB4KNWXKQOtoM+RQiIIqDnC4WrS2vrFz4+dOLqQwS4fPly6OCJx74dDXd8jrw9ohjT79yMAHqH1jPZ79y9nvv8+fMn8ljXrRngh+9dfb4vmfxWMBAIubkRVDdCQAaBYqmUX1pa+a2PnT35yhYBvv+v/3Xg5PFHXouGO8/JFE6/JQS8gEAml3t3dnbxmeGPP3GP6brOXn3trec72kMvPnbiWLijnbIbvNCJVEcxBLL5PHx46876ytrGC88/8/Sr7G/++b8jemn9m+Vy+VeTsSg7dewwxCJhsdLpV4SAixFY38jAjckpWFhO65qm/T3zh3+HvXLpjUfKFfYf5XL5KGY6JGIReOzEMaCZwMU9SVWzjEA2l4drN2+j8YOu6+Dz+SZ9mv4p9urltz+Vy2z8QK/ofrPURCwKj58kElhGmX7gSgRM459fWt6qH2OsFO7s/Hn26utvfS2Xy/8hrgW21z4Zj8Lpo0cgGul0ZaOoUoRAIwismbJnm/Fz7w9jelso8HX2yqUfvFkoln52d2FcDkUj8BjNBI3gTO+4EAFc8F4dvw2Lm7JndxWDAf+/sVcuvblYKBa7atUf1wSPnxykNYELO5iqVBsB0/gXdo38238RDAQesJf/8Y1SuVLx7QVmMhaF04NHIBomOURG534E0NtzffIuLCztvR/Gp2ll9q3vXcYI8Z6tQjkUj4bh7Knj0N5GgWL3m0Dr1jCXL8DY+AQsLq9wb89eD9o1e+niv+z91rYSkARPnD5BJGhd+3J1y9H4P7iBxl93J+RH3iArBMBfoYv0DMkhVxtCK1ZuLZOB6xN3YbGO7HnI2WOVAIYcisDZU4M0E7SipbmwzXzkH5+ABw3IHmkCmAWQHHKhJbRglUzjtzrym1BZWgPsxpe8Qy1ocS5qMga5uOyxoPkfmgH+7vW39Ex2xzbJhpv4UbAM4wTkHWoYOHpRGgH084/dmIQH6frenlofi4Q7gP3P/13Tb9+bgfVM1VMjGqooBsvIRdoQVPSSAgS48Y9PWl7wbskeAIiEO+HIQB+w0au39I1sFu7NzEuRgOcOHaNgmYL+pSL2QMDI7akf5NoLRAzoDvSloKMtZBAAX84VCnD73n3YyIjLoWQsAkOYO9RGm2rIitUjkOEpzZMNBblqfT0a7oDDAwcgFDBO/NkigEmCO5JyCBfGlECnvvNbvcRMLgdXb94Wlz2MQaQTjb9vy/gfIgD+DxVyqCsehVMkh1rdZpW1X43sCcPBvp6HYlc7ZgCzxiSHlPUdFSSJAG5muSotezofGvm3FsTmGmB3PZEESuTQqUG+2KCHELCKABr/GBq/xfSGLeNmhrfncP9O2bO9HlVnAPMFkkNWu4zeV4WACtkT2/T27JXBvCcBVHmHzE01lEqtyjz2dzm5fB4+GJ8Uyu0xkUHjxwVvcNPbUwuxugTAH+bzBbg9rSBYdvo4tIdIDu1v85VrnZHSfIu7OkUevMIF/fwoe+oZf1UvUK2PqpBDGCw7M/gId0fRQwjsRgB3cn0omduDZ1oN9D7s7ZGaAcwfIzt5sEwmd4inTQxCG80ExIBtCJibWWRye9D4D/f3NjTy1/UC1eodVXLoidPHiQREAY6AGtkThiP9vRCoo/l3Q97QGmD3jzLZLEwpyB0iOUQMUCV7MMgloiqECGCyluQQGbAMAqpkz5H+PggEtg42tFQlYQIY3qEi3J6+L5VFinuMaXulpT7bFy+j8V+5cYu7OkUew9uDskfc+C15gWpVUoUc6orH4BRutCfvkIgteO43PMg1cZcfVCv64IL3YF8K2kJB0SL476RmgC3vkJJUaiOLlIJlUv3p+h/zE9tuTMKixE6u+Ka3x+qCtxo4SgjA1wQKcodwJiASuN6GhStoGr/oyI9bcGNhdHWmLHt7alVaGQHwAyqCZUgC3FmG+zXp2T8IqMjtiUciMNDXLeTtcYQA5kwgvbMsHuWXdJAc2h8EMA6qldvJhcavcuQ3kVU6A2xfE8imUnclYkSCfWD/pvHXO6i25giNsgc1/wEMcom5OveC0RYCKJNDiU05RN4hT1JBhbcHTyHE3B5Zb49jEmj7h9TsLDOua2qjTTWeIgFPaZY8tweN366R31YJtJsE0nIIvUN4Fqmkz9dTFuThyoqc0ry9udzbY7o6/eplz45v1doSqRJ/VcEyvKSDUqlV9oz6stYzGbyHVzifH2uEI//B3h4IOTDg2bYG2A0tpk1M3puWSqXGI1cePz0IbUG56J/6bqcSEYF8oQhXrt+SOq4Qdw8ewgWvzSO/YxJohxzKF+CO5M4yJMHZM8eJBC7jXK5QhA+u3xQe+Z2UPY5LoO0fJDnkMstVUB08V/bDiTvCpzdgFfBG0oG+Hgg5PLs7JoG244ybaiYld5aRHFJguQqK4CP/ZlZnvTu5an0OZQ96e/wOyZ6mzgDmx9FTQHJIgQU2sYh8oQDvo+YXTmlmYCa2NcP4EbqmzABmnynJHaJgWVMowL09Andyba9ss2SPK2YAsxJcDk1Lnkod3wyW0UZ7R8ggcyeXWcFmyh5XEQAroySVOhEzIsZEAltJgBFevJlFJqXZiPCmmqL5d4PTVAm0vTIq5FB3IsZPpaZgmT0caPQG9r2+jiM/5vY47e2pVSfXEMCcCWRTqfFodrykg06gU0sCFSnNeIEKBrmateCthoirCKBKDuFMQCRQRwAVKc1ukj2uWwPs7iqSQ+qMV7YkNbInCgO93a6RPa4ngEo59NhJPIaRcodEiIDenrHxCak7ufA82EN97ljwekICba+kOu8QkcAqAbjx35iQ8vagn/+QS7w9nlgEV6ukKjmEqdThDtpo3wgRMLfn+sQdEN3GiN/AVJV+7u0xbmN06+O6RXA1oDDkPjkldyo1TsV4Ap1b3G9uNQie0iyZ24P7uQ/2ouzxubWZW/XyBAGwtiqOYcQjV86eJhLUsko0/vev35TK7eH5/H3o6nS/8SMOniEAVlaFHMLRCU+lDne0u350crKCPKWZ7+QSP64QZ9mBVA8EXS57POEFqjlKqUilJjm0A14VO7m6EnG+jdErI78JgKdmALPSKi7pIDlkoKlC9uCCFw+q9Zrxe04CbR+2SA7JCyQVsgdTT9Db08iFdPI1Vl+CJ2eAj2YC+Y32/EBevLPMQ7pVhRmo2MnVnYjzbYx+nzcWvNVw8zQBjCkcL+6Tu8IVF8ZnTw46cgyHCuOVLQMxu3IdI7xiC17cwG5EeHvB59Nkq9PU33ueAKq8Q93JOD+Ver97h2SDXAyDXIkY9KO3x4azOp1mw74gAIKm4hhG80De/Zo7hBjhZhYc+UU2sOO1RFz29PaAz8Oyx9Nu0L1GCFwYT9ydhkKxJDyQ9CTjPJV6vx2+ZRj/hFR6Q0dbGxw7POD69AYrnb9vZoBiqQT35xZhKb0CFV23gsFD7yIJcGfZfpFDsrLHBEjj2j8G/b3djp3cJtWRDfx4XxCgWCrD1MwspFfXhab23TjhIs/cVOP1mcAc+ReXV5RhE4+GHT2+sAE7Fn7F8wQolcowPbcgdR5lLfR6EnF+Z5kTh7QK9+AeP0RvzweSsqeq65AxQPcxrgW8GPzaN2sAw/jn4UF6VcnoVq2zvSqHVMmeWvzCWRKDYAMeyfqs2Q4njke3Y3RD479zfxZW1tTInj07mh+5glmk7s5tN9ugIqW5kT4zD7TFy6q9OhN4UgI5MfLvNgAeLDt13PUkMBLbxE9pbsTwd0gIj88EniMALnjv2yx7ahkB+sDPDB6BTpemUm9ksnBN8pRmn6ZBuVKxxANTDvX3piDgkX0AZgM9RQB0dU7dn4O0gOzRNI2779Ira4D6WOQxO/rs6eOuS/4qFIvw/oc3pdZDqe4khNvaYGp2HhBrKw9igwfdHup37nILK/Xz/BqgVCptenusL3gxX+VATxekupKAhnJnehbwBkPRB+XQEy4iAbbpPTR+iVOazcQ29PUvpVc51iIkMBbG6B2y924v0b57yOXthUVwsViC+/MLvGOsBrlwSj+Q6gbM9cF/45PJ5uDe7LwUCdwih7jskdzJhZ4uxMi8lqhS0WFpZYUHFq2SwAiWRXmukB33+qoyfM9IIDT+qdk5oSAXGjxu1MARG6fo7Y9sFimXQ3xhPNg0OcRlz+b5/CK5PYgHyp7+VPfW4GBihOWlV9dgakZQDmGwrM+ey61VksDVawAcfXAqxpHfagdjshbKnp6uBOCoVO3Joxy6NyM5E8SMYFkwBDU+o7K/tsrCCO8H129J3cllyh5zZtxdUcR8aXkFpudRDpUttcNMmUY55NSFd5YquPmyawmAIz8Cv6xI9tQCR4UcwpMQTjxyiN9ztXumEemUvX5jjMzrMH57CpZWVoWK56keyRgc6Kmf01OpVHgfTM+LyaHE5kZ5t8ohVxJASvb4NB6dRHlSa+TfbTXoOzc21YgtjHF+Qdfo4JGD0NedtI0EaPyzi0tw6+40bGQyIJLzh8af6kpwzV9r5K82E6D3TNg75GI55DoCGFmdmNsjLnuwg62OxLgmQO8QHgYrmkuKrla87O3ggRR0tLc1TMB6wzgu/PlMNTMPd2fmAEdlkUfTGHTH49Df19Ow8W9fEzxI48JYTA6Ze4fdJodcRQDV3h6rRqJCDiHx8IKO3u4kH2mRCI2OtLvriwEprNP8g2WYW1ziaxWra6EtbwdjgMl9fakuYU2OxEPZtZ+8Q64hAI78OLqtCKQ0o4ENHEhBd/xhb49VEpgzgUycAL+JswFutE/EopwMeD4+RknrzUxo4LjgRA8MGv3yyirgBnbRUR/rIiJ7auFmrkGmZuYsu0h57lA0zGdJt8wEriAABrnuCXt7MMjVzUfbesbVKBlUyKHd32pvC/FFMhKhoz3EtxRqzIhLVPQKlMtlyGTzsLy6Zhh9vtBodfd8j8ueRJwfXSI6E1VbE6BExUxczMuy8pjeIeMQreYHy5pOAO7qnF3gU6vV6Z2nN6S6AQM5+G+Vjwo5VKs+aARojGicnAAVneffWG1/vfbidxCbvh5x2VPrG7gu4d6hOYwTCJAgFuVHqjR7JmgqARC4u4IpzWjweN8ULq5UjfxVvUPTM3xh7LUHMentSnLNr2rkrzYTYDo69qEICWKRMBxucu5Q0whgyJ75zSCXNfMy0xtUyp5aNeDBMvQOrW8Ie4estU7+bXT/YuqHStmz15oAA5XYl9blEPC0CeMo9ebIoaYQwIjwovGvWZ727ZQ9tTo5k8sbuUPrG/LWaXMJGI3uSSZskT31SCAsh+J4dSqmUjtPAscJwL099+dgZQ2N35o18NyeAym+H9Uu2VOrRph3g8EyWe+QtRZbexuNHz1O6BRQvSaqVxPuHVpbhykhOQQQi0SaIoccJYDMgpfn9qS6IJVU5+2p16nV1gR3eSq1++QQlz1dCRhIOW/8Jk5IAsM7tAAoca083DvUhIWxYwSQS2zToL/HSGl2emTb3YnoqsSpftVFcoh7ezC9obur6XtzjVRqDJaJ7ScwL9lwKnfIEQJghJcHuQR2cuFmFp7S3ATZU1sOmWsYsWQ0KyNjvXdxQDA2+ySaPjhsnwlkUqm5dwiDZQ6cPWo7Abwue2oZIAauZhYewOJS2vIe2npG3ejf8Ux+9PHjIV5Or4nq1dGQQ+K5Q07JIVsJIJXSvJnPv30nVz3Qnf47kmBpZQ3mHywpi9w20gbU+9FwJ9/Mgsc3us34zTbw3KH0Ktx3cSq1bQSQS2n28fumqu3kasRAnHwHR7psLm/k7axad+tarSu6ClHuIDbNcBtarS/3Drk4ldoWAsgteI2dXE4Euax25l7vG5mSa/BgOQ3ZfB7KZbGU5WrfwBEeD56KdHRAb08S8JRmLz1cDi2v8H3dIhFjvjC2aWeZcgJw2TO3wBO6LG9g567Obq5p7Qrf2204SH6MFaytZ2Ajm+M32IhkcmKWEEZH8a4C3GwTC3caewwU5zzZjccOOSSRSo1ZtZwEihfGSgkg5+3xbXp77Mvtcaqz8Tto9KVymcsjToiNDBSLRb5gRlfh7gdHeUyO0zQfdLQFucZHww8FgvwaIrfqfCuYym60t8M7pIwAhrdnnssAq1mNGOTqT3XxEP5+6OhqRmHk+Zd4vgwSw8wAxYRQHNU1n8Yvm/P7/J47Xc0qCVAO4X5v67lDGCyLwECfurQJJQTAkR+ToZZFjH/zxDbMWffq9G7FAOhdI/2bu0gFSYCHEGACnQo5JE0AntszPQsrmC1pMbkHdT6mNOMiZ7+O/GTw1REw5RDmheGMaOXhO8vCnXB4oE/aEyZFAJ7SLLiZBXWtsZll/8oeK53aiu+awTLcECVCAuOGermdZcIEkNL8JHta0d6rthk9hXivmzgJ5NYEQgRA48dNIquY22OxK0n2WASsBV6XkkMAEI2E4YigHEICYMSm+tmBVcBH48fNIbgf1LLxk+xpAXMWayKSAC/ywyxSy3IIAPAEOkyatBgd19no2K1lYBBvpNpGkEvU1WlofvL2NIJ0a74j6x3iLlIr3iEd0jgDjAHAo/UgN4JceCeXgLfHt7+CXPWwor+LI4AzAbrT8URwkThBLNIJhw/0NeoivcpGx27+EzD27F5VllnwYnAH0xvweA5ydYobRiv9cksOCcYJGg6W6fol9pNrt76k6fD1WusA3AuLukwkwmsaP+b2UJCrlUxYvq2YSoLBshmeSm09ToAkwFMxcM9EjUevMPgKG/3g1k+Bpr8FwIK7X0TjxwsSRHZyofHjwUdu2skl3y1UgpMIGHJolZ9KLSaH8Eb7VA0S6AWosKfZj98bP+gPaJcB4PHtjTO8PUZWp9UIrzHy7+/cHicNoZW/ZcihNN9UI0ICzCLFYFkV79CVUrFyno2OjnZAR+LPAOA38UxXBBtH/um5RSnj70p8dCdXK3cgtV0eAVMOyZBgoLd7+0yArv+XILP8+wxAZ+9cm3gWdPayDnpCVvagL5Zye+Q7nUrYiYBKOcSALQPTf+OpM8cu8QDYj8bGkkEt9P1isfwzPMglkNVJ3h4yWbsR2JJDc4vWg2WMwVYWadD3n4VK/rOfGBpa2ooAv3Nt4jN378/+w8JSOmxV8xv5/MZOLvL22G0GrV2+IYeMc4csR4z5zZ7RjUcG+j/31JljryOSWwQYHR0N3Frc+MuVtY0v6Lre8FnjmNXJU5pjlNLc2qbpXOv57ZUrq/zKKCskYIxVIu1tL5/oi75w7ty54g4C4H+89vb/Hl1Or17MFwpP6Xr9/CBz5Kcgl3OdT18yEDDlEDpr8Hiaeg9joIeCwXfCnW3PffbTn5ww39+RBHfx4kUfRFLPrGWyf1UqVwb2KpRfS7R5dAnJnnrw09/tQMDIHUrzQxjqncIR8Punw+GOL0J65rULFy5sMeahLNCLF8eCvnj6V5ZWV75Zqegd1SqOxo8XG6CPldIb7OhaKrNRBMzcIcxTq0UCTWOZrnj0t0tLie9cuDC04+6pmmnQ333j7S+sZ7J/VKlUUrqub72HsgdPIMYT28j4G+0mes9OBGrJIcaYzhhbiHR2fPWXf/GnX6pWh5oEuHz5cmgZ2n8pl8t/tVQqn8QfG9sYe8jbY2dvUtlCCKAcWkyn+RWu5prA7/fdCAX9X0tqhe+dP38+b4kA+PLIyIj/Qa78aLbE/qRQKP7CwQMpjbw9Qv1DP3IAAdM7ND27UA6Fgm8EQPtKT0fl2vDwcM3LChraCTYyMhL2RVO/3t7e9gIDOAIA3jqbzwHw6ROuQCCn6/qdbC7/Ynl1/m+Hh4fX69WqIQJgIRd13Xfkw4lBX4V9BjT4OdD1cwCQrPcB+jsh4AACS8DYKFTgTR/TXxs/c2ziAmP1faNW9gKbjUBZFEweSrYF9GM604b1CjzNGN9R1idSngPg0Cf2HwK4HX1W1+Eq0+AtpldGckU2UViaWtpL7lheAzSC29jYWLAU6orn8/kegOIhpvkSPl2vuQuhkTLpHUKgGgJlxop6pbwMEJiqVMqLES27PDS0061pFbmGJZDVgul9QsALCBABvNBLVEfbECAC2AYtFewFBIgAXuglqqNtCBABbIOWCvYCAkQAL/QS1dE2BIgAtkFLBXsBASKAF3qJ6mgbAkQA26Clgr2AABHAC71EdbQNASKAbdBSwV5AgAjghV6iOtqGABHANmipYC8gQATwQi9RHW1DgAhgG7RUsBcQIAJ4oZeojrYhQASwDVoq2AsIEAG80EtUR9sQIALYBi0V7AUEiABe6CWqo20IEAFsg5YK9gICRAAv9BLV0TYEiAC2QUsFewEBIoAXeonqaBsCRADboKWCvYAAEcALvUR1tA2B/wfrFoSwBgXaZwAAAABJRU5ErkJggg=="}),(0,ME.jsx)("h1",{children:"Welcome to ChatApp"}),(0,ME.jsx)("button",{onClick:function(){(function(e,t,n){return Xi.apply(this,arguments)})(Lk,Mk).then((function(e){Wr.credentialFromResult(e).accessToken;var t=e.user;IE(CE(OE(),"users/"+t.uid),{username:t.displayName,profile:t.photoURL})})).catch((function(e){e.code,e.message,e.customData.email,Wr.credentialFromError(e)}))},children:"SIGN IN WITH GOOGLE"})]})})};var jE=function(e){var t=e.senderName,n=e.senderID,r=e.content,i=u(oo(Lk),1)[0];return(0,ME.jsxs)("div",{className:i&&n===i.uid?"message you":"message",children:[(0,ME.jsx)("p",{className:"sender side-text",children:t}),(0,ME.jsx)("p",{className:i&&n===i.uid?"msg-content":"msg-content msg-received",children:r})]})};function UE(e){if("string"!==typeof e||!e)throw new Error("expected a non-empty string, got: "+e)}function VE(e){if("number"!==typeof e)throw new Error("expected a number, got: "+e)}var zE=1,BE=1,qE="emoji",HE="keyvalue",WE="favorites",KE="tokens",GE="tokens",QE="unicode",YE="count",JE="group",$E="order",XE="group-order",ZE="eTag",eS="url",tS="skinTone",nS="readonly",rS="readwrite",iS="skinUnicodes",aS="skinUnicodes";function oS(e){return function(e,t){var n,r=new Set,i=[],a=y(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=t(o);r.has(s)||(r.add(s),i.push(o))}}catch(u){a.e(u)}finally{a.f()}return i}(e,(function(e){return e.unicode}))}function sS(e){var t;function n(t,n,r){var i=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t);if(r)for(var a=0,o=Object.entries(r);a<o.length;a++){var s=u(o[a],2),c=s[0],l=u(s[1],2),f=l[0],h=l[1];i.createIndex(c,f,{multiEntry:h})}return i}n(HE),n(qE,QE,(T(t={},GE,[KE,!0]),T(t,XE,[[JE,$E]]),T(t,iS,[aS,!0]),t)),n(WE,void 0,T({},YE,[""]))}var uS={},cS={},lS={};function fS(e,t,n){n.onerror=function(){return t(n.error)},n.onblocked=function(){return t(new Error("IDB blocked"))},n.onsuccess=function(){return e(n.result)}}function hS(){return hS=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=indexedDB.open(t,zE);uS[t]=r,r.onupgradeneeded=function(e){e.oldVersion<BE&&sS(r.result)},fS(e,n,r)}));case 2:return(n=e.sent).onclose=function(){return vS(t)},e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),hS.apply(this,arguments)}function dS(e){return cS[e]||(cS[e]=function(e){return hS.apply(this,arguments)}(e)),cS[e]}function pS(e,t,n,r){return new Promise((function(i,a){var o,s=e.transaction(t,n,{durability:"relaxed"}),u="string"===typeof t?s.objectStore(t):t.map((function(e){return s.objectStore(e)}));r(u,s,(function(e){o=e})),s.oncomplete=function(){return i(o)},s.onerror=function(){return a(s.error)}}))}function vS(e){var t=uS[e],n=t&&t.result;if(n){n.close();var r=lS[e];if(r){var i,a=y(r);try{for(a.s();!(i=a.n()).done;){(0,i.value)()}}catch(o){a.e(o)}finally{a.f()}}}delete uS[e],delete cS[e],delete lS[e]}function mS(e){return new Promise((function(t,n){vS(e),fS(t,n,indexedDB.deleteDatabase(e))}))}function yS(e,t){var n=lS[e];n||(n=lS[e]=[]),n.push(t)}var gS=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function kS(e){return e.split(/[\s_]+/).map((function(e){return!e.match(/\w/)||gS.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/\u2019/g,"'").toLowerCase()})).filter(Boolean)}var bS=2;function wS(e){return e.filter(Boolean).map((function(e){return e.toLowerCase()})).filter((function(e){return e.length>=bS}))}function _S(e){var t=e.map((function(e){var t=e.annotation,n=e.emoticon,r=e.group,i=e.order,a=e.shortcodes,o=e.skins,s=e.tags,u=e.emoji,c=e.version,l=C(new Set(wS([].concat(C((a||[]).map(kS).flat()),C(s.map(kS).flat()),C(kS(t)),[n])))).sort(),f={annotation:t,group:r,order:i,tags:s,tokens:l,unicode:u,version:c};if(n&&(f.emoticon=n),a&&(f.shortcodes=a),o){f.skinTones=[],f.skinUnicodes=[],f.skinVersions=[];var h,d=y(o);try{for(d.s();!(h=d.n()).done;){var p=h.value,v=p.tone,m=p.emoji,g=p.version;f.skinTones.push(v),f.skinUnicodes.push(m),f.skinVersions.push(g)}}catch(k){d.e(k)}finally{d.f()}}return f}));return t}function xS(e,t,n,r){e[t](n).onsuccess=function(e){return r&&r(e.target.result)}}function ES(e,t,n){xS(e,"get",t,n)}function SS(e,t,n){xS(e,"getAll",t,n)}function CS(e){e.commit&&e.commit()}function TS(e,t){var n,r=function(e,t){for(var n=e[0],r=1;r<e.length;r++){var i=e[r];t(n)>t(i)&&(n=i)}return n}(e,(function(e){return e.length})),i=[],a=y(r);try{var o=function(){var r=n.value;e.some((function(e){return-1===e.findIndex((function(e){return t(e)===t(r)}))}))||i.push(r)};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}return i}function IS(e){return NS.apply(this,arguments)}function NS(){return NS=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HS(t,HE,eS);case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function AS(e,t,n){return RS.apply(this,arguments)}function RS(){return RS=b(g().mark((function e(t,n,r){var i,a,o,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ZE,eS].map((function(e){return HS(t,HE,e)})));case 2:return i=e.sent,a=u(i,2),o=a[0],s=a[1],e.abrupt("return",o===r&&s===n);case 7:case"end":return e.stop()}}),e)}))),RS.apply(this,arguments)}function PS(e,t){return DS.apply(this,arguments)}function DS(){return DS=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 50,e.abrupt("return",pS(t,qE,nS,(function(e,t,r){var i;!function t(){e.getAll(i&&IDBKeyRange.lowerBound(i,!0),50).onsuccess=function(e){var a,o=e.target.result,s=y(o);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(i=u.unicode,n(u))return r(u)}}catch(c){s.e(c)}finally{s.f()}if(o.length<50)return r();t()}}()})));case 2:case"end":return e.stop()}}),e)}))),DS.apply(this,arguments)}function OS(e,t,n,r){return LS.apply(this,arguments)}function LS(){return LS=b(g().mark((function e(t,n,r,i){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=_S(n),e.next=4,pS(t,[qE,HE],rS,(function(e,t){var n,o,s=u(e,2),c=s[0],l=s[1],f=0;function h(){2===++f&&function(){if(n===i&&o===r)return;c.clear();var e,s=y(a);try{for(s.s();!(e=s.n()).done;){var u=e.value;c.put(u)}}catch(f){s.e(f)}finally{s.f()}l.put(i,ZE),l.put(r,eS),CS(t)}()}ES(l,ZE,(function(e){n=e,h()})),ES(l,eS,(function(e){o=e,h()}))}));case 4:return e.prev=4,e.finish(4);case 6:case"end":return e.stop()}}),e,null,[[0,,4,6]])}))),LS.apply(this,arguments)}function MS(e,t){return FS.apply(this,arguments)}function FS(){return FS=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pS(t,qE,nS,(function(e,t,r){var i=IDBKeyRange.bound([n,0],[n+1,0],!1,!0);SS(e.index(XE),i,r)})));case 1:case"end":return e.stop()}}),e)}))),FS.apply(this,arguments)}function jS(e,t){return US.apply(this,arguments)}function US(){return US=b(g().mark((function e(t,n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wS(kS(n))).length){e.next=3;break}return e.abrupt("return",[]);case 3:return e.abrupt("return",pS(t,qE,nS,(function(e,t,n){for(var i=[],a=function(){var e=TS(i,(function(e){return e.unicode}));n(e.sort((function(e,t){return e.order<t.order?-1:1})))},o=0;o<r.length;o++){var s=r[o],u=o===r.length-1?IDBKeyRange.bound(s,s+"\uffff",!1,!0):IDBKeyRange.only(s);SS(e.index(GE),u,(function(e){i.push(e),i.length===r.length&&a()}))}})));case 4:case"end":return e.stop()}}),e)}))),US.apply(this,arguments)}function VS(e,t){return zS.apply(this,arguments)}function zS(){return zS=b(g().mark((function e(t,n){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jS(t,n);case 2:if((r=e.sent).length){e.next=11;break}return i=function(e){return(e.shortcodes||[]).includes(n.toLowerCase())},e.next=7,PS(t,i);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=null;case 10:return e.abrupt("return",e.t0);case 11:return e.abrupt("return",r.filter((function(e){var t=(e.shortcodes||[]).map((function(e){return e.toLowerCase()}));return t.includes(n.toLowerCase())}))[0]||null);case 12:case"end":return e.stop()}}),e)}))),zS.apply(this,arguments)}function BS(e,t){return qS.apply(this,arguments)}function qS(){return qS=b(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pS(t,qE,nS,(function(e,t,r){return ES(e,n,(function(t){if(t)return r(t);ES(e.index(iS),n,(function(e){return r(e||null)}))}))})));case 1:case"end":return e.stop()}}),e)}))),qS.apply(this,arguments)}function HS(e,t,n){return pS(e,t,nS,(function(e,t,r){return ES(e,n,r)}))}function WS(e,t,n,r){return pS(e,t,rS,(function(e,t){e.put(r,n),CS(t)}))}function KS(e,t){return pS(e,WE,rS,(function(e,n){return ES(e,t,(function(r){e.put((r||0)+1,t),CS(n)}))}))}function GS(e,t,n){return 0===n?[]:pS(e,[WE,qE],nS,(function(e,r,i){var a=u(e,2),o=a[0],s=a[1],c=[];o.index(YE).openCursor(void 0,"prev").onsuccess=function(e){var r=e.target.result;if(!r)return i(c);function a(e){if(c.push(e),c.length===n)return i(c);r.continue()}var o=r.primaryKey,u=t.byName(o);if(u)return a(u);ES(s,o,(function(e){if(e)return a(e);r.continue()}))}}))}var QS="";var YS=["name","url"];function JS(e){!function(e){var t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||YS.some((function(t){return!(t in e[0])})));if(!t||n)throw new Error("Custom emojis are in the wrong format")}(e);var t,n=function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1},r=e.sort(n),i=function(e,t){var n,r=new Map,i=y(e);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=y(t(o));try{for(s.s();!(a=s.n()).done;){for(var c=a.value,l=r,f=0;f<c.length;f++){var h=c.charAt(f),d=l.get(h);d||(d=new Map,l.set(h,d)),l=d}var p=l.get(QS);p||(p=[],l.set(QS,p)),p.push(o)}}catch(v){s.e(v)}finally{s.f()}}}catch(v){i.e(v)}finally{i.f()}return function(e,t){for(var n=r,i=0;i<e.length;i++){var a=e.charAt(i),o=n.get(a);if(!o)return[];n=o}if(t)return n.get(QS)||[];for(var s=[],c=[n];c.length;){var l,f=C(c.shift().entries()).sort((function(e,t){return e[0]<t[0]?-1:1})),h=y(f);try{for(h.s();!(l=h.n()).done;){var d=u(l.value,2),p=d[0],m=d[1];p===QS?s.push.apply(s,C(m)):c.push(m)}}catch(v){h.e(v)}finally{h.f()}}return s}}(e,(function(e){return C(new Set((e.shortcodes||[]).map((function(e){return kS(e)})).flat()))})),a=function(e){return i(e,!0)},o=function(e){return i(e,!1)},s=new Map,c=new Map,l=y(e);try{for(l.s();!(t=l.n()).done;){var f=t.value;c.set(f.name.toLowerCase(),f);var h,d=y(f.shortcodes||[]);try{for(d.s();!(h=d.n()).done;){var p=h.value;s.set(p.toLowerCase(),f)}}catch(v){d.e(v)}finally{d.f()}}}catch(v){l.e(v)}finally{l.f()}return{all:r,search:function(e){var t=kS(e);return TS(t.map((function(e,n){return(n<t.length-1?a:o)(e)})),(function(e){return e.name})).sort(n)},byShortcode:function(e){return s.get(e.toLowerCase())},byName:function(e){return c.get(e.toLowerCase())}}}function $S(e){if(!e)return e;if(delete e.tokens,e.skinTones){var t=e.skinTones.length;e.skins=Array(t);for(var n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function XS(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}var ZS=["annotation","emoji","group","order","tags","version"];function eC(e){if(!e||!Array.isArray(e)||!e[0]||"object"!==typeof e[0]||ZS.some((function(t){return!(t in e[0])})))throw new Error("Emoji data is in the wrong format")}function tC(e,t){if(2!==Math.floor(e.status/100))throw new Error("Failed to fetch: "+t+":  "+e.status)}function nC(e){return rC.apply(this,arguments)}function rC(){return(rC=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"HEAD"});case 2:return tC(n=e.sent,t),XS(r=n.headers.get("etag")),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iC(e){return aC.apply(this,arguments)}function aC(){return(aC=b(g().mark((function e(t){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return tC(n=e.sent,t),XS(r=n.headers.get("etag")),e.next=8,n.json();case 8:return eC(i=e.sent),e.abrupt("return",[r,i]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oC(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=-1;++i<r;)t+=String.fromCharCode(n[i]);return t}function sC(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=-1;++i<t;)r[i]=e.charCodeAt(i);return n}function uC(e){return cC.apply(this,arguments)}function cC(){return(cC=b(g().mark((function e(t){var n,r,i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),r=sC(n),e.next=4,crypto.subtle.digest("SHA-1",r);case 4:return i=e.sent,a=oC(i),o=btoa(a),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lC(e,t){return fC.apply(this,arguments)}function fC(){return fC=b(g().mark((function e(t,n){var r,i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nC(n);case 2:if(i=e.sent){e.next=13;break}return e.next=6,iC(n);case 6:if(a=e.sent,i=a[0],r=a[1],i){e.next=13;break}return e.next=12,uC(r);case 12:i=e.sent;case 13:return e.next=15,AS(t,n,i);case 15:if(!e.sent){e.next=19;break}e.next=26;break;case 19:if(r){e.next=24;break}return e.next=22,iC(n);case 22:o=e.sent,r=o[1];case 24:return e.next=26,OS(t,r,n,i);case 26:case"end":return e.stop()}}),e)}))),fC.apply(this,arguments)}function hC(e,t){return dC.apply(this,arguments)}function dC(){return dC=b(g().mark((function e(t,n){var r,i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iC(n);case 2:if(r=e.sent,i=u(r,2),a=i[0],o=i[1],a){e.next=10;break}return e.next=9,uC(o);case 9:a=e.sent;case 10:return e.next=12,OS(t,o,n,a);case 12:case"end":return e.stop()}}),e)}))),dC.apply(this,arguments)}var pC,vC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.dataSource,r=void 0===n?"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json":n,i=t.locale,a=void 0===i?"en":i,o=t.customEmoji,s=void 0===o?[]:o;w(this,e),this.dataSource=r,this.locale=a,this._dbName="emoji-picker-element-".concat(this.locale),this._db=void 0,this._lazyUpdate=void 0,this._custom=JS(s),this._clear=this._clear.bind(this),this._ready=this._init()}return E(e,[{key:"_init",value:function(){var e=b(g().mark((function e(){var t,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dS(this._dbName);case 2:return t=this._db=e.sent,yS(this._dbName,this._clear),n=this.dataSource,e.next=7,IS(t);case 7:if(!e.sent){e.next=13;break}return e.next=11,hC(t,n);case 11:e.next=14;break;case 13:this._lazyUpdate=lC(t,n);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ready",value:function(){var e=b(g().mark((function e(){var t,n=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._ready||(n._ready=n._init()),e.abrupt("return",n._ready);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,t();case 3:if(this._db){e.next=6;break}return e.next=6,t();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEmojiByGroup",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VE(t),e.next=3,this.ready();case 3:return e.t0=oS,e.next=6,MS(this._db,t);case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1).map($S));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEmojiBySearchQuery",value:function(){var e=b(g().mark((function e(t){var n,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UE(t),e.next=3,this.ready();case 3:return n=this._custom.search(t),e.t0=oS,e.next=7,jS(this._db,t);case 7:return e.t1=e.sent,r=(0,e.t0)(e.t1).map($S),e.abrupt("return",[].concat(C(n),C(r)));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEmojiByShortcode",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UE(t),e.next=3,this.ready();case 3:if(!(n=this._custom.byShortcode(t))){e.next=6;break}return e.abrupt("return",n);case 6:return e.t0=$S,e.next=9,VS(this._db,t);case 9:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEmojiByUnicodeOrName",value:function(){var e=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UE(t),e.next=3,this.ready();case 3:if(!(n=this._custom.byName(t))){e.next=6;break}return e.abrupt("return",n);case 6:return e.t0=$S,e.next=9,BS(this._db,t);case 9:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPreferredSkinTone",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready();case 2:return e.next=4,HS(this._db,HE,tS);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=0;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPreferredSkinTone",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VE(t),e.next=3,this.ready();case 3:return e.abrupt("return",WS(this._db,HE,tS,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"incrementFavoriteEmojiCount",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UE(t),e.next=3,this.ready();case 3:return e.abrupt("return",KS(this._db,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTopFavoriteEmoji",value:function(){var e=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VE(t),e.next=3,this.ready();case 3:return e.next=5,GS(this._db,this._custom,t);case 5:return e.abrupt("return",e.sent.map($S));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"customEmoji",get:function(){return this._custom.all},set:function(e){this._custom=JS(e)}},{key:"_shutdown",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready();case 2:return e.prev=2,e.next=5,this._lazyUpdate;case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"_clear",value:function(){this._db=this._ready=this._lazyUpdate=void 0}},{key:"close",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._shutdown();case 2:return e.next=4,vS(this._dbName);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._shutdown();case 2:return e.next=4,mS(this._dbName);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mC(){}function yC(e){return e()}function gC(){return Object.create(null)}function kC(e){e.forEach(yC)}function bC(e){return"function"===typeof e}function wC(e,t){return e!=e?t==t:e!==t||e&&"object"===typeof e||"function"===typeof e}function _C(e,t){return pC||(pC=document.createElement("a")),pC.href=t,e===pC.href}var xC,EC="undefined"!==typeof window?window:"undefined"!==typeof globalThis?globalThis:global;function SC(e,t){e.appendChild(t)}function CC(e,t,n){e.insertBefore(t,n||null)}function TC(e){e.parentNode&&e.parentNode.removeChild(e)}function IC(e){return document.createElement(e)}function NC(e){return document.createTextNode(e)}function AC(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function RC(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function PC(e,t){t=""+t,e.data!==t&&(e.data=t)}function DC(e,t){e.value=null==t?"":t}function OC(e,t,n,r){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function LC(e){xC=e}function MC(e){(function(){if(!xC)throw new Error("Function called outside component initialization");return xC})().$$.on_mount.push(e)}var FC=[],jC=[],UC=[],VC=[],zC=Promise.resolve(),BC=!1;function qC(e){UC.push(e)}var HC=new Set,WC=0;function KC(){if(0===WC){var e=xC;do{try{for(;WC<FC.length;){var t=FC[WC];WC++,LC(t),GC(t.$$)}}catch(i){throw FC.length=0,WC=0,i}for(LC(null),FC.length=0,WC=0;jC.length;)jC.pop()();for(var n=0;n<UC.length;n+=1){var r=UC[n];HC.has(r)||(HC.add(r),r())}UC.length=0}while(FC.length);for(;VC.length;)VC.pop()();BC=!1,HC.clear(),LC(e)}}function GC(e){if(null!==e.fragment){e.update(),kC(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(qC)}}var QC=new Set;function YC(e,t){e.d(1),t.delete(e.key)}function JC(e,t,n,r,i,a,o,s,u,c,l,f){for(var h=e.length,d=a.length,p=h,v={};p--;)v[e[p].key]=p;var m=[],y=new Map,g=new Map,k=[];p=d;for(var b=function(){var e=f(i,a,p),s=n(e),u=o.get(s);u?r&&k.push((function(){return u.p(e,t)})):(u=c(s,e)).c(),y.set(s,m[p]=u),s in v&&g.set(s,Math.abs(p-v[s]))};p--;)b();var w=new Set,_=new Set;function x(e){!function(e,t){e&&e.i&&(QC.delete(e),e.i(t))}(e,1),e.m(s,l),o.set(e.key,e),l=e.first,d--}for(;h&&d;){var E=m[d-1],S=e[h-1],C=E.key,T=S.key;E===S?(l=E.first,h--,d--):y.has(T)?!o.has(C)||w.has(C)?x(E):_.has(T)?h--:g.get(C)>g.get(T)?(_.add(C),x(E)):(w.add(T),h--):(u(S,o),h--)}for(;h--;){var I=e[h];y.has(I.key)||u(I,o)}for(;d;)x(m[d-1]);return kC(k),m}function $C(e,t){var n=e.$$;null!==n.fragment&&(!function(e){var t=[],n=[];UC.forEach((function(r){return-1===e.indexOf(r)?t.push(r):n.push(r)})),n.forEach((function(e){return e()})),UC=t}(n.after_update),kC(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function XC(e,t){-1===e.$$.dirty[0]&&(FC.push(e),BC||(BC=!0,zC.then(KC)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ZC(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],u=xC;LC(e);var c=e.$$={fragment:null,ctx:[],props:a,update:mC,not_equal:i,bound:gC(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:gC(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);var l=!1;c.ctx=n?n(e,t.props||{},(function(t,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&i(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),l&&XC(e,t)),n})):[],c.update(),l=!0,kC(c.before_update),c.fragment=!!r&&r(c.ctx),t.target&&(c.fragment&&c.fragment.c(),function(e,t,n,r){var i=e.$$,a=i.fragment,o=i.after_update;a&&a.m(t,n),r||qC((function(){var t,n=e.$$.on_mount.map(yC).filter(bC);e.$$.on_destroy?(t=e.$$.on_destroy).push.apply(t,C(n)):kC(n),e.$$.on_mount=[]})),o.forEach(qC)}(e,t.target,void 0,void 0),KC()),LC(u)}var eT=function(){function e(){w(this,e)}return E(e,[{key:"$destroy",value:function(){$C(this,1),this.$destroy=mC}},{key:"$on",value:function(e,t){if(!bC(t))return mC;var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},{key:"$set",value:function(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}]),e}(),tT=[[-1,"\u2728","custom"],[0,"\ud83d\ude00","smileys-emotion"],[1,"\ud83d\udc4b","people-body"],[3,"\ud83d\udc31","animals-nature"],[4,"\ud83c\udf4e","food-drink"],[5,"\ud83c\udfe0\ufe0f","travel-places"],[6,"\u26bd","activities"],[7,"\ud83d\udcdd","objects"],[8,"\u26d4\ufe0f","symbols"],[9,"\ud83c\udfc1","flags"]].map((function(e){var t=u(e,3);return{id:t[0],emoji:t[1],name:t[2]}})),nT=tT.slice(1),rT=tT[0],iT="function"===typeof requestIdleCallback?requestIdleCallback:setTimeout;function aT(e){return e.unicode.includes("\u200d")}var oT,sT={"\ud83e\udee8":15,"\ud83e\udee0":14,"\ud83e\udd72":13.1,"\ud83e\udd7b":12.1,"\ud83e\udd70":11,"\ud83e\udd29":5,"\ud83d\udc71\u200d\u2640\ufe0f":4,"\ud83e\udd23":3,"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f":2,"\ud83d\ude00":1,"\ud83d\ude10\ufe0f":.7,"\ud83d\ude03":.6},uT=["\ud83d\ude0a","\ud83d\ude12","\u2665\ufe0f","\ud83d\udc4d\ufe0f","\ud83d\ude0d","\ud83d\ude02","\ud83d\ude2d","\u263a\ufe0f","\ud83d\ude14","\ud83d\ude29","\ud83d\ude0f","\ud83d\udc95","\ud83d\ude4c","\ud83d\ude18"],cT='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',lT=function(e,t){return e<t?-1:e>t?1:0},fT=function(e,t){var n=document.createElement("canvas");n.width=n.height=1;var r=n.getContext("2d");return r.textBaseline="top",r.font="100px ".concat(cT),r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data},hT=function(e,t){var n=C(e).join(",");return n===C(t).join(",")&&!n.startsWith("0,0,0,")};function dT(e){var t=fT(e,"#000"),n=fT(e,"#fff");return t&&n&&hT(t,n)}var pT=function(){return oT||(oT=new Promise((function(e){return iT((function(){return e(function(){var e=Object.entries(sT);try{for(var t=0,n=e;t<n.length;t++){var r=u(n[t],2),i=r[0],a=r[1];if(dT(i))return a}}catch(o){}return e[0][1]}())}))}))),oT},vT=new Map,mT="\ufe0f",yT="\ud83c",gT="\u200d",kT=127995,bT=57339;function wT(e){e.preventDefault(),e.stopPropagation()}function _T(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function xT(e,t){var n,r=new Set,i=[],a=y(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=t(o);r.has(s)||(r.add(s),i.push(o))}}catch(u){a.e(u)}finally{a.f()}return i}function ET(e,t){var n=function(e){var n,r={},i=y(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;"number"===typeof a.tone&&a.version<=t&&(r[a.tone]=a.unicode)}}catch(o){i.e(o)}finally{i.f()}return r};return e.map((function(e){var t=e.unicode,r=e.skins,i=e.shortcodes,a=e.url,o=e.name;return{unicode:t,name:o,shortcodes:i,url:a,category:e.category,id:t||o,skins:r&&n(r),title:(i||[]).join(", ")}}))}var ST,CT=requestAnimationFrame,TT="function"===typeof ResizeObserver;function IT(e){var t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}var NT=EC.Map;function AT(e,t,n){var r=e.slice();return r[64]=t[n],r[66]=n,r}function RT(e,t,n){var r=e.slice();return r[67]=t[n],r[66]=n,r}function PT(e,t,n){var r=e.slice();return r[64]=t[n],r[66]=n,r}function DT(e,t,n){var r=e.slice();return r[70]=t[n],r}function OT(e,t,n){var r=e.slice();return r[73]=t[n],r[66]=n,r}function LT(e,t){var n,r,i,a,o,s,u,c=t[73]+"";return{key:e,first:null,c:function(){n=IC("div"),r=NC(c),RC(n,"id",i="skintone-"+t[66]),RC(n,"class",a="emoji "+(t[66]===t[20]?"active":"")),RC(n,"aria-selected",o=t[66]===t[20]),RC(n,"role","option"),RC(n,"title",s=t[0].skinTones[t[66]]),RC(n,"aria-label",u=t[0].skinTones[t[66]]),this.first=n},m:function(e,t){CC(e,n,t),SC(n,r)},p:function(e,l){t=e,512&l[0]&&c!==(c=t[73]+"")&&PC(r,c),512&l[0]&&i!==(i="skintone-"+t[66])&&RC(n,"id",i),1049088&l[0]&&a!==(a="emoji "+(t[66]===t[20]?"active":""))&&RC(n,"class",a),1049088&l[0]&&o!==(o=t[66]===t[20])&&RC(n,"aria-selected",o),513&l[0]&&s!==(s=t[0].skinTones[t[66]])&&RC(n,"title",s),513&l[0]&&u!==(u=t[0].skinTones[t[66]])&&RC(n,"aria-label",u)},d:function(e){e&&TC(n)}}}function MT(e,t){var n,r,i,a,o,s,u,c,l,f=t[70].emoji+"";function h(){return t[50](t[70])}return{key:e,first:null,c:function(){n=IC("button"),r=IC("div"),i=NC(f),RC(r,"class","nav-emoji emoji"),RC(n,"role","tab"),RC(n,"class","nav-button"),RC(n,"aria-controls",a="tab-"+t[70].id),RC(n,"aria-label",o=t[0].categories[t[70].name]),RC(n,"aria-selected",s=!t[4]&&t[13].id===t[70].id),RC(n,"title",u=t[0].categories[t[70].name]),this.first=n},m:function(e,t){CC(e,n,t),SC(n,r),SC(r,i),c||(l=AC(n,"click",h),c=!0)},p:function(e,r){t=e,4096&r[0]&&f!==(f=t[70].emoji+"")&&PC(i,f),4096&r[0]&&a!==(a="tab-"+t[70].id)&&RC(n,"aria-controls",a),4097&r[0]&&o!==(o=t[0].categories[t[70].name])&&RC(n,"aria-label",o),12304&r[0]&&s!==(s=!t[4]&&t[13].id===t[70].id)&&RC(n,"aria-selected",s),4097&r[0]&&u!==(u=t[0].categories[t[70].name])&&RC(n,"title",u)},d:function(e){e&&TC(n),c=!1,l()}}}function FT(e){var t,n;return{c:function(){RC(t=IC("img"),"class","custom-emoji"),_C(t.src,n=e[64].url)||RC(t,"src",n),RC(t,"alt",""),RC(t,"loading","lazy")},m:function(e,n){CC(e,t,n)},p:function(e,r){32768&r[0]&&!_C(t.src,n=e[64].url)&&RC(t,"src",n)},d:function(e){e&&TC(t)}}}function jT(e){var t,n=e[27](e[64],e[8])+"";return{c:function(){t=NC(n)},m:function(e,n){CC(e,t,n)},p:function(e,r){33024&r[0]&&n!==(n=e[27](e[64],e[8])+"")&&PC(t,n)},d:function(e){e&&TC(t)}}}function UT(e,t){var n,r,i,a,o,s,u;function c(e,t){return e[64].unicode?jT:FT}var l=c(t),f=l(t);return{key:e,first:null,c:function(){n=IC("button"),f.c(),RC(n,"role",r=t[4]?"option":"menuitem"),RC(n,"aria-selected",i=t[4]?t[66]==t[5]:""),RC(n,"aria-label",a=t[28](t[64],t[8])),RC(n,"title",o=t[64].title),RC(n,"class",s="emoji "+(t[4]&&t[66]===t[5]?"active":"")),RC(n,"id",u="emo-"+t[64].id),this.first=n},m:function(e,t){CC(e,n,t),f.m(n,null)},p:function(e,h){l===(l=c(t=e))&&f?f.p(t,h):(f.d(1),(f=l(t))&&(f.c(),f.m(n,null))),16&h[0]&&r!==(r=t[4]?"option":"menuitem")&&RC(n,"role",r),32816&h[0]&&i!==(i=t[4]?t[66]==t[5]:"")&&RC(n,"aria-selected",i),33024&h[0]&&a!==(a=t[28](t[64],t[8]))&&RC(n,"aria-label",a),32768&h[0]&&o!==(o=t[64].title)&&RC(n,"title",o),32816&h[0]&&s!==(s="emoji "+(t[4]&&t[66]===t[5]?"active":""))&&RC(n,"class",s),32768&h[0]&&u!==(u="emo-"+t[64].id)&&RC(n,"id",u)},d:function(e){e&&TC(n),f.d()}}}function VT(e,t){for(var n,r,i,a,o,s,u,c,l=(t[4]?t[0].searchResultsLabel:t[67].category?t[67].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",f=[],h=new NT,d=t[67].emojis,p=function(e){return e[64].id},v=0;v<d.length;v+=1){var m=PT(t,d,v),y=p(m);h.set(y,f[v]=UT(y,m))}return{key:e,first:null,c:function(){n=IC("div"),r=NC(l),o=IC("div");for(var e=0;e<f.length;e+=1)f[e].c();RC(n,"id",i="menu-label-"+t[66]),RC(n,"class",a="category "+(1===t[15].length&&""===t[15][0].category?"gone":"")),RC(n,"aria-hidden","true"),RC(o,"class","emoji-menu"),RC(o,"role",s=t[4]?"listbox":"menu"),RC(o,"aria-labelledby",u="menu-label-"+t[66]),RC(o,"id",c=t[4]?"search-results":""),this.first=n},m:function(e,t){CC(e,n,t),SC(n,r),CC(e,o,t);for(var i=0;i<f.length;i+=1)f[i]&&f[i].m(o,null)},p:function(e,v){t=e,40977&v[0]&&l!==(l=(t[4]?t[0].searchResultsLabel:t[67].category?t[67].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&PC(r,l),32768&v[0]&&i!==(i="menu-label-"+t[66])&&RC(n,"id",i),32768&v[0]&&a!==(a="category "+(1===t[15].length&&""===t[15][0].category?"gone":""))&&RC(n,"class",a),402686256&v[0]&&(d=t[67].emojis,f=JC(f,v,p,1,t,d,h,o,YC,UT,null,PT)),16&v[0]&&s!==(s=t[4]?"listbox":"menu")&&RC(o,"role",s),32768&v[0]&&u!==(u="menu-label-"+t[66])&&RC(o,"aria-labelledby",u),16&v[0]&&c!==(c=t[4]?"search-results":"")&&RC(o,"id",c)},d:function(e){e&&TC(n),e&&TC(o);for(var t=0;t<f.length;t+=1)f[t].d()}}}function zT(e){var t,n;return{c:function(){RC(t=IC("img"),"class","custom-emoji"),_C(t.src,n=e[64].url)||RC(t,"src",n),RC(t,"alt",""),RC(t,"loading","lazy")},m:function(e,n){CC(e,t,n)},p:function(e,r){1024&r[0]&&!_C(t.src,n=e[64].url)&&RC(t,"src",n)},d:function(e){e&&TC(t)}}}function BT(e){var t,n=e[27](e[64],e[8])+"";return{c:function(){t=NC(n)},m:function(e,n){CC(e,t,n)},p:function(e,r){1280&r[0]&&n!==(n=e[27](e[64],e[8])+"")&&PC(t,n)},d:function(e){e&&TC(t)}}}function qT(e,t){var n,r,i,a;function o(e,t){return e[64].unicode?BT:zT}var s=o(t),u=s(t);return{key:e,first:null,c:function(){n=IC("button"),u.c(),RC(n,"role","menuitem"),RC(n,"aria-label",r=t[28](t[64],t[8])),RC(n,"title",i=t[64].title),RC(n,"class","emoji"),RC(n,"id",a="fav-"+t[64].id),this.first=n},m:function(e,t){CC(e,n,t),u.m(n,null)},p:function(e,c){s===(s=o(t=e))&&u?u.p(t,c):(u.d(1),(u=s(t))&&(u.c(),u.m(n,null))),1280&c[0]&&r!==(r=t[28](t[64],t[8]))&&RC(n,"aria-label",r),1024&c[0]&&i!==(i=t[64].title)&&RC(n,"title",i),1024&c[0]&&a!==(a="fav-"+t[64].id)&&RC(n,"id",a)},d:function(e){e&&TC(n),u.d()}}}function HT(e){for(var t,n,r,i,a,o,s,u,c,l,f,h,d,p,v,m,y,g,k,b,w,_,x,E,S,C,T,I,N,A,R,P,D,O,L,M,F,j,U,V,z,B,q,H,W=e[0].searchLabel+"",K=e[0].searchDescription+"",G=e[0].skinToneDescription+"",Q=[],Y=new NT,J=[],$=new NT,X=[],Z=new NT,ee=[],te=new NT,ne=e[9],re=function(e){return e[73]},ie=0;ie<ne.length;ie+=1){var ae=OT(e,ne,ie),oe=re(ae);Y.set(oe,Q[ie]=LT(oe,ae))}for(var se=e[12],ue=function(e){return e[70].id},ce=0;ce<se.length;ce+=1){var le=DT(e,se,ce),fe=ue(le);$.set(fe,J[ce]=MT(fe,le))}for(var he=e[15],de=function(e){return e[67].category},pe=0;pe<he.length;pe+=1){var ve=RT(e,he,pe),me=de(ve);Z.set(me,X[pe]=VT(me,ve))}for(var ye=e[10],ge=function(e){return e[64].id},ke=0;ke<ye.length;ke+=1){var be=AT(e,ye,ke),we=ge(be);te.set(we,ee[ke]=qT(we,be))}return{c:function(){t=IC("section"),n=IC("div"),r=IC("div"),i=IC("div"),a=IC("input"),c=IC("label"),l=NC(W),f=IC("span"),h=NC(K),d=IC("div"),p=IC("button"),v=NC(e[21]),g=IC("span"),k=NC(G),b=IC("div");for(var q=0;q<Q.length;q+=1)Q[q].c();S=IC("div");for(var H=0;H<J.length;H+=1)J[H].c();T=IC("div"),I=IC("div"),N=IC("div"),A=NC(e[18]),P=IC("div"),D=IC("div");for(var Y=0;Y<X.length;Y+=1)X[Y].c();j=IC("div");for(var $=0;$<ee.length;$+=1)ee[$].c();(z=IC("button")).textContent="\ud83d\ude00",RC(n,"class","pad-top"),RC(a,"id","search"),RC(a,"class","search"),RC(a,"type","search"),RC(a,"role","combobox"),RC(a,"enterkeyhint","search"),RC(a,"placeholder",o=e[0].searchLabel),RC(a,"autocapitalize","none"),RC(a,"autocomplete","off"),RC(a,"spellcheck","true"),RC(a,"aria-expanded",s=!(!e[4]||!e[1].length)),RC(a,"aria-controls","search-results"),RC(a,"aria-describedby","search-description"),RC(a,"aria-autocomplete","list"),RC(a,"aria-activedescendant",u=e[26]?"emo-".concat(e[26]):""),RC(c,"class","sr-only"),RC(c,"for","search"),RC(f,"id","search-description"),RC(f,"class","sr-only"),RC(i,"class","search-wrapper"),RC(p,"id","skintone-button"),RC(p,"class",m="emoji "+(e[6]?"hide-focus":"")),RC(p,"aria-label",e[23]),RC(p,"title",e[23]),RC(p,"aria-describedby","skintone-description"),RC(p,"aria-haspopup","listbox"),RC(p,"aria-expanded",e[6]),RC(p,"aria-controls","skintone-list"),RC(d,"class",y="skintone-button-wrapper "+(e[19]?"expanded":"")),RC(g,"id","skintone-description"),RC(g,"class","sr-only"),RC(b,"id","skintone-list"),RC(b,"class",w="skintone-list hide-focus "+(e[6]?"":"hidden no-animate")),OC(b,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),RC(b,"role","listbox"),RC(b,"aria-label",_=e[0].skinTonesLabel),RC(b,"aria-activedescendant",x="skintone-"+e[20]),RC(b,"aria-hidden",E=!e[6]),RC(b,"tabindex","-1"),RC(r,"class","search-row"),RC(S,"class","nav"),RC(S,"role","tablist"),OC(S,"grid-template-columns","repeat("+e[12].length+", 1fr)"),RC(S,"aria-label",C=e[0].categoriesLabel),RC(I,"class","indicator"),OC(I,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),RC(T,"class","indicator-wrapper"),RC(N,"class",R="message "+(e[18]?"":"gone")),RC(N,"role","alert"),RC(N,"aria-live","polite"),RC(P,"class",O="tabpanel "+(!e[14]||e[18]?"gone":"")),RC(P,"role",L=e[4]?"region":"tabpanel"),RC(P,"aria-label",M=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),RC(P,"id",F=e[4]?"":"tab-".concat(e[13].id)),RC(P,"tabindex","0"),RC(j,"class",U="favorites emoji-menu "+(e[18]?"gone":"")),RC(j,"role","menu"),RC(j,"aria-label",V=e[0].favoritesLabel),OC(j,"padding-inline-end",e[25]+"px"),RC(z,"aria-hidden","true"),RC(z,"tabindex","-1"),RC(z,"class","abs-pos hidden emoji"),RC(t,"class","picker"),RC(t,"aria-label",B=e[0].regionLabel),RC(t,"style",e[22])},m:function(o,s){CC(o,t,s),SC(t,n),SC(t,r),SC(r,i),SC(i,a),DC(a,e[2]),SC(i,c),SC(c,l),SC(i,f),SC(f,h),SC(r,d),SC(d,p),SC(p,v),SC(r,g),SC(g,k),SC(r,b);for(var u=0;u<Q.length;u+=1)Q[u]&&Q[u].m(b,null);e[49](b),SC(t,S);for(var m=0;m<J.length;m+=1)J[m]&&J[m].m(S,null);SC(t,T),SC(T,I),SC(t,N),SC(N,A),SC(t,P),SC(P,D);for(var y=0;y<X.length;y+=1)X[y]&&X[y].m(D,null);e[51](P),SC(t,j);for(var w=0;w<ee.length;w+=1)ee[w]&&ee[w].m(j,null);var _;SC(t,z),e[52](z),e[53](t),q||(H=[AC(a,"input",e[48]),AC(a,"keydown",e[30]),AC(p,"click",e[35]),AC(b,"focusout",e[38]),AC(b,"click",e[34]),AC(b,"keydown",e[36]),AC(b,"keyup",e[37]),AC(S,"keydown",e[32]),(_=e[29].call(null,D),_&&bC(_.destroy)?_.destroy:mC),AC(P,"click",e[33]),AC(j,"click",e[33])],q=!0)},p:function(e,n){1&n[0]&&o!==(o=e[0].searchLabel)&&RC(a,"placeholder",o),18&n[0]&&s!==(s=!(!e[4]||!e[1].length))&&RC(a,"aria-expanded",s),67108864&n[0]&&u!==(u=e[26]?"emo-".concat(e[26]):"")&&RC(a,"aria-activedescendant",u),4&n[0]&&a.value!==e[2]&&DC(a,e[2]),1&n[0]&&W!==(W=e[0].searchLabel+"")&&PC(l,W),1&n[0]&&K!==(K=e[0].searchDescription+"")&&PC(h,K),2097152&n[0]&&PC(v,e[21]),64&n[0]&&m!==(m="emoji "+(e[6]?"hide-focus":""))&&RC(p,"class",m),8388608&n[0]&&RC(p,"aria-label",e[23]),8388608&n[0]&&RC(p,"title",e[23]),64&n[0]&&RC(p,"aria-expanded",e[6]),524288&n[0]&&y!==(y="skintone-button-wrapper "+(e[19]?"expanded":""))&&RC(d,"class",y),1&n[0]&&G!==(G=e[0].skinToneDescription+"")&&PC(k,G),1049089&n[0]&&(ne=e[9],Q=JC(Q,n,re,1,e,ne,Y,b,YC,LT,null,OT)),64&n[0]&&w!==(w="skintone-list hide-focus "+(e[6]?"":"hidden no-animate"))&&RC(b,"class",w),64&n[0]&&OC(b,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),1&n[0]&&_!==(_=e[0].skinTonesLabel)&&RC(b,"aria-label",_),1048576&n[0]&&x!==(x="skintone-"+e[20])&&RC(b,"aria-activedescendant",x),64&n[0]&&E!==(E=!e[6])&&RC(b,"aria-hidden",E),12305&n[0]|1&n[1]&&(se=e[12],J=JC(J,n,ue,1,e,se,$,S,YC,MT,null,DT)),4096&n[0]&&OC(S,"grid-template-columns","repeat("+e[12].length+", 1fr)"),1&n[0]&&C!==(C=e[0].categoriesLabel)&&RC(S,"aria-label",C),16779264&n[0]&&OC(I,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),262144&n[0]&&PC(A,e[18]),262144&n[0]&&R!==(R="message "+(e[18]?"":"gone"))&&RC(N,"class",R),402694449&n[0]&&(he=e[15],X=JC(X,n,de,1,e,he,Z,D,YC,VT,null,RT)),278528&n[0]&&O!==(O="tabpanel "+(!e[14]||e[18]?"gone":""))&&RC(P,"class",O),16&n[0]&&L!==(L=e[4]?"region":"tabpanel")&&RC(P,"role",L),8209&n[0]&&M!==(M=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name])&&RC(P,"aria-label",M),8208&n[0]&&F!==(F=e[4]?"":"tab-".concat(e[13].id))&&RC(P,"id",F),402654464&n[0]&&(ye=e[10],ee=JC(ee,n,ge,1,e,ye,te,j,YC,qT,null,AT)),262144&n[0]&&U!==(U="favorites emoji-menu "+(e[18]?"gone":""))&&RC(j,"class",U),1&n[0]&&V!==(V=e[0].favoritesLabel)&&RC(j,"aria-label",V),33554432&n[0]&&OC(j,"padding-inline-end",e[25]+"px"),1&n[0]&&B!==(B=e[0].regionLabel)&&RC(t,"aria-label",B),4194304&n[0]&&RC(t,"style",e[22])},i:mC,o:mC,d:function(n){n&&TC(t);for(var r=0;r<Q.length;r+=1)Q[r].d();e[49](null);for(var i=0;i<J.length;i+=1)J[i].d();for(var a=0;a<X.length;a+=1)X[a].d();e[51](null);for(var o=0;o<ee.length;o+=1)ee[o].d();e[52](null),e[53](null),q=!1,kC(H)}}}function WT(e,t,n){var r,i,a,o,s,c,l,f,h,d,p=t.skinToneEmoji,v=t.i18n,m=t.database,k=t.customEmoji,w=t.customCategorySorting,_=t.emojiVersion,x=[],E=[],S="",T="",I=!1,N=-1,A=!1,R=!1,P=0,D=0,O="",L=[],M=[],F=8,j=!1,U=0,V=0,z=nT,B=!1,q=function(e){r.getRootNode().getElementById(e).focus()},H=function(e,t){r.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))},W=function(e,t){return t&&e.skins&&e.skins[t]||e.unicode};function K(e){var t=r.getRootNode();!function(e,t,n){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=IT(n(a));"undefined"===typeof ST&&(ST=IT(t));var s=o/1.8<ST;vT.set(a.unicode,s)}}catch(u){i.e(u)}finally{i.f()}}(e,i,(function(e){return t.getElementById("emo-".concat(e.id))})),n(1,x)}function G(e){return!e.unicode||!aT(e)||vT.get(e.unicode)}function Q(e){return Y.apply(this,arguments)}function Y(){return Y=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=_,e.t0){e.next=5;break}return e.next=4,pT();case 4:e.t0=e.sent;case 5:return n=e.t0,e.abrupt("return",t.filter((function(e){var t=e.version;return!t||t<=n})));case 7:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function J(e){return $.apply(this,arguments)}function $(){return($=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ET,e.t1=t,e.t2=_,e.t2){e.next=7;break}return e.next=6,pT();case 6:e.t2=e.sent;case 7:return e.t3=e.t2,e.abrupt("return",(0,e.t0)(e.t1,e.t3));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t){e.next=4;break}e.t0=k,e.next=7;break;case 4:return e.next=6,m.getEmojiByGroup(t);case 6:e.t0=e.sent;case 7:return n=e.t0,e.t1=J,e.next=11,Q(n);case 11:return e.t2=e.sent,e.abrupt("return",(0,e.t1)(e.t2));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return te=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=J,e.t1=Q,e.next=4,m.getEmojiBySearchQuery(t);case 4:return e.t2=e.sent,e.next=7,(0,e.t1)(e.t2);case 7:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t3));case 9:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(e){n(2,S=""),n(45,T=""),n(5,N=-1),n(11,V=z.findIndex((function(t){return t.id===e.id})))}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=b(g().mark((function e(t){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getEmojiByUnicodeOrName(t);case 2:return n=e.sent,r=[].concat(C(x),C(M)).find((function(e){return e.id===t})),i=r.unicode&&W(r,P),e.next=7,m.incrementFavoriteEmojiCount(t);case 7:H("emoji-click",Me(Me({emoji:n,skinTone:P},i&&{unicode:i}),r.name&&{name:r.name}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.target).classList.contains("emoji")){e.next=3;break}return e.abrupt("return");case 3:wT(t),re(n.id.substring(4));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){n(8,P=e),n(6,A=!1),q("skintone-button"),H("skin-tone-change",{skinTone:e}),m.setPreferredSkinTone(e)}function se(){return(se=b(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.relatedTarget)&&"skintone-list"===r.id||n(6,A=!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}MC((function(){_||pT().then((function(e){e||n(18,o=v.emojiUnsupportedMessage)}))}));return e.$$set=function(e){"skinToneEmoji"in e&&n(40,p=e.skinToneEmoji),"i18n"in e&&n(0,v=e.i18n),"database"in e&&n(39,m=e.database),"customEmoji"in e&&n(41,k=e.customEmoji),"customCategorySorting"in e&&n(42,w=e.customCategorySorting),"emojiVersion"in e&&n(43,_=e.emojiVersion)},e.$$.update=function(){if(1280&e.$$.dirty[1]&&k&&m&&n(39,m.customEmoji=k,m),1&e.$$.dirty[0]|256&e.$$.dirty[1]){var t=function(){var e=b(g().mark((function e(){var t,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,r=setTimeout((function(){t=!0,n(18,o=v.loadingMessage)}),1e3),e.prev=2,e.next=5,m.ready();case 5:n(14,B=!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),n(18,o=v.networkErrorMessage);case 12:return e.prev=12,clearTimeout(r),t&&(t=!1,n(18,o="")),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[2,8,12,16]])})));return function(){return e.apply(this,arguments)}}();m&&t()}if(6144&e.$$.dirty[0]|1024&e.$$.dirty[1]&&(k&&k.length?n(12,z=[rT].concat(C(nT))):z!==nT&&(V&&n(11,V--,V),n(12,z=nT))),4&e.$$.dirty[0]&&iT((function(){n(45,T=(S||"").trim()),n(5,N=-1)})),6144&e.$$.dirty[0]&&n(13,h=z[V]),24576&e.$$.dirty[0]|16384&e.$$.dirty[1]){var r=function(){var e=b(g().mark((function e(){var t,r,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=5;break}n(1,x=[]),n(4,I=!1),e.next=19;break;case 5:if(!(T.length>=2)){e.next=13;break}return t=T,e.next=9,ee(t);case 9:r=e.sent,t===T&&(n(1,x=r),n(4,I=!0)),e.next=19;break;case 13:if(!h){e.next=19;break}return i=h.id,e.next=17,X(i);case 17:a=e.sent,i===h.id&&(n(1,x=a),n(4,I=!1));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r()}if(4112&e.$$.dirty[0]&&n(22,l="\n  --num-groups: ".concat(z.length,"; \n  --indicator-opacity: ").concat(I?0:1,"; \n  --num-skintones: ").concat(6,";")),16384&e.$$.dirty[0]|256&e.$$.dirty[1]){var i=function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=6;break}return e.t0=n,e.next=4,m.getPreferredSkinTone();case 4:e.t1=P=e.sent,(0,e.t0)(8,e.t1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i()}if(512&e.$$.dirty[1]&&n(9,L=Array(6).fill().map((function(e,t){return function(e,t){if(0===t)return e;var n=e.indexOf(gT);return-1!==n?e.substring(0,n)+String.fromCodePoint(kT+t-1)+e.substring(n):(e.endsWith(mT)&&(e=e.substring(0,e.length-1)),e+yT+String.fromCodePoint(bT+t-1))}(p,t)}))),768&e.$$.dirty[0]&&n(21,c=L[P]),257&e.$$.dirty[0]&&n(23,O=v.skinToneLabel.replace("{skinTone}",v.skinTones[P])),16384&e.$$.dirty[0]|256&e.$$.dirty[1]){var D=function(){var e=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,Promise.all(uT.map((function(e){return m.getEmojiByUnicodeOrName(e)})));case 3:e.t1=f=e.sent.filter(Boolean),(0,e.t0)(46,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();B&&D()}if(16384&e.$$.dirty[0]|98560&e.$$.dirty[1]){var j=function(){var e=b(g().mark((function e(){var t,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getTopFavoriteEmoji(F);case 2:return t=e.sent,e.next=5,J(xT([].concat(C(t),C(f)),(function(e){return e.unicode||e.name})).slice(0,F));case 5:r=e.sent,n(10,M=r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();B&&f&&j()}if(10&e.$$.dirty[0]|4096&e.$$.dirty[1]){var U=x.filter((function(e){return e.unicode})).filter((function(e){return aT(e)&&!vT.has(e.unicode)}));!_&&U.length?CT((function(){return K(U)})):(n(1,x=_?x:x.filter(G)),CT((function(){var e;(e=a)&&(e.scrollTop=0)})))}if(e.$$.dirty[0],e.$$.dirty[1],18&e.$$.dirty[0]|2048&e.$$.dirty[1]){n(15,E=function(){if(I)return[{category:"",emojis:x}];var e,t=new Map,n=y(x);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.category||"",a=t.get(i);a||(a=[],t.set(i,a)),a.push(r)}}catch(o){n.e(o)}finally{n.f()}return C(t.entries()).map((function(e){var t=u(e,2);return{category:t[0],emojis:t[1]}})).sort((function(e,t){return w(e.category,t.category)}))}())}34&e.$$.dirty[0]&&n(26,d=-1!==N&&x[N].id),192&e.$$.dirty[0]&&(A?s.addEventListener("transitionend",(function(){n(19,R=!0)}),{once:!0}):n(19,R=!1))},[v,x,S,a,I,N,A,s,P,L,M,V,z,h,B,E,r,i,o,R,D,c,l,O,j,U,d,W,function(e,t){return(n=[e.name||W(e,t)].concat(C(e.shortcodes||[])),xT(n,(function(e){return e}))).join(", ");var n},function(e){return function(e,t){var n;return TT?(n=new ResizeObserver((function(e){return t(e[0].contentRect.width)}))).observe(e):CT((function(){return t(e.getBoundingClientRect().width)})),{destroy:function(){n&&n.disconnect()}}}(e,(function(t){var i=getComputedStyle(r),a=parseInt(i.getPropertyValue("--num-columns"),10),o="rtl"===i.getPropertyValue("direction"),s=e.parentElement.getBoundingClientRect().width-t;n(47,F=a),n(25,U=s),n(24,j=o)}))},function(e){if(I&&x.length){var t=function(t){wT(e),n(5,N=_T(t,N,x))};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==N)return wT(e),re(x[N].id);x.length&&n(5,N=0)}}},ne,function(e){var t=e.target,n=function(t){t&&(wT(e),t.focus())};switch(e.key){case"ArrowLeft":return n(t.previousSibling);case"ArrowRight":return n(t.nextSibling);case"Home":return n(t.parentElement.firstChild);case"End":return n(t.parentElement.lastChild)}},function(e){return ae.apply(this,arguments)},function(e){var t=e.target.id,n=t&&t.match(/^skintone-(\d)/);n&&(wT(e),oe(parseInt(n[1],10)))},function(e){n(6,A=!A),n(20,D=P),A&&(wT(e),CT((function(){return q("skintone-list")})))},function(e){if(A){var t=function(){var t=b(g().mark((function t(r){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:wT(e),n(20,D=r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();switch(e.key){case"ArrowUp":return t(_T(!0,D,L));case"ArrowDown":return t(_T(!1,D,L));case"Home":return t(0);case"End":return t(L.length-1);case"Enter":return wT(e),oe(D);case"Escape":return wT(e),n(6,A=!1),q("skintone-button")}}},function(e){if(A)return" "===e.key?(wT(e),oe(D)):void 0},function(e){return se.apply(this,arguments)},m,p,k,w,_,!0,T,f,F,function(){S=this.value,n(2,S)},function(e){jC[e?"unshift":"push"]((function(){n(7,s=e)}))},function(e){return ne(e)},function(e){jC[e?"unshift":"push"]((function(){n(3,a=e)}))},function(e){jC[e?"unshift":"push"]((function(){n(17,i=e)}))},function(e){jC[e?"unshift":"push"]((function(){n(16,r=e)}))}]}for(var KT=function(e){d(n,e);var t=m(n);function n(e){var r;return w(this,n),ZC(f(r=t.call(this)),e,WT,HT,wC,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42,emojiVersion:43},null,[-1,-1,-1]),r}return E(n)}(eT),GT={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}},QT=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],YT=":host{--emoji-font-family:".concat(cT,"}"),JT=function(e){d(n,e);var t=m(n);function n(e){var r;w(this,n),(r=t.call(this)).attachShadow({mode:"open"});var i=document.createElement("style");i.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}"+YT,r.shadowRoot.appendChild(i),r._ctx=Me({locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"\ud83d\udd90\ufe0f",customCategorySorting:lT,customEmoji:null,i18n:GT,emojiVersion:null},e);var a,o=y(QT);try{for(o.s();!(a=o.n()).done;){var s=a.value;"database"!==s&&Object.prototype.hasOwnProperty.call(f(r),s)&&(r._ctx[s]=r[s],delete r[s])}}catch(u){o.e(u)}finally{o.f()}return r._dbFlush(),r}return E(n,[{key:"connectedCallback",value:function(){this._cmp||(this._cmp=new KT({target:this.shadowRoot,props:this._ctx}))}},{key:"disconnectedCallback",value:function(){var e=this;Promise.resolve().then((function(){!e.isConnected&&e._cmp&&(e._cmp.$destroy(),e._cmp=void 0,e._ctx.database.close().catch((function(e){return console.error(e)})))}))}},{key:"attributeChangedCallback",value:function(e,t,n){this._set(e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()})),"emoji-version"===e?parseFloat(n):n)}},{key:"_set",value:function(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set(T({},e,t)),["locale","dataSource"].includes(e)&&this._dbFlush()}},{key:"_dbCreate",value:function(){var e=this._ctx,t=e.locale,n=e.dataSource,r=e.database;r&&r.locale===t&&r.dataSource===n||this._set("database",new vC({locale:t,dataSource:n}))}},{key:"_dbFlush",value:function(){var e=this;Promise.resolve().then((function(){return e._dbCreate()}))}}],[{key:"observedAttributes",get:function(){return["locale","data-source","skin-tone-emoji","emoji-version"]}}]),n}(N(HTMLElement)),$T={},XT=function(){var e=eI[ZT];$T[e]={get:function(){return"database"===e&&this._dbCreate(),this._ctx[e]},set:function(t){if("database"===e)throw new Error("database is read-only");this._set(e,t)}}},ZT=0,eI=QT;ZT<eI.length;ZT++)XT();Object.defineProperties(JT.prototype,$T),customElements.get("emoji-picker")||customElements.define("emoji-picker",JT);var tI,nI=n(191),rI=n.n(nI);function iI(e){if("TEXTAREA"!==e.nodeName)return!1;if("undefined"===typeof tI){var t=document.createElement("textarea");t.value=1,tI=!!t.firstChild}return tI}var aI=function(e,t){if(e.focus(),document.selection){var n=document.selection.createRange();return n.text=t,n.collapse(!1),void n.select()}if(!document.execCommand("insertText",!1,t)){var r=e.selectionStart,i=e.selectionEnd;if("function"===typeof e.setRangeText)e.setRangeText(t);else{var a=document.createRange(),o=document.createTextNode(t);if(iI(e)){var s=e.firstChild;if(s){for(var u=0,c=null,l=null;s&&(null===c||null===l);){var f=s.nodeValue.length;r>=u&&r<=u+f&&a.setStart(c=s,r-u),i>=u&&i<=u+f&&a.setEnd(l=s,i-u),u+=f,s=s.nextSibling}r!==i&&a.deleteContents()}else e.appendChild(o)}if(iI(e)&&"#text"===a.commonAncestorContainer.nodeName)a.insertNode(o);else{var h=e.value;e.value=h.slice(0,r)+t+h.slice(i)}}e.setSelectionRange(r+t.length,r+t.length);var d=document.createEvent("UIEvent");d.initEvent("input",!0,!1),e.dispatchEvent(d)}},oI=n(329);var sI=function(t){var n=t.openUserlist,r=t.openRenameChatPopup,i=t.openPopup,a=t.chatData,o=t.isGroupChat,s=u((0,e.useState)(""),2),c=s[0],l=s[1],f=u((0,e.useState)([]),2),h=f[0],d=f[1],p=u((0,e.useState)(),2),v=p[0],m=p[1],y=u(oo(Lk),1)[0],k=(0,e.useRef)();function w(){return(w=b(g().mark((function e(t){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=Lk.currentUser,r=n.uid,i=n.displayName,!o){e.next=7;break}return e.next=5,Tk(yg(Fk,"chats",a.chatID,"messages"),{content:c,senderName:i,senderID:r,timestamp:Rk()});case 5:e.next=11;break;case 7:return e.next=9,Tk(yg(Fk,"users",r,"private_chats",a.chatID,"messages"),{content:c,senderName:i,senderID:r,timestamp:Rk()});case 9:return e.next=11,Tk(yg(Fk,"users",a.chatID,"private_chats",r,"messages"),{content:c,senderName:i,senderID:r,timestamp:Rk()});case 11:l(""),k.current.scrollIntoView({behavior:"smooth"});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ck(gg(Fk,"chats",a.chatID));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ck(gg(Fk,"users",y.uid,"private_chats",a.chatID));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=b(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sk(gg(Fk,"chats",a.chatID),{participants:Dk(y.uid)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,e.useEffect)((function(){document.querySelector("emoji-picker").addEventListener("emoji-click",(function(e){aI(document.querySelector(".msg-input"),e.detail.unicode)}))}),[]),(0,e.useEffect)((function(){if(o){var e=Ik(ak(yg(Fk,"chats",a.chatID,"messages"),ck("timestamp","desc"),fk(50)),(function(e){var t=[];e.forEach((function(e){t.push(Me(Me({},e.data()),{},{id:e.id}))})),d(t.reverse())}));return function(){return e}}var t=Ik(ak(yg(Fk,"users",y.uid,"private_chats",a.chatID,"messages"),ck("timestamp","desc"),fk(50)),(function(e){var t=[];e.forEach((function(e){t.push(Me(Me({},e.data()),{},{id:e.id}))})),d(t.reverse())}));return function(){return t}}),[]),(0,e.useEffect)((function(){h.length>0&&h[h.length-1].timestamp&&m(oI("dd/MM hh:mm",new Date(1e3*h[h.length-1].timestamp.seconds)))}),[h]),(0,ME.jsxs)("div",{className:"chat",children:[(0,ME.jsxs)("div",{className:"chat-header",children:[(0,ME.jsx)("img",{className:"chat-pic",src:o?"https://ui-avatars.com/api/?name=".concat(a.name,"&background=random"):a.chatPicURL,alt:"profile"}),(0,ME.jsxs)("div",{children:[(0,ME.jsx)("h3",{children:a.name}),(0,ME.jsx)("p",{className:"last-msg side-text",children:v?"Last message at ".concat(v):"No messages yet"})]}),(0,ME.jsxs)("div",{className:"group-editor-wrapper",children:[(0,ME.jsx)("button",{onClick:i,className:"popup-btn",children:(0,ME.jsx)("i",{className:"fa-solid fa-ellipsis fa-xl"})}),(0,ME.jsx)("div",{className:"group-editor-popup popup",children:o?(0,ME.jsxs)(ME.Fragment,{children:[(0,ME.jsxs)("button",{onClick:function(){n(a)},children:[(0,ME.jsx)("i",{className:"fa-solid fa-plus fa-xl"})," Add person"]}),a.ownerID===y.uid?(0,ME.jsxs)(ME.Fragment,{children:[(0,ME.jsxs)("button",{onClick:function(){r(a)},children:[(0,ME.jsx)("i",{className:"fa-solid fa-pen"})," Rename"]}),(0,ME.jsxs)("button",{onClick:function(){return _.apply(this,arguments)},children:[(0,ME.jsx)("i",{className:"fa-solid fa-trash"})," Delete"]})]}):(0,ME.jsxs)("button",{onClick:function(){return E.apply(this,arguments)},children:[(0,ME.jsx)("i",{className:"fa-solid fa-right-from-bracket fa-xl"})," ","Leave"]})]}):(0,ME.jsxs)(ME.Fragment,{children:[(0,ME.jsxs)("button",{children:[(0,ME.jsx)("i",{className:"fa-solid fa-ban"})," Block"]}),(0,ME.jsxs)("button",{onClick:function(){return x.apply(this,arguments)},children:[(0,ME.jsx)("i",{className:"fa-solid fa-trash"})," Delete"]})]})})]})]}),(0,ME.jsx)("div",{className:"chat-container",children:(0,ME.jsxs)("div",{className:"chat-content",children:[h?h.map((function(e){return(0,ME.jsx)(jE,{senderName:e.senderName,senderID:e.senderID,content:e.content},rI()())})):(0,ME.jsx)(ME.Fragment,{}),(0,ME.jsx)("span",{ref:k})]})}),(0,ME.jsx)("div",{className:"msg-form-wrapper",children:(0,ME.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},id:"message-form",children:[(0,ME.jsxs)("div",{className:"emoji-wrapper",children:[(0,ME.jsx)("button",{onClick:i,type:"button",className:"emoji-btn popup-btn",children:(0,ME.jsx)("i",{className:"fa-solid fa-face-laugh-beam fa-xl"})}),(0,ME.jsx)("emoji-picker",{class:"light popup"})]}),(0,ME.jsx)("input",{className:"msg-input",type:"text",placeholder:"Aa",rows:1,value:c,onChange:function(e){return l(e.target.value)},required:!0}),(0,ME.jsx)("button",{type:"submit",children:(0,ME.jsx)("i",{className:"fa-solid fa-paper-plane fa-xl"})})]})})]})},uI=n(329);var cI,lI=function(t){var n,r,i=t.chatData,a=t.isGroupChat,o=u(oo(Lk),1)[0],s=u((0,e.useState)({content:"No messages yet."}),2),c=s[0],l=s[1],f=u((0,e.useState)(""),2),h=f[0],d=f[1];return(0,e.useEffect)((function(){var e,t;return i.chatID&&(e=ak(a?yg(Fk,"chats",i.chatID,"messages"):yg(Fk,"users",o.uid,"private_chats",i.chatID,"messages"),ck("timestamp","desc"),fk(1)),t=Ik(e,(function(e){var t=[];e.forEach((function(e){t.push(e.data())})),t[0]&&l(t[0])}))),function(){return t}}),[]),(0,e.useEffect)((function(){c&&c.timestamp&&d(uI("dd/MM hh:mm",new Date(1e3*c.timestamp.seconds)))}),[c]),(0,ME.jsxs)("button",{className:"chat-btn",children:[(0,ME.jsx)("img",{className:"chat-btn-pic",src:i.chatPicURL?i.chatPicURL:"https://ui-avatars.com/api/?name=".concat(i.name,"&background=random"),alt:i.name}),(0,ME.jsxs)("div",{children:[(0,ME.jsx)("h4",{className:"chat-title",children:i.name}),(0,ME.jsxs)("p",{className:"chat-last-msg side-text",children:[(0,ME.jsx)("span",{className:"msg",children:c?(n=c.content,r=30,n.length>r?n.substring(0,r-3)+"...":n):""}),(0,ME.jsx)("span",{className:"time",children:h})]})]})]})};function fI(){return fI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fI.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(cI||(cI={}));var hI,dI="popstate";function pI(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function vI(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function mI(e,t){return{usr:e.state,key:e.key,idx:t}}function yI(e,t,n,r){return void 0===n&&(n=null),fI({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?kI(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function gI(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function kI(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function bI(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,l=cI.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=cI.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:gI(e);return pI(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(fI({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(dI,p),f=e,function(){o.removeEventListener(dI,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=cI.Push;var r=yI(m.location,e,t);n&&n(r,e);var i=mI(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(tb){if(tb instanceof DOMException&&"DataCloneError"===tb.name)throw tb;o.location.assign(a)}u&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=cI.Replace;var r=yI(m.location,e,t);n&&n(r,e);var i=mI(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),u&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(hI||(hI={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function wI(e,t,n){void 0===n&&(n="/");var r=LI(("string"===typeof t?kI(t):t).pathname||"/",n);if(null==r)return null;var i=_I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=PI(i[o],OI(r));return a}function _I(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(pI(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=UI([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(pI(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),_I(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:RI(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=y(xI(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function xI(e){var t=e.split("/");if(0===t.length)return[];var n,r=i(n=t)||S(n)||o(n)||s(),a=r[0],u=r.slice(1),c=a.endsWith("?"),l=a.replace(/\?$/,"");if(0===u.length)return c?[l,""]:[l];var f=xI(u.join("/")),h=[];return h.push.apply(h,C(f.map((function(e){return""===e?l:[l,e].join("/")})))),c&&h.push.apply(h,C(f)),h.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var EI=/^:\w+$/,SI=3,CI=2,TI=1,II=10,NI=-2,AI=function(e){return"*"===e};function RI(e,t){var n=e.split("/"),r=n.length;return n.some(AI)&&(r+=NI),t&&(r+=CI),n.filter((function(e){return!AI(e)})).reduce((function(e,t){return e+(EI.test(t)?SI:""===t?TI:II)}),r)}function PI(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=DI({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:UI([i,l.pathname]),pathnameBase:VI(UI([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=UI([i,l.pathnameBase]))}return a}function DI(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);vI("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],c=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(tb){return vI(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+tb+")."),e}}(l[n]||"",t),e}),{});return{params:f,pathname:s,pathnameBase:c,pattern:e}}function OI(e){try{return decodeURI(e)}catch(tb){return vI(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+tb+")."),e}}function LI(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function MI(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function FI(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function jI(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=kI(e):(pI(!(i=fI({},e)).pathname||!i.pathname.includes("?"),MI("?","pathname","search",i)),pI(!i.pathname||!i.pathname.includes("#"),MI("#","pathname","hash",i)),pI(!i.search||!i.search.includes("#"),MI("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?kI(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:zI(a),hash:BI(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var UI=function(e){return e.join("/").replace(/\/\/+/g,"/")},VI=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},zI=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},BI=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},qI=function(e){d(n,e);var t=m(n);function n(){return w(this,n),t.apply(this,arguments)}return E(n)}(N(Error));function HI(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var WI=["post","put","patch","delete"],KI=(new Set(WI),["get"].concat(WI));new Set(KI),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function GI(){return GI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GI.apply(this,arguments)}var QI=t.startTransition,YI=e.createContext(null);var JI=e.createContext(null);var $I=e.createContext(null);var XI=e.createContext(null);var ZI=e.createContext(null);var eN=e.createContext({outlet:null,matches:[],isDataRoute:!1});var tN=e.createContext(null);function nN(){return null!=e.useContext(ZI)}function rN(){return nN()||pI(!1),e.useContext(ZI).location}function iN(t){e.useContext(XI).static||e.useLayoutEffect(t)}function aN(){return e.useContext(eN).isDataRoute?function(){var t=vN(cN.UseNavigateStable).router,n=yN(lN.UseNavigateStable),r=e.useRef(!1);iN((function(){r.current=!0}));var i=e.useCallback((function(e,i){void 0===i&&(i={}),r.current&&("number"===typeof e?t.navigate(e):t.navigate(e,GI({fromRouteId:n},i)))}),[t,n]);return i}():function(){nN()||pI(!1);var t=e.useContext(YI),n=e.useContext(XI),r=n.basename,i=n.navigator,a=e.useContext(eN).matches,o=rN().pathname,s=JSON.stringify(FI(a).map((function(e){return e.pathnameBase}))),u=e.useRef(!1);iN((function(){u.current=!0}));var c=e.useCallback((function(e,n){if(void 0===n&&(n={}),u.current)if("number"!==typeof e){var a=jI(e,JSON.parse(s),o,"path"===n.relative);null==t&&"/"!==r&&(a.pathname="/"===a.pathname?r:UI([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(e)}),[r,i,s,o,t]);return c}()}function oN(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(eN).matches,a=rN().pathname,o=JSON.stringify(FI(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return jI(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function sN(t,n,r){nN()||pI(!1);var i,a=e.useContext(XI).navigator,o=e.useContext(eN).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,rN());if(n){var f,h="string"===typeof n?kI(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||pI(!1),i=h}else i=l;var d=i.pathname||"/",p=wI(t,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=pN(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:UI([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:UI([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?e.createElement(ZI.Provider,{value:{location:GI({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:cI.Pop}},v):v}function uN(){var t=function(){var t,n=e.useContext(tN),r=mN(lN.UseRouteError),i=yN(lN.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=HI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var cN,lN,fN=e.createElement(uN,null),hN=function(t){d(r,t);var n=m(r);function r(e){var t;return w(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return E(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(eN.Provider,{value:this.props.routeContext},e.createElement(tN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(e.Component);function dN(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(YI);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(eN.Provider,{value:n},i)}function pN(t,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==t){var a;if(null==(a=r)||!a.errors)return null;t=r.matches}var o=t,s=null==(i=r)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||pI(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(t,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,c=null;r&&(c=i.route.errorElement||fN);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=u?c:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(dN,{match:i,routeContext:{outlet:t,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?e.createElement(hN,{location:r.location,revalidation:r.revalidation,component:c,error:u,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function vN(t){var n=e.useContext(YI);return n||pI(!1),n}function mN(t){var n=e.useContext(JI);return n||pI(!1),n}function yN(t){var n=function(t){var n=e.useContext(eN);return n||pI(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||pI(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(cN||(cN={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(lN||(lN={}));var gN;function kN(e){pI(!1)}function bN(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,u=void 0===s?cI.Pop:s,c=t.navigator,l=t.static,f=void 0!==l&&l;nN()&&pI(!1);var h=r.replace(/^\/*/,"/"),d=e.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=kI(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,E=void 0===x?"default":x,S=e.useMemo((function(){var e=LI(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:_,key:E},navigationType:u}}),[h,m,g,b,_,E,u]);return null==S?null:e.createElement(XI.Provider,{value:d},e.createElement(ZI.Provider,{children:a,value:S}))}function wN(e){var t=e.children,n=e.location;return sN(xN(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(gN||(gN={}));var _N=new Promise((function(){}));e.Component;function xN(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t)){var a=[].concat(C(n),[i]);if(t.type!==e.Fragment){t.type!==kN&&pI(!1),t.props.index&&t.props.children&&pI(!1);var o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=xN(t.props.children,a)),r.push(o)}else r.push.apply(r,xN(t.props.children,a))}})),r}function EN(){return EN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EN.apply(this,arguments)}function SN(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var CN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function TN(t){var n,r=t.basename,i=t.children,a=t.future,o=t.window,s=e.useRef();null==s.current&&(s.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),bI((function(e,t){var n=kI(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash;return yI("",{pathname:i,search:o,hash:void 0===s?"":s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:gI(t))}),(function(e,t){vI("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var c=s.current,l=u(e.useState({action:c.action,location:c.location}),2),f=l[0],h=l[1],d=(a||{}).v7_startTransition,p=e.useCallback((function(e){d&&QI?QI((function(){return h(e)})):h(e)}),[h,d]);return e.useLayoutEffect((function(){return c.listen(p)}),[c,p]),e.createElement(bN,{basename:r,children:i,location:f.location,navigationType:f.action,navigator:c})}var IN="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,NN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AN=e.forwardRef((function(t,n){var r,i=t.onClick,a=t.relative,o=t.reloadDocument,s=t.replace,u=t.state,c=t.target,l=t.to,f=t.preventScrollReset,h=SN(t,CN),d=e.useContext(XI).basename,p=!1;if("string"===typeof l&&NN.test(l)&&(r=l,IN))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=LI(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(b){}var g=function(t,n){var r=(void 0===n?{}:n).relative;nN()||pI(!1);var i=e.useContext(XI),a=i.basename,o=i.navigator,s=oN(t,{relative:r}),u=s.hash,c=s.pathname,l=s.search,f=c;return"/"!==a&&(f="/"===c?a:UI([a,c])),o.createHref({pathname:f,search:l,hash:u})}(l,{relative:a}),k=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,c=aN(),l=rN(),f=oN(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:gI(l)===gI(f);c(t,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,f,a,o,i,t,s,u])}(l,{replace:s,state:u,target:c,preventScrollReset:f,relative:a});return e.createElement("a",EN({},h,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var RN,PN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(RN||(RN={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(PN||(PN={}));var DN=function(e){var t=e.userData,n=e.handleClick;return(0,ME.jsxs)("button",{className:"user",onClick:function(){n(t)},children:[(0,ME.jsx)("img",{src:t.profileURL,alt:t.name,className:"user-profile-pic"}),(0,ME.jsx)("p",{className:"user-name",children:t.name})]})};var ON=function(t){var n=t.users,r=t.chatData,i=t.open,a=t.setOpen,o=u(oo(Lk),1)[0],s=u((0,e.useState)([]),2),c=s[0],l=s[1],f=u((0,e.useState)(""),2),h=f[0],d=f[1];function p(){a(!1)}function v(e){return m.apply(this,arguments)}function m(){return(m=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clicked on user"),e.next=3,Ek(gg(Fk,"users",o.uid,"private_chats",t.userID),{chatID:t.userID,chatPicURL:t.profileURL,name:t.name,created_at:Rk(),public:!1});case 3:return e.next=5,Ek(gg(Fk,"users",t.userID,"private_chats",o.uid),{chatID:o.uid,chatPicURL:o.photoURL,name:o.displayName,created_at:Rk(),public:!1});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return(k=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sk(gg(Fk,"chats",r.chatID),{participants:Pk(t.userID)});case 2:console.log("user added to the chat ",r.chatID),p();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,e.useEffect)((function(){document.querySelector(".users-wrapper").classList.toggle("userlist-open")}),[i]),(0,e.useEffect)((function(){null!==r&&l(n.filter((function(e){return!r.participants.includes(e.userID)})))}),[n,r]),(0,ME.jsxs)("div",{className:"users-wrapper",children:[(0,ME.jsx)("input",{className:"search-user",onKeyUp:function(){for(var e=h.toUpperCase(),t=document.querySelectorAll(".user-li"),n=0;n<t.length;n++){var r=t[n].querySelector(".user-name");(r.textContent||r.innerText).toUpperCase().indexOf(e)>-1?t[n].style.display="":t[n].style.display="none"}},value:h,onChange:function(e){d(e.target.value)},type:"text",placeholder:"Search"}),(0,ME.jsx)("ul",{className:"users-list",children:void 0!==n[0]?null===r?n.map((function(e){return(0,ME.jsx)("li",{className:"user-li",children:(0,ME.jsx)(DN,{userData:e,handleClick:v})},e.userID)})):c.map((function(e){return(0,ME.jsx)("li",{className:"user-li",children:(0,ME.jsx)(DN,{userData:e,handleClick:y})},e.userID)})):(0,ME.jsx)(ME.Fragment,{})}),(0,ME.jsx)("button",{onClick:p,className:"cancel",type:"button",children:"CANCEL"})]})};var LN=function(t){var n=t.open,r=t.setOpen,i=u((0,e.useState)(""),2),a=i[0],o=i[1],s=u(oo(Lk),1)[0];function c(){r(!1)}function l(){return(l=b(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Tk(yg(Fk,"chats"),{name:a,ownerID:s.uid,participants:[s.uid]});case 3:return n=e.sent,e.next=6,Sk(n,{chatID:n.id});case 6:c(),o("");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,e.useEffect)((function(){document.querySelector(".new-chat-popup").classList.toggle("new-chat-popup-open")}),[n]),(0,ME.jsx)("div",{className:"new-chat-popup",children:(0,ME.jsxs)("form",{id:"new-chat-form",onSubmit:function(e){return l.apply(this,arguments)},children:[(0,ME.jsx)("input",{value:a,onChange:function(e){o(e.target.value)},className:"chat-name",placeholder:"Chat name",required:!0}),(0,ME.jsxs)("div",{children:[(0,ME.jsx)("button",{className:"cancel",type:"button",onClick:c,children:"CANCEL"}),(0,ME.jsx)("button",{className:"create",type:"submit",children:"CREATE"})]})]})})};var MN=function(t){var n=t.chatData,r=t.open,i=t.setOpen,a=u((0,e.useState)(""),2),o=a[0],s=a[1];function c(){i(!1)}function l(){return(l=b(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Sk(gg(Fk,"chats",n.chatID),{name:o});case 3:c(),s("");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,e.useEffect)((function(){document.querySelector(".rename-chat-popup").classList.toggle("rename-chat-popup-open")}),[r]),(0,ME.jsx)("div",{className:"rename-chat-popup",children:(0,ME.jsxs)("form",{onSubmit:function(e){return l.apply(this,arguments)},id:"rename-chat-form",children:[(0,ME.jsx)("input",{value:o,onChange:function(e){s(e.target.value)},className:"chat-name",placeholder:"New name",required:!0}),(0,ME.jsxs)("div",{children:[(0,ME.jsx)("button",{className:"cancel",type:"button",onClick:c,children:"CANCEL"}),(0,ME.jsx)("button",{className:"create",type:"submit",children:"RENAME"})]})]})})};var FN=function(t){var n=t.signOut,r=u(oo(Lk),1)[0],i=u((0,e.useState)(!1),2),a=i[0],o=i[1],s=u((0,e.useState)(!1),2),c=s[0],l=s[1],f=u((0,e.useState)(!1),2),h=f[0],d=f[1],p=u((0,e.useState)(""),2),v=p[0],m=p[1],y=u((0,e.useState)(null),2),g=y[0],k=y[1],b=u((0,e.useState)([]),2),w=b[0],_=b[1],x=u((0,e.useState)([]),2),E=x[0],S=x[1],C=u((0,e.useState)([]),2),T=C[0],I=C[1];function N(e){e.target.closest("button").nextElementSibling.classList.toggle("active")}function A(e){k(e),o(!0)}function R(e){k(e),d(!0)}function P(e){document.querySelectorAll(".chat-btn").forEach((function(e){e.classList.contains("active-btn")&&e.classList.remove("active-btn")})),e.target.closest("button").classList.add("active-btn")}return(0,e.useEffect)((function(){var e=Ik(ak(yg(Fk,"chats"),ck("name","asc")),(function(e){var t=e.docs.filter((function(e){return e.data().participants.includes(r.uid)}));_(t.map((function(e){return e.data()})))})),t=Ik(ak(yg(Fk,"users"),ck("name","asc")),(function(e){var t=e.docs.filter((function(e){return e.data().userID!==r.uid}));S(t.map((function(e){return e.data()})))})),n=Ik(ak(yg(Fk,"users",r.uid,"private_chats"),ck("name","asc")),(function(e){I(e.docs.map((function(e){return e.data()})))}));return function(){e(),t(),n()}}),[r]),(0,ME.jsxs)("div",{onClick:function(e){var t=document.querySelectorAll(".popup"),n=document.querySelector(".users-wrapper"),r=document.querySelector(".new-chat-popup"),i=document.querySelector(".rename-chat-popup");Array.from(t).forEach((function(t){t.classList.contains("active")&&!e.target.closest(".popup-btn")&&t.classList.toggle("active")})),!n.classList.contains("userlist-open")||n.contains(e.target)||e.target.closest(".userlist-btn")||o(!1),!r.classList.contains("new-chat-popup-open")||r.contains(e.target)||e.target.closest(".new-chat-btn")||l(!1),!i.classList.contains("rename-chat-popup-open")||i.contains(e.target)||e.target.closest(".rename-chat-btn")||d(!1)},className:"UI",children:[(0,ME.jsx)(ON,{users:E,chatData:g,open:a,setOpen:o}),(0,ME.jsx)(LN,{open:c,setOpen:l}),(0,ME.jsx)(MN,{chatData:g,open:h,setOpen:d}),(0,ME.jsxs)("div",{className:"sidebar",children:[(0,ME.jsxs)("div",{className:"sidebar-header",children:[(0,ME.jsx)("img",{src:r.photoURL,alt:r.displayName,className:"profile-pic"}),(0,ME.jsx)("h1",{children:"Chats"}),(0,ME.jsxs)("div",{className:"sidebar-header-btns",children:[(0,ME.jsxs)("div",{className:"menu-wrapper",children:[(0,ME.jsx)("button",{onClick:N,className:"sidebar-header-btn popup-btn",children:(0,ME.jsx)("i",{className:"fa-solid fa-ellipsis fa-xl"})}),(0,ME.jsxs)("div",{className:"menu-popup popup",children:[(0,ME.jsxs)("button",{disabled:!0,children:[(0,ME.jsx)("i",{className:"fa-solid fa-gear fa-xl"})," Preferences"]}),(0,ME.jsxs)("button",{disabled:!0,children:[(0,ME.jsx)("i",{className:"fa-solid fa-circle-question fa-xl"})," Help"]}),(0,ME.jsxs)("button",{disabled:!0,children:[(0,ME.jsx)("i",{className:"fa-solid fa-circle-exclamation fa-xl"})," ","Report"]}),(0,ME.jsxs)("button",{onClick:n,children:[(0,ME.jsx)("i",{className:"fa-solid fa-right-from-bracket fa-xl"})," ","Logout"]})]})]}),(0,ME.jsxs)("div",{className:"add-chat-wrapper",children:[(0,ME.jsx)("button",{onClick:N,className:"sidebar-header-btn popup-btn",children:(0,ME.jsx)("i",{className:"fa-solid fa-plus fa-xl"})}),(0,ME.jsxs)("div",{className:"add-chat-popup popup",children:[(0,ME.jsxs)("button",{className:"userlist-btn",onClick:function(){A(null)},children:[(0,ME.jsx)("i",{className:"fa-solid fa-user fa-xl "})," Private"]}),(0,ME.jsxs)("button",{className:"new-chat-btn",onClick:function(){l(!0)},children:[(0,ME.jsx)("i",{className:"fa-solid fa-users fa-xl"})," Public"]})]})]}),(0,ME.jsx)("button",{onClick:function(){var e=document.querySelector(".theme-icon");"fa-moon"===e.classList[1]?(e.classList.replace("fa-moon","fa-sun"),document.documentElement.style.cssText="--section-border: 2px solid #ffffff1f;\n        --active-btn-bgcolor: #ffffff29;\n        --msg-received-bgcolor: #515151;\n        --main-bg-color: #303030\n        "):(e.classList.replace("fa-sun","fa-moon"),document.documentElement.style.cssText="--section-border: 2px solid #f0f0f0;\n        --active-btn-bgcolor: #00000014;\n        --msg-received-bgcolor: #e6e6e6;\n        --main-bg-color: #f0f0f0\n        "),document.querySelector(".UI").classList.toggle("dark"),document.querySelectorAll("i").forEach((function(e){e.classList.toggle("dark-icon")})),document.querySelectorAll("input").forEach((function(e){e.classList.toggle("dark-input")})),document.querySelectorAll("textarea").forEach((function(e){e.classList.toggle("dark-input")})),document.querySelectorAll("button").forEach((function(e){e.classList.toggle("dark-button")})),document.querySelectorAll(".side-text").forEach((function(e){e.classList.toggle("dark-side-text")})),document.querySelectorAll(".popup").forEach((function(e){e.classList.toggle("dark-popup")})),document.querySelector("emoji-picker").classList.toggle("dark"),document.querySelector(".users-wrapper").classList.toggle("dark-users-list")},className:"sidebar-header-btn theme-btn",children:(0,ME.jsx)("i",{className:"fa-solid fa-moon fa-xl theme-icon"})})]})]}),(0,ME.jsx)("input",{type:"text",onKeyUp:function(){for(var e=v.toUpperCase(),t=document.querySelectorAll(".chat-button-li"),n=0;n<t.length;n++){var r=t[n].querySelector(".chat-title");(r.textContent||r.innerText).toUpperCase().indexOf(e)>-1?t[n].style.display="":t[n].style.display="none"}},value:v,onChange:function(e){m(e.target.value)},placeholder:"Search chat",className:"search-chat"}),(0,ME.jsxs)("ul",{className:"chat-btns-wrapper",id:"chat-buttons-list",children:[w.map((function(e){return(0,ME.jsx)("li",{className:"chat-button-li",children:(0,ME.jsx)(AN,{onClick:P,className:"chat-link",to:e.name,children:(0,ME.jsx)(lI,{chatData:e,isGroupChat:!0})})},e.chatID)})),T.map((function(e){return(0,ME.jsx)("li",{className:"chat-button-li",children:(0,ME.jsx)(AN,{onClick:P,className:"chat-link",to:e.name,children:(0,ME.jsx)(lI,{chatData:e,isGroupChat:!1})})},e.chatID)}))]})]}),(0,ME.jsxs)(wN,{children:[(0,ME.jsx)(kN,{exact:!0,path:"/",element:(0,ME.jsx)("div",{className:"chat"})}),w.map((function(e){return(0,ME.jsx)(kN,{path:e.name,element:(0,ME.jsx)(sI,{openUserlist:A,openRenameChatPopup:R,openPopup:N,chatData:e,isGroupChat:!0})},e.chatID)})),T.map((function(e){return(0,ME.jsx)(kN,{path:e.name,element:(0,ME.jsx)(sI,{openUserlist:A,openRenameChatPopup:R,openPopup:N,chatData:e,isGroupChat:!1})},e.chatID)}))]})]})};var jN=function(){var e=u(oo(Lk),2),t=e[0];return e[1]?(0,ME.jsx)("div",{className:"loading-screen",children:"loading..."}):t?(0,ME.jsx)(FN,{signOut:function(){Lk.currentUser&&Lk.signOut()}}):(0,ME.jsx)(FE,{})};r.createRoot(document.getElementById("root")).render((0,ME.jsx)(e.StrictMode,{children:(0,ME.jsx)(TN,{children:(0,ME.jsx)(jN,{})})}))}()}();
//# sourceMappingURL=main.8454ee1c.js.map